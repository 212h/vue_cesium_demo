(window.webpackJsonp=window.webpackJsonp||[]).push([[25],{218:function(t,e,i){},219:function(t,e,i){},221:function(t,e,i){},223:function(t,e,i){},224:function(t,e,i){},226:function(t,e,i){},323:function(t,e,i){"use strict";i(218)},324:function(t,e,i){"use strict";i(219)},327:function(t,e,i){"use strict";i(221)},329:function(t,e,i){"use strict";i(223)},330:function(t,e,i){"use strict";i(224)},331:function(t,e,i){"use strict";i(226)},475:function(t,e,i){"use strict";i.r(e);var s=i(2),n=i(5),a=i(0);i(4);function r(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"reader-helper",e=Object(n.$)("#".concat(t)),i=+e.css("left").replace("px",""),s=+e.css("top").replace("px","");return{left:i,top:s}}var o={x:0,y:0},c=!1;function l(){var t,e;null!==(t=document)&&void 0!==t&&null!==(e=t.selection)&&void 0!==e&&e.empty?document.selection.empty():window.getSelection().removeAllRanges()}function d(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,s)}return i}function p(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?d(Object(i),!0).forEach((function(e){u(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):d(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function u(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}!c&&Object(n.$)(document).on("mousemove",(function(t){o.x=t.clientX,o.y=t.clientY,c=!0}));var v={en:"英",zh:"汉",jp:"日"},h={data:function(){return{logImgSrc:"https://edu-wenku.bdimg.com/icms_transform/img/iknow/wenku/fanyi/fanyi.png",makerHtml:"",titleHtml:"",href:"http://fanyi.baidu.com/",style:{left:0,top:0}}},computed:p(p({},Object(s.mapState)("readerPlugin",["visibleTranslate","visibleRemindTranslate"])),Object(s.mapGetters)("readerPlugin",["selectedTextTrim"])),watch:{visibleTranslate:function(t){if(t){var e=r(),i=e.left,s=e.top;this.style={left:i+25,top:s>0?s:0},this.command()}},visibleRemindTranslate:function(t){if(t){var e=r("reader-remind"),i=e.left,s=e.top;this.style={left:i+150,top:s>0?s:0},this.command()}}},methods:p(p({},Object(s.mapMutations)("readerPlugin",["setVisibleTranslate","setSelectedText","setVisibleRemindTranslate"])),{},{clickStop:function(){this.setVisibleTranslate(!1),this.setVisibleRemindTranslate(!1),this.clear(),this.setSelectedText(""),l()},clear:function(){this.makerHtml="",this.titleHtml=""},handleBlur:function(t){var e=this,i=!(!t.target||!t.target.id||"reader-plugin-translate"!==t.target.id);i||(i=!(!t.relatedTarget||!t.relatedTarget.id||"reader-fanyi-link"!==t.relatedTarget.id)),i?setTimeout((function(){e.setVisibleTranslate(!1),e.setVisibleRemindTranslate(!1),e.clear()}),1e3):(this.setVisibleTranslate(!1),this.setVisibleRemindTranslate(!1),this.clear())},command:function(){var t=this,e=this.selectedTextTrim;if(!e)return!1;this.getTranslate(e,(function(i,s){t.makerHtml=s.join("<br/>"),t.titleHtml=(v[i.from]||"")+(v[i.to]||"");var n=encodeURIComponent(e);t.href="http://fanyi.baidu.com/#auto2auto|".concat(n)})),Object(n.$)("#reader-plugin-translate").focus()},getTranslate:function(t,e){n.$.ajax({url:"https://openapi.baidu.com/public/2.0/bmt/translate",dataType:"jsonp",data:{client_id:"ZSOa9QIVMGqTVsonm1kRzXEF",from:"auto",to:"auto",q:t},success:function(t){var i=[];!Object.prototype.hasOwnProperty.call(t,"error_code")&&t.trans_result&&(n.$.each(t.trans_result,(function(){var t=Object(n.$)("<div>").text(this.dst).html();i.push(t)})),e(t,i))}})}})},f=(i(323),i(3)),b=Object(f.default)(h,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{directives:[{name:"show",rawName:"v-show",value:t.visibleTranslate||t.visibleRemindTranslate,expression:"visibleTranslate || visibleRemindTranslate"}],style:"left: "+t.style.left+"px; top: "+t.style.top+"px;",attrs:{id:"reader-plugin-translate"},on:{blur:function(e){return t.handleBlur(e)}}},[i("div",{staticClass:"tips-wrap"},[i("span",{staticClass:"trangle"}),t._v(" "),i("div",{staticClass:"inner"},[i("div",{staticClass:"hd"},[i("span",{staticClass:"title"},[t._v("\n                    以下结果由\n                    "),i("img",{attrs:{src:t.logImgSrc}}),t._v("\n                    提供："),i("span",{attrs:{id:"reader-translate-title"},domProps:{innerHTML:t._s(t.titleHtml)}})]),t._v(" "),i("span",{staticClass:"act"},[i("span",{staticClass:"close",on:{click:function(e){return e.stopPropagation(),t.clickStop.apply(null,arguments)}}},[t._v("×")])])]),t._v(" "),i("div",{staticClass:"bd"},[i("div",{attrs:{id:"reader-translate-marker"},domProps:{innerHTML:t._s(t.makerHtml)}})]),t._v(" "),i("div",{staticClass:"ft"},[i("a",{attrs:{href:t.href,id:"reader-fanyi-link",target:"_blank"}},[t._v("百度翻译")])])])])])}),[],!1,null,"6985b47c",null).exports,m=i(31),y=i(9),C=i(29),g=i.n(C),T=i(12);function _(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,s)}return i}function O(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?_(Object(i),!0).forEach((function(e){w(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):_(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function w(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var P={data:function(){return{visibleToast:!1,timer:void 0,qr:void 0,qrCodeStyle:{left:0,top:0}}},computed:O(O({},Object(s.mapState)("vipInfo",["isVip"])),Object(s.mapGetters)("readerPlugin",["selectedTextTrim","visibleSendToPhoneDialog","visibleSendToPhoneQrcode"])),watch:{visibleSendToPhoneQrcode:function(t){var e=this;if(t&&this.isVip&&this.selectedTextTrim.length>1e4)return this.closeQrcode(),this.visibleToast=!0,setTimeout((function(){e.visibleToast=!1}),3e3);if(t){var i=r(),s=i.left,a=i.top;this.qrCodeStyle={left:s+45,top:a-165<0?0:a-165};var o=this.selectedTextTrim,c={act:"add",content:o,title:document.title.replace("_百度文库","")};return y.wkAxios.post("https://wenku.baidu.com/browse/interface/sendcopytxt",n.$.param(c),{timeout:5e3}).then((function(t){var i=t.token;e.toWap(o,i)}))}this.clear()}},methods:O(O({},Object(s.mapMutations)("readerPlugin",["setIsSendToPhoneActivated","setSendCount"])),{},{clickVipText:function(){var t=Object(T.c)(T.a.VIP,{location:"ReaderPlugin.SendToPhone1"});window.open(t)},closeQrcode:function(){this.clear(),this.setIsSendToPhoneActivated(!1),l()},clear:function(){this.$refs.qrcodeWrap.innerHTML=""},toWap:function(t,e){var i=this.isVip,s=+new Date;if(!t||!e)return!1;var r="https://wk.baidu.com/topic/sendToPhone/sendToPhone?"+n.$.param({token:encodeURIComponent(e),currentTime:s,isVip:i});this.qr=new g.a(this.$refs.qrcodeWrap,{text:r,width:124,height:124,colorDark:"#000000",colorLight:"#ffffff",correctLevel:g.a.CorrectLevel.L}),i?a.log.xsend(101795):this.updateSendCountToCookie(),Object(n.$)("#reader-qrcode-tip").focus()},closeDialog:function(){a.log.xsend(101794,{type:"close"}),this.setIsSendToPhoneActivated(!1),clearInterval(this.timer)},updateSendCountToCookie:function(){var t=+(m.default.get("Send_Count")||0);this.setSendCount(t+1)},clickOpenVip:function(){a.log.xsend(101794,{type:"cashier"});var t=Object(T.c)(T.a.VIP,{location:"ReaderPlugin.SendToPhone2"});window.location.href=t}})},j=(i(324),Object(f.default)(P,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("div",{directives:[{name:"show",rawName:"v-show",value:t.visibleSendToPhoneDialog,expression:"visibleSendToPhoneDialog"}],staticClass:"send-to-phone-dialog"},[i("div",{staticClass:"pop-up-window"}),t._v(" "),i("div",{staticClass:"send-to-phone-pop-container super-vip"},[i("div",{staticClass:"pop-container"},[i("div",{staticClass:"close-dialog-btn",on:{click:t.closeDialog}}),t._v(" "),i("div",{staticClass:"title"},[t._v("超出发送上限，加入VIP即可继续发送")]),t._v(" "),i("div",{staticClass:"coupon",on:{click:t.clickOpenVip}},[t._m(0),t._v(" "),t._m(1)]),t._v(" "),i("div",{staticClass:"get-coupon-btn",on:{click:t.clickOpenVip}},[i("i"),t._v("开通VIP，享无限制发送与复制特权\n                ")]),t._v(" "),t._m(2)])])]),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:t.visibleToast,expression:"visibleToast"}],staticClass:"toast-over-count-wrap"},[t._v("\n        超过1万字无法发送，您可减少字数多次发送\n    ")]),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:t.visibleSendToPhoneQrcode,expression:"visibleSendToPhoneQrcode"}],class:t.isVip?"vip":"not-vip",style:"left: "+t.qrCodeStyle.left+"px; top: "+t.qrCodeStyle.top+"px;",attrs:{id:"reader-qrcode-tip"}},[i("div",{staticClass:"hd"},[t._m(3),t._v(" "),i("span",{staticClass:"link-close",on:{click:function(e){return e.stopPropagation(),t.closeQrcode.apply(null,arguments)}}})]),t._v(" "),i("div",{staticClass:"bd"},[i("div",{attrs:{id:"reader-qrcode-marker"}},[i("div",{ref:"qrcodeWrap",staticClass:"reader-qrcode-wrap"})]),t._v(" "),t.isVip?t._e():i("div",{staticClass:"vip-text super-vip"},[i("span",{on:{click:t.clickVipText}},[t._v("\n                    VIP享无限制发送特权\n                ")])])])])])}),[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"left-qrcode"},[e("span",[this._v("未开通VIP")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"right-text"},[this._v("\n                        选择文档内容"),e("br"),this._v("扫一扫，立即发送到手机\n                    ")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"icon-group"},[e("div",{staticClass:"item item-1"},[e("i"),this._v("享VIP专享文档下载特权\n                    ")]),this._v(" "),e("div",{staticClass:"item item-2"},[e("i"),this._v("赠共享文档下载特权\n                    ")]),this._v(" "),e("div",{staticClass:"item item-3"},[e("i"),this._v("100W篇文档免费专享\n                    ")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"title"},[e("div",[this._v("选择内容扫一扫")]),this._v(" "),e("div",[this._v("立即发送到手机")])])}],!1,null,"9d692adc",null).exports),x=i(200),S=i.n(x),k=i(72),V=i.n(k),I=i(1),D=i(7),L=i(21);function R(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,s)}return i}function E(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?R(Object(i),!0).forEach((function(e){$(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):R(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function $(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var B=D.a.ACT_ID,q=D.a.BEHAVIOR,A=D.a.MODULE,H={props:{copyBtnId:String},data:function(){return{visibleTip:!1,visibleDialog:!1,visibleOverText:!1,clipboard:void 0,cannotCopy:!1,copyTimes:0,btnText:"开通VIP"}},computed:E(E(E(E(E(E(E({},Object(s.mapState)(["priceInfo"])),Object(s.mapState)("docInfo",["docBizType"])),Object(s.mapState)("vipInfo",["isVip"])),Object(s.mapState)("readerPlugin",["lastStatus","isCopyActivated","visible"])),Object(s.mapState)("docInfo",["docId"])),Object(s.mapGetters)("readerPlugin",["selectedTextTrim","formatedText"])),{},{copyV2Tips:function(){var t="已为您复制内容，此处已被复制";return 0===this.copyTimes||null==this.copyTimes?"已为您复制内容":this.copyTimes<99?t+this.copyTimes+"次":this.copyTimes<999?t+99+"+次":this.copyTimes<1e4?t+999+"+次":t+"1W+次"}}),mounted:function(){var t=this;this.clipboard=new V.a(".".concat(this.copyBtnId)),this.clipboard.on("success",(function(e){t.setVisible(!1);var i=t.selectedTextTrim.length||0;if(t.isOverLimit(i))return t.visibleOverText=!0,void setTimeout((function(){t.visibleOverText=!1}),3e3);t.canCopy(t.selectedTextTrim.length)&&(t.visibleTip=!0,setTimeout((function(){t.visibleTip=!1}),2e3),!t.isVip&&t.setCountToCookie()),a.log.xsend(B,{behavior:q.CLICK,module:[A.ReaderPlugin,"Copy","success"].join("_"),content:t.selectedTextTrim}),e.clearSelection()})),this.bindEvent()},watch:{isCopyActivated:function(t){t&&this.cannotCopy&&(this.showVipGuideCard(),a.log.xsend(B,{behavior:q.SHOW,module:[A.ReaderPlugin,"Copy","copybtn"].join("_"),content:this.selectedTextTrim}),this.fetchCopyTimes(this.selectedTextTrim))},formatedText:function(t){this.canCopy(t.length)?(Object(n.$)(".".concat(this.copyBtnId)).attr("data-clipboard-text",t),this.cannotCopy=!1):this.cannotCopy=!0}},methods:E(E({},Object(s.mapMutations)("readerPlugin",["setVisible","setIsCopyActivated"])),{},{bindEvent:function(){var t=this,e=this;Object(n.$)(document).on("keydown",(function(i){var s=i.keyCode||i.which||i.charCode;if((i.ctrlKey||i.metaKey)&&67===s&&e.cannotCopy){if(!e.visible)return;var n=+t.docBizType!==I.b.CASH;return a.log.xsend(B,{behavior:q.CLICK,module:[A.ReaderPlugin,"Copy","ctrlc",n].join("_")}),n&&t.showVipGuideCard(),i&&i.returnValue&&(i.returnValue=!1),!1}}))},fetchCopyTimes:function(t){var e=this;Object(L.a)({url:"/ndocview/interface/gettxtcopypopdata",data:{docId:this.docId,cpTxt:S()(t)}}).then((function(t){var i,s;e.copyTimes=(null==t||null===(i=t.pop)||void 0===i?void 0:i.copyCnt)||0,e.btnText=(null==t||null===(s=t.pop)||void 0===s?void 0:s.buttonTxt)||"开通VIP"}))},canCopy:function(t){var e=this.getCountFromCookie()<10;return t>100&&!this.isVip&&this.docBizType!==I.b.SECRET&&(e=!1),this.isVip||e},isOverLimit:function(t){return!!((t=t||0)>1e3&&this.isVip&&this.docBizType!==I.b.SECRET)},showVipGuideCard:function(){this.visibleDialog=!0,a.log.xsend(B,{behavior:q.SHOW,module:[A.ReaderPlugin,"Copy","vipGuide"].join("_")})},clickDialogClose:function(){this.visibleDialog=!1,this.setIsCopyActivated(!1),this.setVisible(!1)},getCountFromCookie:function(){return+(m.default.get("Copy_Count")||0)},setCountToCookie:function(){var t=this.getCountFromCookie();m.default.set("Copy_Count",String(t+1),{path:"/",expires:1})},clickBuyVipBtn:function(){a.log.xsend(B,{behavior:q.CLICK,module:[A.ReaderPlugin,"Copy","buyvip"].join("_")}),setTimeout((function(){var t=Object(T.c)(T.a.VIP,{location:"ReaderPlugin.Copy"});window.location.href=t}),500)}})},M=(i(327),Object(f.default)(H,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("div",{directives:[{name:"show",rawName:"v-show",value:t.visibleTip,expression:"visibleTip"}],style:{left:t.lastStatus.x-70+"px",top:t.lastStatus.y-70+"px"},attrs:{id:"reader-copy-success-tip"}},[t._m(0)]),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:t.visibleOverText,expression:"visibleOverText"}],staticClass:"toast-over-text-wrap"},[t._v("\n        您已超出最大复制字数限制，请减少字数重新尝试\n    ")]),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:t.visibleDialog,expression:"visibleDialog"}],staticClass:"dialog-mask"}),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:t.visibleDialog,expression:"visibleDialog"}],staticClass:"copy-limit-dialog-v2"},[i("div",{staticClass:"close-dialog-btn dialog-close",on:{click:t.clickDialogClose}}),t._v(" "),i("div",{staticClass:"main-content"},[i("span",{staticClass:"tip-message"},[t._v("\n                "+t._s(t.copyV2Tips)+"\n            ")]),t._v(" "),i("div",{staticClass:"sub-tip"},[t._v("\n                开通VIP，立即解锁文本内容\n            ")]),t._v(" "),i("span",{staticClass:"buy-vip-btn",on:{click:t.clickBuyVipBtn}},[t._v("\n                "+t._s(t.btnText)+"\n            ")]),t._v(" "),i("div",{staticClass:"vip-right"},[t._v("\n                VIP会员尊享权益\n            ")]),t._v(" "),i("div",{staticClass:"vip-right-list"})])])])}),[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"tips-wrap"},[e("div",{staticClass:"inner"},[this._v("\n                文字已复制\n            ")])])}],!1,null,"0739877e",null).exports),F=i(14),N=i(195);function G(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,s)}return i}function U(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?G(Object(i),!0).forEach((function(e){W(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):G(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function W(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var Q={props:{topPosition:Boolean},components:{FileTypeIcon:N.a},computed:U(U({},Object(s.mapState)("readerPlugin",["visible"])),Object(s.mapGetters)("readerPlugin",["selectedTextTrim"])),data:function(){return{visibleSearchPreview:!1,searchList:[]}},watch:{selectedTextTrim:function(t){t&&t.length<=20&&this.visible?this.fetchSearchResult(t):(this.visibleSearchPreview=!1,this.searchList=[])}},methods:{getFileType:function(t){return F.b.getFileType(t)},toSearch:function(t){if(t){a.log.xsend(102734,{index:0});var e=t.replace(/\n/g,"").replace(/\s/g,"+"),i="https://wenku.baidu.com/search?"+n.$.param({word:e,lm:0,od:0,cc:"SearchFloatMore"});window.open(i)}},toView:function(t,e){a.log.xsend(102734,{index:e});var i=t.doc_url;i+=i.indexOf("?")>-1?"&cc=SearchFloatDoc".concat(e):"?cc=SearchFloatDoc".concat(e),window.open(i)},fetchSearchResult:function(t){var e=this,i="/search/main?word="+encodeURIComponent(t);n.$.ajax({url:i,data:{interface:1},success:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=t.errno,s=t.data,n=void 0===s?{}:s;if(0===i){var a=n.searchResult,r=Math.min(2,a.length);0!==r&&(e.visibleSearchPreview=!0,e.searchList=a.slice(0,r))}}})}}},z=(i(329),i(330),Object(f.default)(Q,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{directives:[{name:"show",rawName:"v-show",value:t.visibleSearchPreview,expression:"visibleSearchPreview"}],class:["search-result-wrap",t.topPosition?"top-position":""]},[i("div",{staticClass:"to-search-wrap"},[i("div",{staticClass:"link",on:{click:function(e){return t.toSearch(t.selectedTextTrim)}}},[t._v("\n            查看全部包含“"+t._s(t.selectedTextTrim)+"”的文档\n        ")])]),t._v(" "),i("div",{staticClass:"search-result-list"},t._l(t.searchList,(function(e,s){return i("div",{key:s,staticClass:"search-result-item",on:{click:function(i){return t.toView(e,s+1)}}},[i("div",{staticClass:"doc-head"},[i("FileTypeIcon",{attrs:{"type-name":t.getFileType(e.doc_type)}}),t._v(" "),i("div",{staticClass:"doc-title",domProps:{innerHTML:t._s(e.title)}})],1),t._v(" "),i("div",{staticClass:"doc-desc",domProps:{innerHTML:t._s(e.content)}}),t._v(" "),i("div",{staticClass:"doc-infomation"},[i("div",{staticClass:"doc-date"},[t._v(t._s(e.create_time))]),t._v(" "),i("div",{staticClass:"divider"}),t._v(" "),i("div",{staticClass:"doc-total-page"},[t._v("共"+t._s(e.page_num)+"页")]),t._v(" "),i("div",{staticClass:"divider"}),t._v(" "),i("div",{staticClass:"doc-download-count"},[t._v(t._s(e.download_count)+"次下载")])])])})),0)])}),[],!1,null,"a381170e",null).exports),K=i(225);function J(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,s)}return i}function X(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?J(Object(i),!0).forEach((function(e){Y(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):J(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function Y(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var Z=D.a.ACT_ID,tt=D.a.BEHAVIOR,et=D.a.MODULE,it={data:function(){return{copyBtnId:"reader-copy-button",theme:"",copyTimes:0,avatarList:[],topPosition:!1,baseLeft:0}},computed:X(X(X(X(X(X(X(X(X({},Object(s.mapState)(["docInfo","readerInfo"])),Object(s.mapState)("userInfo",["isLogin"])),Object(s.mapState)("readerPlugin",["lastStatus","visible","reminderStatus","remindVisible"])),Object(s.mapGetters)("readerPlugin",["selectedTextTrim","formatedText"])),Object(s.mapState)("visitUserInfo",["isTaskUser","taskStatus"])),Object(s.mapState)("docInfo",["docId"])),Object(s.mapState)("vipInfo",["isVip"])),Object(s.mapState)("editStatus",["editorMarginLeft","showCatalog"])),{},{style:function(){var t=this.lastStatus,e=t.x,i=t.y,s=i-65+"px",a=e-160+this.baseLeft>0?e-160+this.baseLeft:0,r=Object(n.$)(".reader-wrap").width();return a=r-320>a?a:r-320,a+="px",this.topPosition=i-65<240,{top:s,left:a}},reminder:function(){var t=this.reminderStatus,e=t.x,i=t.y;return{top:i-90<0?"0px":i-90+"px",left:(e+this.baseLeft>0?e+this.baseLeft:0)+"px"}}}),watch:{showCatalog:function(t){this.updateBaseLeft(t,this.editorMarginLeft)},editorMarginLeft:function(t){this.updateBaseLeft(this.showCatalog,t)},visible:function(t){t&&(this.selectedTextTrim.length<=20?this.theme="a":this.theme="b")}},components:{Copy:M,SendToPhone:j,Translate:b,SearchPreview:z},mounted:function(){this.fetchCopyTimes()},methods:X(X(X({},Object(s.mapMutations)("readerPlugin",["setVisible","setVisibleTranslate","setVisibleRemindTranslate","setSelectedText","setIsSendToPhoneActivated","setIsCopyActivated","setLastStatus","setReminderVisible"])),Object(s.mapMutations)("visitUserInfo",["setTaskStatus"])),{},{updateBaseLeft:function(t,e){var i,s,a=+(null===(i=Object(n.$)(".quill-editor").css("margin-left"))||void 0===i?void 0:i.replace("px",""))||0,r="none"!==(null===(s=Object(n.$)(".catalog-wrap"))||void 0===s?void 0:s.css("display"));this.baseLeft=e&&t&&r?a+e:a},clickSearch:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"reader";a.log.xsend(102225,{position:t});var e=this.selectedTextTrim;if(e){e=e.replace(/\n/g,"").replace(/\s/g,"+");var i=n.$.param({word:e,lm:0,od:0,fr:"top_home",cc:"SearchFloatBtn"});window.open("https://wenku.baidu.com/search?".concat(i))}},clickTranslate:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"reader";a.log.xsend(102223,{position:t}),a.log.xsend(100787,{position:t}),this.setVisible(!1),this.setReminderVisible(!1),"remind"===t?this.setVisibleRemindTranslate(!0):this.setVisibleTranslate(!0)},clickSendToPhone:function(){a.log.xsend(100786),a.log.xsend(102224),this.setVisible(!1),this.setIsSendToPhoneActivated(!0)},clickCopy:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"reader";if(a.log.xsend(102222,{position:t}),"remind"===t&&!this.isVip)return this.buyVip("remind");if(this.setVisible(!1),this.setReminderVisible(!1),this.setIsCopyActivated(!0),this.isTaskUser&&1===this.taskStatus){var e=this.taskStatus,i=++e;Object(K.a)(1,i)}},fetchCopyTimes:function(){var t=this;Object(L.a)({url:"/ndocview/interface/gettxtcopytimes",data:{docId:this.docId}}).then((function(e){var i,s;t.copyTimes=(null==e||null===(i=e.copyTimes)||void 0===i?void 0:i.copyCnt)||0,t.avatarList=(null==e||null===(s=e.copyTimes)||void 0===s?void 0:s.avatarList)||[]}))},buyVip:function(t){a.log.xsend(Z,{behavior:tt.CLICK,module:[et.ReaderPlugin,"remind",t].join("_")});var e={location:"ReaderPlugin.Copy.".concat(t)},i=Object(T.c)(T.a.VIP,e);location.href=i}})},st=(i(331),Object(f.default)(it,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("div",{directives:[{name:"show",rawName:"v-show",value:t.visible,expression:"visible"}],staticClass:"copy-v2",style:{top:t.style.top,left:t.style.left},attrs:{id:"reader-helper"}},[i("SearchPreview",{attrs:{"top-position":t.topPosition}}),t._v(" "),i("div",{staticClass:"tips-wrap"},[i("span",{staticClass:"trangle"}),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:"a"===t.theme,expression:"theme === 'a'"}],staticClass:"inner wk-web-2270-a"},[i("span",{staticClass:"reader-search-button",on:{click:t.clickSearch}},[i("i",{staticClass:"search"}),t._v("\n                    搜索\n                ")]),t._v(" "),i("span",{staticClass:"divider"}),t._v(" "),i("span",{class:[t.copyBtnId],attrs:{"data-clipboard-text":""},on:{click:t.clickCopy}},[i("i",{staticClass:"copy"}),t._v("复制")]),t._v(" "),i("span",{staticClass:"divider"}),t._v(" "),i("span",{staticClass:"reader-qrcode-button",on:{click:function(e){return e.stopPropagation(),t.clickSendToPhone.apply(null,arguments)}}},[i("i",{staticClass:"send"}),t._v("发送到手机\n                ")]),t._v(" "),i("span",{staticClass:"divider"}),t._v(" "),i("span",{staticClass:"reader-translate-button",on:{click:t.clickTranslate}},[i("i",{staticClass:"translate"}),t._v("翻译\n                ")])]),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:"b"===t.theme,expression:"theme === 'b'"}],staticClass:"inner wk-web-2270-b"},[i("span",{class:[t.copyBtnId],attrs:{"data-clipboard-text":""},on:{click:t.clickCopy}},[i("i",{staticClass:"copy"}),t._v("复制\n                ")]),t._v(" "),i("span",{staticClass:"divider"}),t._v(" "),i("span",{staticClass:"reader-search-button",on:{click:t.clickSearch}},[i("i",{staticClass:"search"}),t._v("搜索\n                ")]),t._v(" "),i("span",{staticClass:"divider"}),t._v(" "),i("span",{staticClass:"reader-qrcode-button",on:{click:function(e){return e.stopPropagation(),t.clickSendToPhone.apply(null,arguments)}}},[i("i",{staticClass:"send"}),t._v("发送到手机\n                ")]),t._v(" "),i("span",{staticClass:"divider"}),t._v(" "),i("span",{staticClass:"reader-translate-button",on:{click:t.clickTranslate}},[i("i",{staticClass:"translate"}),t._v("翻译\n                ")])])])],1),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:t.remindVisible,expression:"remindVisible"}],style:{top:t.reminder.top,left:t.reminder.left},attrs:{id:"reader-remind"}},[i("div",{staticClass:"remind-tips-wrap"},[i("div",{staticClass:"op-area"},[i("span",{class:[t.copyBtnId],attrs:{"data-clipboard-text":""},on:{click:function(e){return t.clickCopy("remind")}}},[i("i",{staticClass:"copy"}),t._v("复制\n                ")]),t._v(" "),i("span",{staticClass:"reader-search-button",on:{click:function(e){return t.clickSearch("remind")}}},[i("i",{staticClass:"search"}),t._v("搜索\n                ")]),t._v(" "),i("span",{staticClass:"reader-translate-button",on:{click:function(e){return t.clickTranslate("remind")}}},[i("i",{staticClass:"translate"}),t._v("翻译\n                ")]),t._v(" "),i("span",{staticClass:"divider"}),t._v(" "),i("span",{staticClass:"pre"},[t._v("\n                    <\n                ")]),t._v(" "),i("span",{staticClass:"next",on:{click:function(e){return t.buyVip("next")}}},[t._v("\n                    >\n                ")])]),t._v(" "),i("div",{staticClass:"show-area"},[t._l(t.avatarList,(function(t,e){return i("span",{key:e,staticClass:"avatar",style:{backgroundImage:"url("+t+")"}})})),t._v(" "),i("span",{staticClass:"text"},[t._v("等"+t._s(t.copyTimes)+"人已复制此文本")])],2)])]),t._v(" "),i("Copy",{attrs:{"copy-btn-id":t.copyBtnId,"copy-times":t.copyTimes}}),t._v(" "),i("SendToPhone"),t._v(" "),i("Translate")],1)}),[],!1,null,"098cdbb4",null));e.default=st.exports}}]);