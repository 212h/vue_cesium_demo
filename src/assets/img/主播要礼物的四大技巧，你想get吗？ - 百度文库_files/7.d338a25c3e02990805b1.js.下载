(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{483:function(e,t,r){"use strict";r.r(t);var s=r(5),i=r(0),n=r(31),a=r(9),o=r(240),u=r(4);function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){for(var r=0;r<t.length;r++){var s=t[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function c(e,t,r){return t&&l(e.prototype,t),r&&l(e,r),e}var h=r(200),m=function(){function e(t){f(this,e),this.url="",this.fatherUrl="",this.key="",this.fatherKey="",this.urlParam={},this.userActs=[];var r=t.url,s=t.fatherUrl,i=t.urlParam,n=t.userActs;this.url=r,this.fatherUrl=s,this.key=h(r),this.fatherKey=h(s),i&&(this.urlParam=i),n&&(this.userActs=n)}return c(e,[{key:"setUrlParm",value:function(e){return this.urlParam=e,this}},{key:"setUserActs",value:function(e){return this.userActs=e,this}},{key:"pushUserAct",value:function(e){return this.userActs.push(e),this}},{key:"getUrl",value:function(){return this.url}},{key:"getKey",value:function(){return this.key}},{key:"getFatherKey",value:function(){return this.fatherKey}},{key:"getFatherUrl",value:function(){return this.fatherUrl}},{key:"getUrlParm",value:function(){return this.urlParam}},{key:"getUserActs",value:function(){return this.userActs}},{key:"getData",value:function(e){var t=this.url,r=this.fatherUrl,s=this.key,i=this.fatherKey,n=this.urlParam,a=this.userActs;return e?{p:n,u:t,a:a}:{url:t,fatherUrl:r,key:s,fatherKey:i,urlParam:n,userActs:a}}}]),e}(),p=function(){function e(t){f(this,e),this.session={},this.sessionStorage={},this.mapSessionEntry={},this.mapPageLifeKey={};try{this.sessionStorage=t||window.sessionStorage}catch(e){console.log(e)}this.syncFromStorage(),this.updateStorage()}return c(e,[{key:"getSessionItem",value:function(e){return this.session[e]}},{key:"setSessionItem",value:function(e,t){this.session[e]=t,this.updateStorage()}},{key:"getMapSessionEntry",value:function(){return this.mapSessionEntry}},{key:"getMapSessionEntryItem",value:function(e){return this.mapSessionEntry[e]}},{key:"setMapSessionEntryItem",value:function(e,t){t instanceof m&&(this.mapSessionEntry[e]=t,this.updateStorage())}},{key:"removeMapSessionEntryItem",value:function(e){delete this.mapSessionEntry[e],this.updateStorage()}},{key:"removeAllMapSessionEntry",value:function(){this.mapSessionEntry={},this.updateStorage()}},{key:"getMapPageLifeKeyItem",value:function(e){return this.mapPageLifeKey[e]}},{key:"setMapPageLifeKeyItem",value:function(e,t){this.mapPageLifeKey[e]=t,this.updateStorage()}},{key:"removeMapPageLifeKeyItem",value:function(e){delete this.mapPageLifeKey[e],this.updateStorage()}},{key:"createUrlParam",value:function(e,t){var r,s={sxts:+new Date},i=[];for(var n in s)s.hasOwnProperty(n)&&i.push(n+"="+s[n]);var a=t.indexOf("?")>-1?"&":"?";r=t+a+i.join("&");var o=h(r),u=window.location.href,f=new m({url:r,fatherUrl:u,urlParam:e});return this.setMapSessionEntryItem(o,f),r}},{key:"getUrlParam",value:function(){var e=h(window.location.href),t=this.getMapSessionEntryItem(e);if(void 0!==t&&t instanceof m)return t.getUrlParm()}},{key:"pushUserActs",value:function(e){var t=h(window.location.href),r=this.getMapSessionEntryItem(t);if(void 0===r||!(r instanceof m))return!1;r.pushUserAct(e)}},{key:"syncFromStorage",value:function(){if(this.sessionStorage.getItem){var e=this.sessionStorage.getItem("SessionX2020");if(e){var t=JSON.parse(e),r=t.mapSessionEntry;for(var s in r)if(r.hasOwnProperty(s)){var i=t.mapSessionEntry[s],n=i.url,a=i.fatherUrl,o=i.urlParam,u=i.userActs;this.mapSessionEntry[s]=new m({url:n,fatherUrl:a,urlParam:o,userActs:u})}this.mapPageLifeKey=t.mapPageLifeKey||{},this.session=t.session||{}}}}},{key:"updateStorage",value:function(){var e={};for(var t in this.mapSessionEntry)if(this.mapSessionEntry.hasOwnProperty(t)){var r=this.mapSessionEntry[t];e[t]=r}var s={mapSessionEntry:e,mapPageLifeKey:this.mapPageLifeKey,session:this.session};try{this.sessionStorage.setItem("SessionX2020",JSON.stringify(s))}catch(e){console.error(e)}}},{key:"generatePageChain",value:function(){for(var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=h(window.location.href),r=this.getMapSessionEntryItem(t),s=[];t&&r;)s.push(r.getData(e)),t=r.getFatherKey(),r=this.getMapSessionEntryItem(t);return s}}]),e}(),y=new p;({init:function(){this.pureSessionX()},pureSessionX:function(){var e=window.location.href,t=h(e),r=y.getMapSessionEntryItem(t);if(void 0===r||!(r instanceof m)){var s=new m({url:e,fatherUrl:"",urlParam:{},userActs:[]});return y.setMapSessionEntryItem(t,s),this}return this}}).init();var g={aladdin:/fr=aladdin/,wklm:/fr=wklm/,search:/^https?:\/\/((www|m)\.)?baidu\.com/,360:/^https?:\/\/((www|m)\.)?so\.com/,sougou:/^https?:\/\/((www|m)\.)?sougou\.com/,google:/^https?:\/\/(www\.)?google\.com/,biying:/^https?:\/\/(cn\.)?bing\.com/},v=function(e,t,r){var s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:location.hostname;if(!r)return{firstFromReferUrl:"",firstFromReferType:"useropen",isNeedRefresh:!0};var i="";if(r.replace(/https?:\/\/(.+?)[/:]/,(function(e,t){return i=t,""})),i===s||/(passport|wappass|wk|wenku)\.baidu\.com/.test(i))return{firstFromReferUrl:e,firstFromReferType:t,isNeedRefresh:!1};for(var n in g)if(g.hasOwnProperty(n)&&g[n].test(r))return{firstFromReferUrl:r,firstFromReferType:n,isNeedRefresh:!0};return{firstFromReferUrl:r,firstFromReferType:"other",isNeedRefresh:!0}};var d={SessionEntry:m,sessionXMgr:y,SessionXMgr:p,setFirstRefer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new p(window.localStorage),t=e.getSessionItem("firstFromReferUrl")||"",r=e.getSessionItem("firstFromReferType")||"",s=v(t,r,document.referrer,location.hostname),n=s.isNeedRefresh,a=s.firstFromReferType,o=s.firstFromReferUrl;n&&(e.setSessionItem("firstFromReferUrl",o),e.setSessionItem("firstFromReferType",a)),i.log.xsend(103080,{isFirstFrom:n,firstFromReferType:a,firstFromReferUrl:encodeURIComponent(o)})},getFirstRefer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new p(window.localStorage);return{firstFromReferType:e.getSessionItem("firstFromReferType"),firstFromReferUrl:e.getSessionItem("firstFromReferUrl")}},getFirstFromReferInfo:v};t.default=function(){var e,t,r,f,l,c;0===(null===(e=u.a.state)||void 0===e||null===(t=e.infrastructure)||void 0===t||null===(r=t.resetNewDoc)||void 0===r?void 0:r.count)?(!function(){var e,t=document.createElement("script");t.src="https://hm.baidu.com/hm.js?d8bfb560f8d03bbefc9bdecafc4a4bf6";var r=document.getElementsByTagName("script")[0];null===(e=r.parentNode)||void 0===e||e.insertBefore(t,r)}(),s.$.getScript("https://wappass.baidu.com/static/machine/js/api/mkd.js"),window.__abbaidu_2030_subidgetf=function(){return"wenkupcview"},window.__abbaidu_2030_cb=function(e){var t=s.$.parseJSON(e);n.default.set("bcat",t.data,{path:"/"})},s.$.getScript("https://dlswbr.baidu.com/heicha/mw/abclite-2030-s.js"),null!==(l=u.a.state)&&void 0!==l&&null!==(c=l.userInfo)&&void 0!==c&&c.isLogin&&u.a.dispatch("handleActsBeforeLogin"),window._zoomDetectInst||(window._zoomDetectInst=o.a.run({dynamicDetect:!0,toastOnce:!0}))):i.log.xsend(1e5),function(){var e=(null===u.a||void 0===u.a?void 0:u.a.state)||{},t=e.userInfo,r=e.docInfo;if(null!=t&&t.isLogin){var s,i,n,o=Math.floor((new Date).getTime()/1e3);a.wkAxios.get("/user/interface/jiaoyusession",{params:{source:"pc",action:"set",mark:JSON.stringify((s={},i=null==r?void 0:r.docId,n=o,i in s?Object.defineProperty(s,i,{value:n,enumerable:!0,configurable:!0,writable:!0}):s[i]=n,s))}}).catch((function(e){var t,r;console.log("浏览记录上传失败->".concat((null==e||null===(t=e.status)||void 0===t?void 0:t.code)&&(null==e||null===(r=e.data)||void 0===r?void 0:r.msg)||"网络错误"))}))}}(),u.a.dispatch("trivialBizInfo/setQuery"),null==d||null===(f=d.setFirstRefer)||void 0===f||f.call(d),Object(s.$)(window).trigger("scroll")}}}]);