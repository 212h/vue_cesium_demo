/*! For license information please see 20.0e37f6d0db03b6c9618f.js.LICENSE.txt */
(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{194:function(e,t,r){"use strict";var n=r(284),i=Object.prototype.toString;function o(e){return"[object Array]"===i.call(e)}function a(e){return void 0===e}function s(e){return null!==e&&"object"==typeof e}function c(e){if("[object Object]"!==i.call(e))return!1;var t=Object.getPrototypeOf(e);return null===t||t===Object.prototype}function d(e){return"[object Function]"===i.call(e)}function l(e,t){if(null!=e)if("object"!=typeof e&&(e=[e]),o(e))for(var r=0,n=e.length;r<n;r++)t.call(null,e[r],r,e);else for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.call(null,e[i],i,e)}e.exports={isArray:o,isArrayBuffer:function(e){return"[object ArrayBuffer]"===i.call(e)},isBuffer:function(e){return null!==e&&!a(e)&&null!==e.constructor&&!a(e.constructor)&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)},isFormData:function(e){return"undefined"!=typeof FormData&&e instanceof FormData},isArrayBufferView:function(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&e.buffer instanceof ArrayBuffer},isString:function(e){return"string"==typeof e},isNumber:function(e){return"number"==typeof e},isObject:s,isPlainObject:c,isUndefined:a,isDate:function(e){return"[object Date]"===i.call(e)},isFile:function(e){return"[object File]"===i.call(e)},isBlob:function(e){return"[object Blob]"===i.call(e)},isFunction:d,isStream:function(e){return s(e)&&d(e.pipe)},isURLSearchParams:function(e){return"undefined"!=typeof URLSearchParams&&e instanceof URLSearchParams},isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&("undefined"!=typeof window&&"undefined"!=typeof document)},forEach:l,merge:function e(){var t={};function r(r,n){c(t[n])&&c(r)?t[n]=e(t[n],r):c(r)?t[n]=e({},r):o(r)?t[n]=r.slice():t[n]=r}for(var n=0,i=arguments.length;n<i;n++)l(arguments[n],r);return t},extend:function(e,t,r){return l(t,(function(t,i){e[i]=r&&"function"==typeof t?n(t,r):t})),e},trim:function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")},stripBOM:function(e){return 65279===e.charCodeAt(0)&&(e=e.slice(1)),e}}},215:function(e,t,r){"use strict";(function(t){var n=r(194),i=r(421),o=r(286),a={"Content-Type":"application/x-www-form-urlencoded"};function s(e,t){!n.isUndefined(e)&&n.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}var c,d={transitional:{silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},adapter:(("undefined"!=typeof XMLHttpRequest||void 0!==t&&"[object process]"===Object.prototype.toString.call(t))&&(c=r(287)),c),transformRequest:[function(e,t){return i(t,"Accept"),i(t,"Content-Type"),n.isFormData(e)||n.isArrayBuffer(e)||n.isBuffer(e)||n.isStream(e)||n.isFile(e)||n.isBlob(e)?e:n.isArrayBufferView(e)?e.buffer:n.isURLSearchParams(e)?(s(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):n.isObject(e)||t&&"application/json"===t["Content-Type"]?(s(t,"application/json"),function(e,t,r){if(n.isString(e))try{return(t||JSON.parse)(e),n.trim(e)}catch(e){if("SyntaxError"!==e.name)throw e}return(r||JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){var t=this.transitional,r=t&&t.silentJSONParsing,i=t&&t.forcedJSONParsing,a=!r&&"json"===this.responseType;if(a||i&&n.isString(e)&&e.length)try{return JSON.parse(e)}catch(e){if(a){if("SyntaxError"===e.name)throw o(e,this,"E_JSON_PARSE");throw e}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(e){return e>=200&&e<300}};d.headers={common:{Accept:"application/json, text/plain, */*"}},n.forEach(["delete","get","head"],(function(e){d.headers[e]={}})),n.forEach(["post","put","patch"],(function(e){d.headers[e]=n.merge(a)})),e.exports=d}).call(this,r(263))},284:function(e,t,r){"use strict";e.exports=function(e,t){return function(){for(var r=new Array(arguments.length),n=0;n<r.length;n++)r[n]=arguments[n];return e.apply(t,r)}}},285:function(e,t,r){"use strict";var n=r(194);function i(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}e.exports=function(e,t,r){if(!t)return e;var o;if(r)o=r(t);else if(n.isURLSearchParams(t))o=t.toString();else{var a=[];n.forEach(t,(function(e,t){null!=e&&(n.isArray(e)?t+="[]":e=[e],n.forEach(e,(function(e){n.isDate(e)?e=e.toISOString():n.isObject(e)&&(e=JSON.stringify(e)),a.push(i(t)+"="+i(e))})))})),o=a.join("&")}if(o){var s=e.indexOf("#");-1!==s&&(e=e.slice(0,s)),e+=(-1===e.indexOf("?")?"?":"&")+o}return e}},286:function(e,t,r){"use strict";e.exports=function(e,t,r,n,i){return e.config=t,r&&(e.code=r),e.request=n,e.response=i,e.isAxiosError=!0,e.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},e}},287:function(e,t,r){"use strict";var n=r(194),i=r(422),o=r(423),a=r(285),s=r(424),c=r(427),d=r(428),l=r(288);e.exports=function(e){return new Promise((function(t,r){var u=e.data,h=e.headers,p=e.responseType;n.isFormData(u)&&delete h["Content-Type"];var f=new XMLHttpRequest;if(e.auth){var g=e.auth.username||"",m=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";h.Authorization="Basic "+btoa(g+":"+m)}var v=s(e.baseURL,e.url);function b(){if(f){var n="getAllResponseHeaders"in f?c(f.getAllResponseHeaders()):null,o={data:p&&"text"!==p&&"json"!==p?f.response:f.responseText,status:f.status,statusText:f.statusText,headers:n,config:e,request:f};i(t,r,o),f=null}}if(f.open(e.method.toUpperCase(),a(v,e.params,e.paramsSerializer),!0),f.timeout=e.timeout,"onloadend"in f?f.onloadend=b:f.onreadystatechange=function(){f&&4===f.readyState&&(0!==f.status||f.responseURL&&0===f.responseURL.indexOf("file:"))&&setTimeout(b)},f.onabort=function(){f&&(r(l("Request aborted",e,"ECONNABORTED",f)),f=null)},f.onerror=function(){r(l("Network Error",e,null,f)),f=null},f.ontimeout=function(){var t="timeout of "+e.timeout+"ms exceeded";e.timeoutErrorMessage&&(t=e.timeoutErrorMessage),r(l(t,e,e.transitional&&e.transitional.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",f)),f=null},n.isStandardBrowserEnv()){var k=(e.withCredentials||d(v))&&e.xsrfCookieName?o.read(e.xsrfCookieName):void 0;k&&(h[e.xsrfHeaderName]=k)}"setRequestHeader"in f&&n.forEach(h,(function(e,t){void 0===u&&"content-type"===t.toLowerCase()?delete h[t]:f.setRequestHeader(t,e)})),n.isUndefined(e.withCredentials)||(f.withCredentials=!!e.withCredentials),p&&"json"!==p&&(f.responseType=e.responseType),"function"==typeof e.onDownloadProgress&&f.addEventListener("progress",e.onDownloadProgress),"function"==typeof e.onUploadProgress&&f.upload&&f.upload.addEventListener("progress",e.onUploadProgress),e.cancelToken&&e.cancelToken.promise.then((function(e){f&&(f.abort(),r(e),f=null)})),u||(u=null),f.send(u)}))}},288:function(e,t,r){"use strict";var n=r(286);e.exports=function(e,t,r,i,o){var a=new Error(e);return n(a,t,r,i,o)}},289:function(e,t,r){"use strict";e.exports=function(e){return!(!e||!e.__CANCEL__)}},290:function(e,t,r){"use strict";var n=r(194);e.exports=function(e,t){t=t||{};var r={},i=["url","method","data"],o=["headers","auth","proxy","params"],a=["baseURL","transformRequest","transformResponse","paramsSerializer","timeout","timeoutMessage","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","decompress","maxContentLength","maxBodyLength","maxRedirects","transport","httpAgent","httpsAgent","cancelToken","socketPath","responseEncoding"],s=["validateStatus"];function c(e,t){return n.isPlainObject(e)&&n.isPlainObject(t)?n.merge(e,t):n.isPlainObject(t)?n.merge({},t):n.isArray(t)?t.slice():t}function d(i){n.isUndefined(t[i])?n.isUndefined(e[i])||(r[i]=c(void 0,e[i])):r[i]=c(e[i],t[i])}n.forEach(i,(function(e){n.isUndefined(t[e])||(r[e]=c(void 0,t[e]))})),n.forEach(o,d),n.forEach(a,(function(i){n.isUndefined(t[i])?n.isUndefined(e[i])||(r[i]=c(void 0,e[i])):r[i]=c(void 0,t[i])})),n.forEach(s,(function(n){n in t?r[n]=c(e[n],t[n]):n in e&&(r[n]=c(void 0,e[n]))}));var l=i.concat(o).concat(a).concat(s),u=Object.keys(e).concat(Object.keys(t)).filter((function(e){return-1===l.indexOf(e)}));return n.forEach(u,d),r}},291:function(e,t,r){"use strict";function n(e){this.message=e}n.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},n.prototype.__CANCEL__=!0,e.exports=n},292:function(e,t,r){},293:function(e,t,r){},294:function(e,t,r){},415:function(e,t,r){e.exports=r(416)},416:function(e,t,r){"use strict";var n=r(194),i=r(284),o=r(417),a=r(290);function s(e){var t=new o(e),r=i(o.prototype.request,t);return n.extend(r,o.prototype,t),n.extend(r,t),r}var c=s(r(215));c.Axios=o,c.create=function(e){return s(a(c.defaults,e))},c.Cancel=r(291),c.CancelToken=r(431),c.isCancel=r(289),c.all=function(e){return Promise.all(e)},c.spread=r(432),c.isAxiosError=r(433),e.exports=c,e.exports.default=c},417:function(e,t,r){"use strict";var n=r(194),i=r(285),o=r(418),a=r(419),s=r(290),c=r(429),d=c.validators;function l(e){this.defaults=e,this.interceptors={request:new o,response:new o}}l.prototype.request=function(e){"string"==typeof e?(e=arguments[1]||{}).url=arguments[0]:e=e||{},(e=s(this.defaults,e)).method?e.method=e.method.toLowerCase():this.defaults.method?e.method=this.defaults.method.toLowerCase():e.method="get";var t=e.transitional;void 0!==t&&c.assertOptions(t,{silentJSONParsing:d.transitional(d.boolean,"1.0.0"),forcedJSONParsing:d.transitional(d.boolean,"1.0.0"),clarifyTimeoutError:d.transitional(d.boolean,"1.0.0")},!1);var r=[],n=!0;this.interceptors.request.forEach((function(t){"function"==typeof t.runWhen&&!1===t.runWhen(e)||(n=n&&t.synchronous,r.unshift(t.fulfilled,t.rejected))}));var i,o=[];if(this.interceptors.response.forEach((function(e){o.push(e.fulfilled,e.rejected)})),!n){var l=[a,void 0];for(Array.prototype.unshift.apply(l,r),l=l.concat(o),i=Promise.resolve(e);l.length;)i=i.then(l.shift(),l.shift());return i}for(var u=e;r.length;){var h=r.shift(),p=r.shift();try{u=h(u)}catch(e){p(e);break}}try{i=a(u)}catch(e){return Promise.reject(e)}for(;o.length;)i=i.then(o.shift(),o.shift());return i},l.prototype.getUri=function(e){return e=s(this.defaults,e),i(e.url,e.params,e.paramsSerializer).replace(/^\?/,"")},n.forEach(["delete","get","head","options"],(function(e){l.prototype[e]=function(t,r){return this.request(s(r||{},{method:e,url:t,data:(r||{}).data}))}})),n.forEach(["post","put","patch"],(function(e){l.prototype[e]=function(t,r,n){return this.request(s(n||{},{method:e,url:t,data:r}))}})),e.exports=l},418:function(e,t,r){"use strict";var n=r(194);function i(){this.handlers=[]}i.prototype.use=function(e,t,r){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!r&&r.synchronous,runWhen:r?r.runWhen:null}),this.handlers.length-1},i.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},i.prototype.forEach=function(e){n.forEach(this.handlers,(function(t){null!==t&&e(t)}))},e.exports=i},419:function(e,t,r){"use strict";var n=r(194),i=r(420),o=r(289),a=r(215);function s(e){e.cancelToken&&e.cancelToken.throwIfRequested()}e.exports=function(e){return s(e),e.headers=e.headers||{},e.data=i.call(e,e.data,e.headers,e.transformRequest),e.headers=n.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),n.forEach(["delete","get","head","post","put","patch","common"],(function(t){delete e.headers[t]})),(e.adapter||a.adapter)(e).then((function(t){return s(e),t.data=i.call(e,t.data,t.headers,e.transformResponse),t}),(function(t){return o(t)||(s(e),t&&t.response&&(t.response.data=i.call(e,t.response.data,t.response.headers,e.transformResponse))),Promise.reject(t)}))}},420:function(e,t,r){"use strict";var n=r(194),i=r(215);e.exports=function(e,t,r){var o=this||i;return n.forEach(r,(function(r){e=r.call(o,e,t)})),e}},421:function(e,t,r){"use strict";var n=r(194);e.exports=function(e,t){n.forEach(e,(function(r,n){n!==t&&n.toUpperCase()===t.toUpperCase()&&(e[t]=r,delete e[n])}))}},422:function(e,t,r){"use strict";var n=r(288);e.exports=function(e,t,r){var i=r.config.validateStatus;r.status&&i&&!i(r.status)?t(n("Request failed with status code "+r.status,r.config,null,r.request,r)):e(r)}},423:function(e,t,r){"use strict";var n=r(194);e.exports=n.isStandardBrowserEnv()?{write:function(e,t,r,i,o,a){var s=[];s.push(e+"="+encodeURIComponent(t)),n.isNumber(r)&&s.push("expires="+new Date(r).toGMTString()),n.isString(i)&&s.push("path="+i),n.isString(o)&&s.push("domain="+o),!0===a&&s.push("secure"),document.cookie=s.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}},424:function(e,t,r){"use strict";var n=r(425),i=r(426);e.exports=function(e,t){return e&&!n(t)?i(e,t):t}},425:function(e,t,r){"use strict";e.exports=function(e){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(e)}},426:function(e,t,r){"use strict";e.exports=function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}},427:function(e,t,r){"use strict";var n=r(194),i=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];e.exports=function(e){var t,r,o,a={};return e?(n.forEach(e.split("\n"),(function(e){if(o=e.indexOf(":"),t=n.trim(e.substr(0,o)).toLowerCase(),r=n.trim(e.substr(o+1)),t){if(a[t]&&i.indexOf(t)>=0)return;a[t]="set-cookie"===t?(a[t]?a[t]:[]).concat([r]):a[t]?a[t]+", "+r:r}})),a):a}},428:function(e,t,r){"use strict";var n=r(194);e.exports=n.isStandardBrowserEnv()?function(){var e,t=/(msie|trident)/i.test(navigator.userAgent),r=document.createElement("a");function i(e){var n=e;return t&&(r.setAttribute("href",n),n=r.href),r.setAttribute("href",n),{href:r.href,protocol:r.protocol?r.protocol.replace(/:$/,""):"",host:r.host,search:r.search?r.search.replace(/^\?/,""):"",hash:r.hash?r.hash.replace(/^#/,""):"",hostname:r.hostname,port:r.port,pathname:"/"===r.pathname.charAt(0)?r.pathname:"/"+r.pathname}}return e=i(window.location.href),function(t){var r=n.isString(t)?i(t):t;return r.protocol===e.protocol&&r.host===e.host}}():function(){return!0}},429:function(e,t,r){"use strict";var n=r(430),i={};["object","boolean","number","function","string","symbol"].forEach((function(e,t){i[e]=function(r){return typeof r===e||"a"+(t<1?"n ":" ")+e}}));var o={},a=n.version.split(".");function s(e,t){for(var r=t?t.split("."):a,n=e.split("."),i=0;i<3;i++){if(r[i]>n[i])return!0;if(r[i]<n[i])return!1}return!1}i.transitional=function(e,t,r){var i=t&&s(t);function a(e,t){return"[Axios v"+n.version+"] Transitional option '"+e+"'"+t+(r?". "+r:"")}return function(r,n,s){if(!1===e)throw new Error(a(n," has been removed in "+t));return i&&!o[n]&&(o[n]=!0,console.warn(a(n," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(r,n,s)}},e.exports={isOlderVersion:s,assertOptions:function(e,t,r){if("object"!=typeof e)throw new TypeError("options must be an object");for(var n=Object.keys(e),i=n.length;i-- >0;){var o=n[i],a=t[o];if(a){var s=e[o],c=void 0===s||a(s,o,e);if(!0!==c)throw new TypeError("option "+o+" must be "+c)}else if(!0!==r)throw Error("Unknown option "+o)}},validators:i}},430:function(e){e.exports=JSON.parse('{"_args":[["axios@0.21.4","/root/ONLINE_SERVICE/other/ferry/task_workspace/baidu/wenku/nd-pc-view"]],"_from":"axios@0.21.4","_id":"axios@0.21.4","_inBundle":false,"_integrity":"sha512-ut5vewkiu8jjGBdqpM44XxjuCjq9LAKeHVmoVfHVzy8eHgxxq8SbAVQNovDA8mVi05kP0Ea/n/UzcSHcTJQfNg==","_location":"/@baidu/orion-creader/axios","_phantomChildren":{},"_requested":{"type":"version","registry":true,"raw":"axios@0.21.4","name":"axios","escapedName":"axios","rawSpec":"0.21.4","saveSpec":null,"fetchSpec":"0.21.4"},"_requiredBy":["/@baidu/orion-creader"],"_resolved":"http://registry.npm.baidu-int.com/axios/-/axios-0.21.4.tgz","_spec":"0.21.4","_where":"/root/ONLINE_SERVICE/other/ferry/task_workspace/baidu/wenku/nd-pc-view","author":{"name":"Matt Zabriskie"},"browser":{"./lib/adapters/http.js":"./lib/adapters/xhr.js"},"bugs":{"url":"https://github.com/axios/axios/issues"},"bundlesize":[{"path":"./dist/axios.min.js","threshold":"5kB"}],"dependencies":{"follow-redirects":"^1.14.0"},"description":"Promise based HTTP client for the browser and node.js","devDependencies":{"coveralls":"^3.0.0","es6-promise":"^4.2.4","grunt":"^1.3.0","grunt-banner":"^0.6.0","grunt-cli":"^1.2.0","grunt-contrib-clean":"^1.1.0","grunt-contrib-watch":"^1.0.0","grunt-eslint":"^23.0.0","grunt-karma":"^4.0.0","grunt-mocha-test":"^0.13.3","grunt-ts":"^6.0.0-beta.19","grunt-webpack":"^4.0.2","istanbul-instrumenter-loader":"^1.0.0","jasmine-core":"^2.4.1","karma":"^6.3.2","karma-chrome-launcher":"^3.1.0","karma-firefox-launcher":"^2.1.0","karma-jasmine":"^1.1.1","karma-jasmine-ajax":"^0.1.13","karma-safari-launcher":"^1.0.0","karma-sauce-launcher":"^4.3.6","karma-sinon":"^1.0.5","karma-sourcemap-loader":"^0.3.8","karma-webpack":"^4.0.2","load-grunt-tasks":"^3.5.2","minimist":"^1.2.0","mocha":"^8.2.1","sinon":"^4.5.0","terser-webpack-plugin":"^4.2.3","typescript":"^4.0.5","url-search-params":"^0.10.0","webpack":"^4.44.2","webpack-dev-server":"^3.11.0"},"homepage":"https://axios-http.com","jsdelivr":"dist/axios.min.js","keywords":["xhr","http","ajax","promise","node"],"license":"MIT","main":"index.js","name":"axios","repository":{"type":"git","url":"git+https://github.com/axios/axios.git"},"scripts":{"build":"NODE_ENV=production grunt build","coveralls":"cat coverage/lcov.info | ./node_modules/coveralls/bin/coveralls.js","examples":"node ./examples/server.js","fix":"eslint --fix lib/**/*.js","postversion":"git push && git push --tags","preversion":"npm test","start":"node ./sandbox/server.js","test":"grunt test","version":"npm run build && grunt version && git add -A dist && git add CHANGELOG.md bower.json package.json"},"typings":"./index.d.ts","unpkg":"dist/axios.min.js","version":"0.21.4"}')},431:function(e,t,r){"use strict";var n=r(291);function i(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");var t;this.promise=new Promise((function(e){t=e}));var r=this;e((function(e){r.reason||(r.reason=new n(e),t(r.reason))}))}i.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},i.source=function(){var e;return{token:new i((function(t){e=t})),cancel:e}},e.exports=i},432:function(e,t,r){"use strict";e.exports=function(e){return function(t){return e.apply(null,t)}}},433:function(e,t,r){"use strict";e.exports=function(e){return"object"==typeof e&&!0===e.isAxiosError}},434:function(e,t,r){!function(){function t(e,t){document.addEventListener?e.addEventListener("scroll",t,!1):e.attachEvent("scroll",t)}function r(e){this.g=document.createElement("div"),this.g.setAttribute("aria-hidden","true"),this.g.appendChild(document.createTextNode(e)),this.h=document.createElement("span"),this.i=document.createElement("span"),this.m=document.createElement("span"),this.j=document.createElement("span"),this.l=-1,this.h.style.cssText="max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;",this.i.style.cssText="max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;",this.j.style.cssText="max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;",this.m.style.cssText="display:inline-block;width:200%;height:200%;font-size:16px;max-width:none;",this.h.appendChild(this.m),this.i.appendChild(this.j),this.g.appendChild(this.h),this.g.appendChild(this.i)}function n(e,t){e.g.style.cssText="max-width:none;min-width:20px;min-height:20px;display:inline-block;overflow:hidden;position:absolute;width:auto;margin:0;padding:0;top:-999px;white-space:nowrap;font-synthesis:none;font:"+t+";"}function i(e){var t=e.g.offsetWidth,r=t+100;return e.j.style.width=r+"px",e.i.scrollLeft=r,e.h.scrollLeft=e.h.scrollWidth+100,e.l!==t&&(e.l=t,!0)}function o(e,r){function n(){var e=o;i(e)&&null!==e.g.parentNode&&r(e.l)}var o=e;t(e.h,n),t(e.i,n),i(e)}function a(e,t,r){t=t||{},r=r||window,this.family=e,this.style=t.style||"normal",this.weight=t.weight||"normal",this.stretch=t.stretch||"normal",this.context=r}var s=null,c=null,d=null,l=null;function u(e){return null===l&&(l=!!e.document.fonts),l}function h(e,t){var r=e.style,n=e.weight;if(null===d){var i=document.createElement("div");try{i.style.font="condensed 100px sans-serif"}catch(e){}d=""!==i.style.font}return[r,n,d?e.stretch:"","100px",t].join(" ")}a.prototype.load=function(e,t){var i=this,a=e||"BESbswy",d=0,l=t||3e3,p=(new Date).getTime();return new Promise((function(e,t){if(u(i.context)&&!function(e){return null===c&&(u(e)&&/Apple/.test(window.navigator.vendor)?(e=/AppleWebKit\/([0-9]+)(?:\.([0-9]+))(?:\.([0-9]+))/.exec(window.navigator.userAgent),c=!!e&&603>parseInt(e[1],10)):c=!1),c}(i.context)){var f=new Promise((function(e,t){!function r(){(new Date).getTime()-p>=l?t(Error(l+"ms timeout exceeded")):i.context.document.fonts.load(h(i,'"'+i.family+'"'),a).then((function(t){1<=t.length?e():setTimeout(r,25)}),t)}()})),g=new Promise((function(e,t){d=setTimeout((function(){t(Error(l+"ms timeout exceeded"))}),l)}));Promise.race([g,f]).then((function(){clearTimeout(d),e(i)}),t)}else!function(e){document.body?e():document.addEventListener?document.addEventListener("DOMContentLoaded",(function t(){document.removeEventListener("DOMContentLoaded",t),e()})):document.attachEvent("onreadystatechange",(function t(){"interactive"!=document.readyState&&"complete"!=document.readyState||(document.detachEvent("onreadystatechange",t),e())}))}((function(){function c(){var t;(t=-1!=m&&-1!=v||-1!=m&&-1!=b||-1!=v&&-1!=b)&&((t=m!=v&&m!=b&&v!=b)||(null===s&&(t=/AppleWebKit\/([0-9]+)(?:\.([0-9]+))/.exec(window.navigator.userAgent),s=!!t&&(536>parseInt(t[1],10)||536===parseInt(t[1],10)&&11>=parseInt(t[2],10))),t=s&&(m==k&&v==k&&b==k||m==w&&v==w&&b==w||m==x&&v==x&&b==x)),t=!t),t&&(null!==y.parentNode&&y.parentNode.removeChild(y),clearTimeout(d),e(i))}var u=new r(a),f=new r(a),g=new r(a),m=-1,v=-1,b=-1,k=-1,w=-1,x=-1,y=document.createElement("div");y.dir="ltr",n(u,h(i,"sans-serif")),n(f,h(i,"serif")),n(g,h(i,"monospace")),y.appendChild(u.g),y.appendChild(f.g),y.appendChild(g.g),i.context.document.body.appendChild(y),k=u.g.offsetWidth,w=f.g.offsetWidth,x=g.g.offsetWidth,function e(){if((new Date).getTime()-p>=l)null!==y.parentNode&&y.parentNode.removeChild(y),t(Error(l+"ms timeout exceeded"));else{var r=i.context.document.hidden;!0!==r&&void 0!==r||(m=u.g.offsetWidth,v=f.g.offsetWidth,b=g.g.offsetWidth,c()),d=setTimeout(e,50)}}(),o(u,(function(e){m=e,c()})),n(u,h(i,'"'+i.family+'",sans-serif')),o(f,(function(e){v=e,c()})),n(f,h(i,'"'+i.family+'",serif')),o(g,(function(e){b=e,c()})),n(g,h(i,'"'+i.family+'",monospace'))}))}))},e.exports=a}()},435:function(e,t,r){var n=r(436);n.__esModule&&(n=n.default),"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);(0,r(40).default)("7ed32706",n,!0,{})},436:function(e,t,r){(t=r(39)(!1)).push([e.i,'.creader-fold{position:absolute;bottom:0;left:0;right:0;z-index:200;width:100%;text-align:center;box-sizing:border-box;background-image:linear-gradient(90deg,#fff,rgba(255,255,255,.99),rgba(255,255,255,.95),rgba(255,255,255,0));background-image:-webkit-linear-gradient(90deg,#fff,rgba(255,255,255,.99),rgba(255,255,255,.95),rgba(255,255,255,0));background-color:#fff 0}@media screen and (-ms-high-contrast:active),(-ms-high-contrast:none){.creader-fold{background-image:linear-gradient(0deg,#fff,rgba(255,255,255,.99),rgba(255,255,255,.95),rgba(255,255,255,0))}}.creader-fold__content{padding-top:158px;margin-bottom:60px}.creader-fold__text{cursor:pointer;font-size:16px;line-height:36px;margin-top:15px;color:#222}.creader-fold__read-all{color:#22ab82;padding-right:18px;background-repeat:no-repeat;background-image:url(https://edu-wenku.bdimg.com/v1/wkSmallApp/pc/arrow-1635842480553.svg);background-position:100% 50%}.creader-fold__read-all:hover{color:#1c9f78}\n/*!\n * froala_editor v2.8.1 (https://www.froala.com/wysiwyg-editor)\n * License https://froala.com/wysiwyg-editor/terms/\n * Copyright 2014-2018 Froala Labs\n */.clearfix::after{clear:both;display:block;content:"";height:0}.hide-by-clipping{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);border:0}.fr-img-caption.fr-rounded img,img.fr-rounded{-webkit-border-radius:10px;-moz-border-radius:10px;border-radius:10px;-webkit-background-clip:padding-box;-moz-background-clip:padding;background-clip:padding-box}.fr-img-caption.fr-bordered img,img.fr-bordered{border:solid 5px #ccc}img.fr-bordered{-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box}.fr-img-caption.fr-bordered img{-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box}.fr-img-caption.fr-shadow img,img.fr-shadow{-webkit-box-shadow:0 1px 3px rgba(0,0,0,.12),0 1px 1px 1px rgba(0,0,0,.16);-moz-box-shadow:0 1px 3px rgba(0,0,0,.12),0 1px 1px 1px rgba(0,0,0,.16);box-shadow:0 1px 3px rgba(0,0,0,.12),0 1px 1px 1px rgba(0,0,0,.16)}.fr-view span[style~="color:"] a{color:inherit}.fr-view table{border:0;border-collapse:collapse;empty-cells:show;max-width:100%;table-layout:fixed}.fr-view table td{min-width:5px}.fr-view table.fr-dashed-borders td,.fr-view table.fr-dashed-borders th{border-style:dashed}.fr-view table.fr-alternate-rows tbody tr:nth-child(2n){background:#f4f4f4}.fr-view table td,.fr-view table th{border:1px solid #ddd}.fr-view table td:empty,.fr-view table th:empty{height:20px}.fr-view table td.fr-highlighted,.fr-view table th.fr-highlighted{border:1px double red}.fr-view table td.fr-thick,.fr-view table th.fr-thick{border-width:2px}.fr-view table th{background:#e6e6e6}.fr-view hr{clear:both;-webkit-user-select:none;-khtml-user-select:none;-moz-user-select:none;-ms-user-select:none;-o-user-select:none;user-select:none;page-break-after:always}.fr-view .fr-file{position:relative}.fr-view .fr-file::after{position:relative;content:"\\1F4CE";font-weight:400}.fr-view pre{white-space:pre-wrap;word-wrap:break-word;overflow:visible}.fr-view[dir=rtl] blockquote{border-left:0;border-right:solid 2px #5e35b1;margin-right:0;padding-right:5px;padding-left:0}.fr-view[dir=rtl] blockquote blockquote{border-color:#00bcd4}.fr-view[dir=rtl] blockquote blockquote blockquote{border-color:#43a047}.fr-view blockquote{border-left:solid 2px #5e35b1;margin-left:0;padding-left:5px;color:#5e35b1}.fr-view blockquote blockquote{border-color:#00bcd4;color:#00bcd4}.fr-view blockquote blockquote blockquote{border-color:#43a047;color:#43a047}.fr-view span.fr-emoticon{font-weight:400;font-family:"Apple Color Emoji","Segoe UI Emoji",NotoColorEmoji,"Segoe UI Symbol","Android Emoji",EmojiSymbols;display:inline;line-height:0}.fr-view span.fr-emoticon.fr-emoticon-img{background-repeat:no-repeat!important;font-size:inherit;height:1em;width:1em;min-height:20px;min-width:20px;display:inline-block;margin:-.1em .1em .1em;line-height:1;vertical-align:middle}.fr-view .fr-text-gray{color:#aaa!important}.fr-view .fr-text-bordered{border-top:solid 1px #222;border-bottom:solid 1px #222;padding:10px 0}.fr-view .fr-text-spaced{letter-spacing:1px}.fr-view .fr-text-uppercase{text-transform:uppercase}.fr-view img{position:relative;max-width:100%}.fr-view img.fr-dib{margin:5px auto;display:block;float:none;vertical-align:top}.fr-view img.fr-dib.fr-fil{margin-left:0;text-align:left}.fr-view img.fr-dib.fr-fir{margin-right:0;text-align:right}.fr-view img.fr-dii{display:inline-block;float:none;vertical-align:bottom;margin-left:5px;margin-right:5px;max-width:calc(100% - (2 * 5px))}.fr-view img.fr-dii.fr-fil{float:left;margin:5px 5px 5px 0;max-width:calc(100% - 5px)}.fr-view img.fr-dii.fr-fir{float:right;margin:5px 0 5px 5px;max-width:calc(100% - 5px)}.fr-view span.fr-img-caption{position:relative;max-width:100%}.fr-view span.fr-img-caption.fr-dib{margin:5px auto;display:block;float:none;vertical-align:top}.fr-view span.fr-img-caption.fr-dib.fr-fil{margin-left:0;text-align:left}.fr-view span.fr-img-caption.fr-dib.fr-fir{margin-right:0;text-align:right}.fr-view span.fr-img-caption.fr-dii{display:inline-block;float:none;vertical-align:bottom;margin-left:5px;margin-right:5px;max-width:calc(100% - (2 * 5px))}.fr-view span.fr-img-caption.fr-dii.fr-fil{float:left;margin:5px 5px 5px 0;max-width:calc(100% - 5px)}.fr-view span.fr-img-caption.fr-dii.fr-fir{float:right;margin:5px 0 5px 5px;max-width:calc(100% - 5px)}.fr-view .fr-video{text-align:center;position:relative}.fr-view .fr-video>*{-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;max-width:100%;border:0}.fr-view .fr-video.fr-dvb{display:block;clear:both}.fr-view .fr-video.fr-dvb.fr-fvl{text-align:left}.fr-view .fr-video.fr-dvb.fr-fvr{text-align:right}.fr-view .fr-video.fr-dvi{display:inline-block}.fr-view .fr-video.fr-dvi.fr-fvl{float:left}.fr-view .fr-video.fr-dvi.fr-fvr{float:right}.fr-view a.fr-strong{font-weight:700}.fr-view a.fr-green{color:green}.fr-view .fr-img-caption{text-align:center}.fr-view .fr-img-caption .fr-img-wrap{padding:0;display:inline-block;margin:auto;text-align:center;width:100%}.fr-view .fr-img-caption .fr-img-wrap img{display:block;margin:auto;width:100%}.fr-view .fr-img-caption .fr-img-wrap>span{margin:auto;display:block;padding:5px 5px 10px;font-size:14px;font-weight:initial;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;-webkit-opacity:.9;-moz-opacity:.9;opacity:.9;-ms-filter:"alpha(Opacity=0)";width:100%;text-align:center}.fr-view button.fr-rounded,.fr-view input.fr-rounded,.fr-view textarea.fr-rounded{-webkit-border-radius:10px;-moz-border-radius:10px;border-radius:10px;-webkit-background-clip:padding-box;-moz-background-clip:padding;background-clip:padding-box}.fr-view button.fr-large,.fr-view input.fr-large,.fr-view textarea.fr-large{font-size:24px}a.fr-view.fr-strong{font-weight:700}a.fr-view.fr-green{color:green}img.fr-view{position:relative;max-width:100%}img.fr-view.fr-dib{margin:5px auto;display:block;float:none;vertical-align:top}img.fr-view.fr-dib.fr-fil{margin-left:0;text-align:left}img.fr-view.fr-dib.fr-fir{margin-right:0;text-align:right}img.fr-view.fr-dii{display:inline-block;float:none;vertical-align:bottom;margin-left:5px;margin-right:5px;max-width:calc(100% - (2 * 5px))}img.fr-view.fr-dii.fr-fil{float:left;margin:5px 5px 5px 0;max-width:calc(100% - 5px)}img.fr-view.fr-dii.fr-fir{float:right;margin:5px 0 5px 5px;max-width:calc(100% - 5px)}span.fr-img-caption.fr-view{position:relative;max-width:100%}span.fr-img-caption.fr-view.fr-dib{margin:5px auto;display:block;float:none;vertical-align:top}span.fr-img-caption.fr-view.fr-dib.fr-fil{margin-left:0;text-align:left}span.fr-img-caption.fr-view.fr-dib.fr-fir{margin-right:0;text-align:right}span.fr-img-caption.fr-view.fr-dii{display:inline-block;float:none;vertical-align:bottom;margin-left:5px;margin-right:5px;max-width:calc(100% - (2 * 5px))}span.fr-img-caption.fr-view.fr-dii.fr-fil{float:left;margin:5px 5px 5px 0;max-width:calc(100% - 5px)}span.fr-img-caption.fr-view.fr-dii.fr-fir{float:right;margin:5px 0 5px 5px;max-width:calc(100% - 5px)}.fr-view{padding:60px 20px 20px;font-size:16px}.fr-view h1,.fr-view h2,.fr-view h3,.fr-view li,.fr-view ol,.fr-view p,.fr-view ul{margin:6px 0}.fr-view ul{list-style:disc;padding-left:40px}.fr-view ol{list-style:decimal;padding-left:40px}.fr-view em{font-weight:inherit}.fr-view strong{font-style:inherit;font-weight:700}.fr-view h1{font-size:22px;color:#000;font-weight:700}.fr-view h2{font-size:20px;color:#000;font-weight:700}.fr-view h3{font-size:18px;color:#000;font-weight:700}\n@-moz-keyframes EpubLineLoading{0%{background-position:0 75%}50%{background-position:100% 25%}to{background-position:0 75%}}@-webkit-keyframes EpubLineLoading{0%{background-position:0 75%}50%{background-position:100% 25%}to{background-position:0 75%}}@-o-keyframes EpubLineLoading{0%{background-position:0 75%}50%{background-position:100% 25%}to{background-position:0 75%}}@keyframes EpubLineLoading{0%{background-position:0 75%}50%{background-position:100% 25%}to{background-position:0 75%}}.creader-pageloading-wrap{position:absolute;left:0;top:0;right:0;bottom:0;box-sizing:border-box;padding:54px;overflow:hidden;background-color:#fff}.creader-pageloading-wrap .loader-block{box-sizing:border-box;overflow:hidden;margin:8px 0;width:100%;height:22px;animation:EpubLineLoading 2s ease infinite;background:linear-gradient(90deg,#fbfbfb,#f5f5f5,#fbfbfb);background-size:200% 200%}.creader-pageloading-wrap .loader-block .title-block{margin:8px auto;width:207px}.creader-pageloading-wrap .ppt-container{background-color:#ededed;position:absolute;left:0;top:0;right:0;bottom:0}.creader-pageloading-wrap .ppt-container .logo{position:absolute;width:133px;height:44px;top:50%;left:50%;transform:translate(-50%,-50%)}\n.creader-root{position:relative;margin:0 auto;padding:0;text-align:left}.creader-decview{height:1px;margin:0 auto}.creader-root .pageNo{display:inline-block;position:relative;border-radius:8px;font-size:0;background-color:#fff;margin:0 auto;cursor:text}.creader-canvas{position:relative;top:0;left:0;right:0;bottom:0;box-sizing:border-box}.creader-error{display:flex;flex-direction:column;align-items:center;cursor:pointer;position:absolute;top:0;left:0;right:0;bottom:0}.creader-error__text{color:#999;font-size:18px}.creader-error__image{width:80px;height:80px;margin:160px auto 10px;background-repeat:no-repeat;background-image:url(https://edu-wenku.bdimg.com/v1/wkSmallApp/pc/network_error-1635842434571.png);background-position:0 0;background-size:100% 100%;opacity:.2}.creader-interative-canvas,.creader-interative-div,.creader-keyword-canvas{position:absolute;top:0;left:0;right:0;bottom:0}#creader-view{position:relative;display:inline-block;margin:20px auto;border-radius:8px}.canvas-container{position:absolute!important;top:0;right:0;bottom:0;left:0}.watermark-container{position:relative;padding-bottom:100px;top:10px}.watermark-text{text-align:right;font-size:16px;white-space:nowrap;overflow:hidden}.watermark-img{position:absolute;margin-top:4px;width:70px;right:0}',""]),e.exports=t},437:function(e,t,r){"use strict";r(292)},438:function(e,t,r){"use strict";r(293)},439:function(e,t,r){"use strict";r(294)},478:function(e,t,r){"use strict";r.r(t);var n=r(415),i=r.n(n),o=r(434),a=r.n(o);function s(e,t,r,n){var i,o=!1,a=0;function s(){i&&clearTimeout(i)}function c(){for(var c=arguments.length,d=new Array(c),l=0;l<c;l++)d[l]=arguments[l];var u=this,h=Date.now()-a;function p(){a=Date.now(),r.apply(u,d)}function f(){i=void 0}o||(n&&!i&&p(),s(),void 0===n&&h>e?p():!0!==t&&(i=setTimeout(n?f:p,void 0===n?e-h:e)))}return"boolean"!=typeof t&&(n=r,r=t,t=void 0),c.cancel=function(){s(),o=!0},c}var c=function(e,t){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)};function d(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}c(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}var l,u,h,p,f,g=function(){return(g=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function m(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function v(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,o=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(n=o.next()).done;)a.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return a}function b(e,t){for(var r=0,n=t.length,i=e.length;r<n;r++,i++)e[i]=t[r];return e}!function(e){e.None="none",e.Scroll="scroll",e.Fold="fold"}(l||(l={})),function(e){e.ndocview="/ndocview/readerinfo",e.readerInfo2019="/browse/interface/getdocreader2019",e.docdimension="/optimus/docdimension/getdocreaderoptimus"}(u||(u={})),function(e){e.Canvas="canvas",e.SVG="svg",e.HTML="html"}(h||(h={})),function(e){e.Viewport="vierport",e.UnDestroy="unDestroy"}(p||(p={})),function(e){e.VSignalPage="signalPage",e.VDoublePage="doublePage"}(f||(f={}));var k="https://wkretype.bdimg.com/retype",w={startPage:1,pptStartPage:0,loadMoreType:l.Scroll,width:0,dpr:Math.max(window.devicePixelRatio||1,1.6),renderInfoRn:50,foldOpenCount:2,lazyLoadEnable:!0,pageInfoWidth:0,useProxy:!1,textSelectEnable:!1,firstPageTopPadding:40,renderMode:h.Canvas,viewerMode:f.VSignalPage,keywordEnable:!1,keywordInfo:{color:"#22ab82",backgroundColor:"",underlineColor:"#22ab82",keywordList:[]},foldCanOpen:!0,renderFlow:p.Viewport},x=0;function y(){return!(!window.ActiveXObject&&!("ActiveXObject"in window))}function P(){if(0!==x)return x;if("Chrome"!==(e=navigator.userAgent,t="",y()?t="Internet Explorer":/Safari/.exec(e)&&!/Chrome/.exec(e)?t="Safari":/(?:Chrome|CrMo|CriOS)\/([0-9.]*)/.exec(e)?t="Chrome":/Firefox|Namoroka|Shiretoko|Minefield/.exec(e)&&(t="Firefox"),t))return x=-1;var e,t,r=navigator.appVersion,n=r.indexOf("Chrome/"),i=r.substring(n+7),o=i.indexOf("."),a=i.substring(0,o);return x=+a}var I,T,C,S=function(){function e(e){var t=this;this.timeout=2e3,this.target=document.getElementsByTagName("script")[0]||document.head,this.url=e.url,this.callback=e.callback,this.callbackId=e.callbackId,e.timeout&&e.timeout>0&&(this.timeout=e.timeout),window.__CRjsonpRequestMap||(window.__CRjsonpRequestMap=new Map);var r=window.__CRjsonpRequestMap,n=r.get(this.callbackId);n||(n=[]),n.push(this),r.set(this.callbackId,n),window[this.callbackId]||(window[this.callbackId]=function(e){var n=r.get(t.callbackId),i=null==n?void 0:n.shift();null==i||i.handleResData(e)},this.doRequest())}return e.prototype.handleResData=function(e){this.callback(e),this.sendNextRequest()},e.prototype.sendNextRequest=function(){var e=window.__CRjsonpRequestMap;if(e&&e.has(this.callbackId)){var t=e.get(this.callbackId);if(0===(null==t?void 0:t.length))e.delete(this.callbackId),this.cleanup();else{var r=null==t?void 0:t[0];null==r||r.doRequest()}}else this.cleanup()},e.prototype.doRequest=function(){var e,t,r,n=document.createElement("script");n.src=this.url,P()>104&&(null===(t=null===(e=this.url)||void 0===e?void 0:e.includes)||void 0===t?void 0:t.call(e,"//wkbjcloudbos.bdimg.com"))&&(n.crossOrigin="anonymous"),null===(r=this.target.parentNode)||void 0===r||r.insertBefore(n,this.target),this.requestScript=n,this.timer=setTimeout((function(){}),this.timeout)},e.prototype.cleanup=function(){var e;this.requestScript&&(null===(e=this.requestScript.parentNode)||void 0===e||e.removeChild(this.requestScript),this.requestScript=null),this.timer&&(clearTimeout(this.timer),this.timer=void 0),window[this.callbackId]=void 0},e}(),E=["onabort","onactivate","onafterprint","onafterupdate","onanimationend","onanimationiteration","onanimationstart","onautocomplete","onautocompleteerror","onbeforeactivate","onbeforecopy","onbeforecut","onbeforedeactivate","onbeforeeditfocus","onbeforepaste","onbeforeprint","onbeforeunload","onbeforeupdate","onbegin","onblur","onbounce","oncancel","oncanplay","oncanplaythrough","oncellchange","onchange","onclick","onclose","oncompassneedscalibration","oncontextmenu","oncontrolselect","oncopy","oncuechange","oncut","ondataavailable","ondatasetchanged","ondatasetcomplete","ondblclick","ondeactivate","ondevicelight","ondevicemotion","ondeviceorientation","ondeviceproximity","ondrag","ondragdrop","ondragend","ondragenter","ondragexit","ondragleave","ondragover","ondragstart","ondrop","ondurationchange","onemptied","onend","onended","onerror","onerrorupdate","onexit","onfilterchange","onfinish","onfocus","onfocusin","onfocusout","onformchange ","onforminput ","ongesturechange","ongestureend","ongesturestart","onhashchange","onhelp","oninput","oninvalid","onkeydown","onkeypress","onkeyup","onlanguagechange","onlayoutcomplete","onload","onloadeddata","onloadedmetadata","onloadstart","onlosecapture","onmediacomplete","onmediaerror","onmessage","onmousedown","onmouseenter","onmouseleave","onmousemove","onmouseout","onmouseover","onmouseup","onmousewheel","onmove","onmoveend","onmovestart","onmozfullscreenchange","onmozfullscreenerror","onmozpointerlockchange","onmozpointerlockerror","onmsgesturechange","onmsgesturedoubletap","onmsgesturehold","onmsgesturerestart","onmsinertiastart","onmspointercancel","onmspointerdown","onmspointerenter","onmspointerhover","onmspointerleave","onmspointermove","onmspointerout","onmspointerover","onmspointerup","onoffline","ononline","onorientationchange","onoutofsync","onpagehide","onpageshow","onpaste","onpause","onplay","onplaying","onpopstate","onprogress","onpropertychange","onratechange","onreadystatechange","onreceived","onrepeat","onreset","onresize","onresizeend","onresizestart","onresume","onreverse","onrowdelete","onrowenter","onrowexit","onrowinserted","onrowsdelete","onrowsinserted","onscroll","onsearch","onseek","onseeked","onseeking","onselect","onselectionchange","onselectstart","onshow","onstalled","onstart","onstop","onstorage","onsubmit","onsuspend","onsynchrestored","ontimeerror","ontimeupdate","ontoggle","ontouchcancel","ontouchend","ontouchmove","ontouchstart","ontrackchange","ontransitionend","onunload","onurlflip","onuserproximity","onvolumechange","onwaiting","onwebkitanimationend","onwebkitanimationiteration","onwebkitanimationstart","onwebkitmouseforcechanged","onwebkitmouseforcedown","onwebkitmouseforceup","onwebkitmouseforcewillbegin","onwebkittransitionend","onwebkitwillrevealbottom","onwheel","onzoom"];!function(e){e.HTML="html"}(I||(I={})),function(e){e.xreader="html_view",e.ppt="new_view",e.txt="txt_view",e.html="html_editor_view",e.xmind="xmind_view"}(T||(T={})),function(e){e[e.TO_LOADMORE=1]="TO_LOADMORE",e[e.TO_LOGIN=2]="TO_LOGIN",e[e.TO_CASHIER=3]="TO_CASHIER"}(C||(C={}));var R,O;function j(e,t,r){var n,i,o=document.getElementsByTagName("script")[0]||document.head,a=null,s=null;function c(){a.parentNode&&a.parentNode.removeChild(a),window[t]=null,s&&clearTimeout(s)}return s=setTimeout((function(){c(),r&&r(new Error("Timeout"))}),8e3),window[t]=function(e){c(),r&&r(null,e)},(a=document.createElement("script")).src=e,P()>104&&(null===(n=null==e?void 0:e.includes)||void 0===n?void 0:n.call(e,"//wkbjcloudbos.bdimg.com"))&&(a.crossOrigin="anonymous"),null===(i=null==o?void 0:o.parentNode)||void 0===i||i.insertBefore(a,o),function(){window[t]&&c()}}function D(e){var t=T.xreader;switch(e){case"html_view":t=T.xreader;break;case"new_view":t=T.ppt;break;case"txt_view":t=T.txt;break;case"html_editor_view":t=T.html;break;case"xmind_view":t=T.xmind;break;default:t=T.xreader}return t}function N(e){return new Promise((function(t,r){var n=function(e){e?t(e):r("emptry data")};e.cssPrefix?new S({url:e.url,callbackId:"wenku_"+e.page,callback:n}):j(e.url,"wenku_"+e.page,(function(e,t){n(t)}))}))}function M(e){return new Promise((function(t,r){i.a.get("/doc/content",{params:{requrl:e.url,name:"wenku_"+e.page}}).then((function(e){e&&e.data?t(e.data):r(e)}))}))}function L(e){return new Promise((function(t,r){var n="wenku_"+e.page;e.cssPrefix&&(n=e.cssPrefix+"_wenku_"+e.page),j(e.url+"&callback="+n,n,(function(e,n){!function(e){e?t(e):r("emptry data")}(n)}))}))}function B(e){return new Promise((function(t,r){i.a.get(""+e.url,{params:e.params}).then((function(e){e&&e.data?t(e.data):r(e)}))}))}function _(e){var t,r,n,i;"string"==typeof e.htmlUrls&&(e.htmlUrls=JSON.parse(e.htmlUrls));var o=function(e){return e?e.map((function(e){return{pageIndex:e.pageIndex,url:e.pageLoadUrl,params:e.param}})):[]},a=[];return Array.isArray(e.htmlUrls)&&(a=e.htmlUrls),{docId:e.docId,storeId:e.storeId,tplKey:e.tpl_key||e.tplKey,pageInfo:{width:+e.pageInfo.pageWidth,height:+e.pageInfo.pageHeight,version:+e.pageInfo.version},htmlBcs:Boolean(e.htmlBcs),ttfs:o(null===(t=e.htmlUrls)||void 0===t?void 0:t.ttf),jsons:o(null===(r=e.htmlUrls)||void 0===r?void 0:r.json),pngs:o(null===(n=e.htmlUrls)||void 0===n?void 0:n.png),urls:a,page:e.page,freePage:e.free_page||e.freePage,showPage:e.show_page||e.showPage,md5sum:e.md5sum,rsign:e.rsign,readerType:D(e.tplKey),editorDocHtmlUrl:null===(i=e.editorInfo)||void 0===i?void 0:i.editorDocHtmlUrl,goOnReadAction:e.goOnReadAction,policyId:e.policyId}}function A(e,t){var r={doc_id:e.docId,docId:e.docId,type:e.type,clientType:1,pn:e.pn,t:+new Date,isFromBdSearch:/(www|m)\.baidu\.com/.test(document.referrer)?1:0,srcRef:document.referrer.split("?")[0],rn:e.rn};return t&&(r=Object.assign(r,t.params)),new Promise((function(n,o){var a=(null==t?void 0:t.path)||u.readerInfo2019;i.a.get(a,{params:r}).then((function(t){var r,i=(null===(r=null==t?void 0:t.data)||void 0===r?void 0:r.data)||(null==t?void 0:t.data);if(i&&!Array.isArray(i)){var a=i;a.docId||(a.docId=e.docId);var s=_(a.oriReaderInfo||a);n(s)}else o()})).catch((function(e){o(e)}))}))}function z(e){return E.forEach((function(t){var r=new RegExp(t,"ig");e=e.replace(r,"["+t+"]")})),e}function q(e){var t=document.createElement("div");e.cssPrefix?t.id=e.cssPrefix+"-creader-root":t.id="creader-root",t.className="creader-root";var r=e.viewerMode===f.VDoublePage?2:1,n=e.pageInfoWidth*r+"px";return t.style.width=n,t}function W(){var e=document.createElement("div");return e.id=this.selectorId("creader-error"),e.className="creader-error",e.innerHTML='<div class="creader-error">\n        <div class="creader-error__image"></div>\n        <div class="creader-error__text">数据加载异常，点击重试</div>\n    </div>',e}function H(){var e=document.createElement("div");if(e.id=this.selectorId("creader-page-loading"),e.className="creader-pageloading-wrap",this.renderDocData.readerType===T.ppt){var t=document.createElement("div");t.classList.add("ppt-container"),e.appendChild(t);var r=document.createElement("img");r.classList.add("logo"),r.src="https://edu-wenku.bdimg.com/v1/wkSmallApp/pc/watermark-1635842134822.png",t.appendChild(r)}else for(var n=0;n<50;n++){var i=document.createElement("div");i.className="loader-block title-block",e.appendChild(i);var o=document.createElement("div");o.className="loader-block",e.appendChild(o)}return e}function F(){var e,t,r=document.getElementById(this.selectorId("creader-page-loading"));null===(t=null===(e=null==r?void 0:r.parentNode)||void 0===e?void 0:e.removeChild)||void 0===t||t.call(e,r)}function U(e){var t=document.createElement("canvas"),r=this.config.dpr,n=this.pageDamageScale();(t.style.width=this.pageWidth*n+"px",t.style.height=this.pageHeight*n+"px",e)?(t.width=this.pageWidth*r,t.height=this.pageHeight*r,t.getContext("2d").setTransform(r,0,0,r,0,0)):(t.width=0,t.height=0);return t}function $(e){void 0===e&&(e=!1);var t=U.call(this,e);return t.id=this.selectorId("creader-canvas"),t.className="creader-canvas",t}function V(e){var t=U.call(this,!0);return t.id=this.selectorId(e),t.className=""+e,t}function X(){var e=document.createElement("div");return e.id=this.selectorId("pageNo"),e.className="pageNo",e}function G(){var e=document.createElement("div");return e.id=this.selectorId("creader-decview"),e.className="creader-decview",e}!function(e){e.RenderInfoLoadFail="renderInfoLoadFail",e.PageContentNotLoad="pageContentNotLoad",e.XreaderBodyNull="LayoutBodyNull",e.XreaderJsonParserError="XreaderJsonParserError",e.XreaderJsonGetFailed="xreaderJsonGetFailed",e.XreaderMaxRetry="xreaderMaxRetry",e.LayoutTextOverlap="layoutTextOverlap",e.LayoutFontFailed="layoutFontFailed",e.LayoutBigImage="layoutBigImage"}(R||(R={})),function(e){e.Inited="inited",e.Loading="loading",e.Error="error",e.Rendering="rendering",e.Rendered="rendered",e.Cleared="cleared"}(O||(O={}));var J=function(){function e(e){this.pageWidth=0,this.pageHeight=0,this.status=O.Inited,this.retryCount=0,this.index=e.index,this.rootEl=e.rootEl,this.config=e.config,this.pageWidth=e.renderDocData.pageRenderWidth,this.pageHeight=e.renderDocData.pageRenderHeight,this.emitter=e.emitter,this.renderDocData=e.renderDocData,this.readerInfoDataSource=e.readerInfoDataSource}return e.prototype.render=function(){throw Error("need subclass to implement render() method!!!")},e.prototype.prepareReader=function(){throw Error("need subclass to implement prepareReader() method!!!")},e.prototype.selectorId=function(e){throw Error("need subclass to implement selectorId() method!!!")},e.prototype.emitError=function(e,t,r){var n;null===(n=this.emitter)||void 0===n||n.emit("error",{code:e,message:t,info:r})},e.prototype.updateStatus=function(e){throw Error("need subclass to implement updateStatus() method!!!")},e.prototype.needAddSkeleton=function(){throw Error("need subclass to implement needAddSkeleton() method!!!")},e.prototype.removeErrorEl=function(){var e=document.getElementById(this.selectorId("creader-error"));e&&e.parentElement&&e.parentElement.removeChild(e)},e.prototype.changePageElHeight=function(e){var t=document.getElementById(this.selectorId("pageNo"));t&&(t.style.height=e?e+"px":"")},e.prototype.pageDamageScale=function(){return this.config.width<=0?1:this.config.width/this.pageWidth},e.prototype.addErrorIfNeed=function(){var e=this,t=document.getElementById(this.selectorId("creader-error"));if(!t){t=W.call(this);var r=document.getElementById(this.selectorId("pageNo"));r&&t&&(t.addEventListener("click",(function(t){t.stopPropagation(),e.render()})),r.appendChild(t))}},e}(),K=function(){function e(){}return e.prototype.draw=function(e,t){throw new Error("must be implemented by subclass "+e)},e}(),Y=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return d(t,e),t.prototype.draw=function(e,t){t.canvas.width&&t.canvas.height&&this.drawOneCanvas(e,t)},t.prototype.drawOneCanvas=function(e,t){var r,n=t.canvas.getContext("2d");e.backgroundColor&&(n.fillStyle=e.backgroundColor,n.fillRect(e.pos.x,e.pos.y,e.pos.w,e.pos.h)),n.fillStyle=e.color;var i=(null===(r=e.fontFamily)||void 0===r?void 0:r.join(","))||"",o=e.fontStyle+" "+e.fontWeight+" "+e.fontSize+"px "+i;if(n.font=o,"10px sans-serif"===n.font&&e.fontSize,n.textBaseline="middle",n.textAlign="left",n.save(),e.filter&&(n.filter=e.filter),1!==e.scaleX&&n.scale(e.scaleX,1),1!==e.alpha&&(n.globalAlpha=e.alpha),e.matrix){n.translate(e.pos.x+e.pos.w/2,e.pos.y+e.pos.h/2);var a=e.matrix,s=a.a,c=void 0===s?1:s,d=a.b,l=void 0===d?0:d,u=a.c,h=void 0===u?0:u,p=a.d,f=void 0===p?0:p,g=a.e,m=void 0===g?1:g,v=a.f,b=void 0===v?0:v;n.transform(c,l,h,f,m,b),n.fillText(e.content,-e.pos.w/2,-e.pos.h/2)}else e.useCharRender?e.chars.forEach((function(e){n.fillText(e.text,e.rect.left,e.rect.top+e.rect.height/2)})):n.fillText(e.content,e.pos.x,e.pos.y+e.pos.h/2,e.pos.w);n.restore()},t}(K);function Q(e){return new Promise((function(t,r){var n,i=new Image;P()>104&&(null===(n=null==e?void 0:e.includes)||void 0===n?void 0:n.call(e,"//wkbjcloudbos.bdimg.com"))&&(i.crossOrigin="anonymous"),i.addEventListener("load",(function(){t(i)})),i.addEventListener("error",(function(e){r(e)})),i.src=e}))}var Z=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return d(t,e),t.prototype.draw=function(e,t){var r=this;return new Promise((function(n,i){Q(e.src).then((function(i){r.drawWithImage(e,t,i),n(i)})).catch((function(e){i(e)}))}))},t.prototype.drawWithImage=function(e,t,r){if(t.canvas.width&&t.canvas.height){var n=t.canvas.getContext("2d");try{e.picPos.iw=Math.min(e.picPos.iw,r.width),e.picPos.ih=Math.min(e.picPos.ih,r.height);var i=e.matrix||1!==e.scaleX;if(n.save(),1!==e.pos.opacity&&(n.globalAlpha=e.pos.opacity),i){if(n.translate(e.pos.x+e.pos.w/2,e.pos.y+e.pos.h/2),1!==e.scaleX&&n.scale(e.scaleX,e.scaleY),e.matrix){var o=e.matrix,a=o.a,s=void 0===a?1:a,c=o.b,d=void 0===c?0:c,l=o.c,u=void 0===l?0:l,h=o.d,p=void 0===h?0:h,f=o.e,g=void 0===f?1:f,m=o.f,v=void 0===m?0:m;n.transform(s,d,u,p,g,v)}n.drawImage(r,e.picPos.ix,e.picPos.iy,e.picPos.iw,e.picPos.ih,-e.pos.w/2,-e.pos.h/2,e.pos.w,e.pos.h)}else n.drawImage(r,e.picPos.ix,e.picPos.iy,e.picPos.iw,e.picPos.ih,e.pos.x,e.pos.y,e.pos.w,e.pos.h);return n.restore(),!0}catch(e){return!1}}},t}(K),ee=function(){function e(e){this.scaleX=1,this.scaleY=1,this.matrix=null,this.alpha=1,this.type=e,this.pos={x:0,y:0,w:0,h:0,z:0,opacity:1}}return e.prototype.parse=function(e,t){throw new Error("must be implemented by subclass "+t)},e.prototype.changeScale=function(e){throw new Error("must be implemented by subclass "+e)},e}(),te={ArialMT:"Helvetica",ChaparralPro:"arial narrow",ClarendonBT:"Times",Clarendon:"arial narrow",ArnoPro:"arial narrow",AGaramondPro:"Times",AJensonPro:"Times",AvantGarde:"Times",AvenirLTStd:"Times",ACaslonPro:"Times",AntiqueOliT:"Times",AmericanTypewriter:"Times",AkzidenzGroteskBE:"Times",Birka:"Times",Berkeley:"Times",BellGothicStd:"Times",BodoniStd:"Times",BankMixPlain:"Times",BankSansSemiBoldItalic:"arial narrow",BickhamScriptPro:"Times",BankSansSemiBoldPlain:"Times",BankMixBoldPlain:"Times",BankSansPlain:"arial narrow",BemboStd:"Times",BernhardModernStd:"arial narrow",ComicSansMS:"Times",DINMittelschriftStd:"Times","DIN-BoldItalic":"arial narrow","DIN-Bold":"Times","DIN-Regular":"arial narrow",EgyptienneFLTStd:"Times",EurostileLT:"Times",FranklinGothic:"Times",FuturaBook:"Times",Futura:"Times","Franklin Gothic Book":"Times",Formata:"Times",Palatino:"Times",GoudyStd:"Times",GillSans:"Times",GrotesqueMT:"Times",CenturyGothic:"Times",SabonLTStd:"Times",SouvenirStd:"Times",LucidaSans:"Times",LetterGothicStd:"Times",WarnockPro:"Times",Myriad:"Times",MinionPro:"Times","MyriadPro-SemiboldCond":"arial narrow",MetaPlusBook:"Times",MrsEavesRoman:"Times",MrsEavesBold:"Times",MetaPlusBold:"Times",Museo:"Times",NewCenturySchlbk:"Times",NewsGothicStd:"Times",NewBaskerville:"Times",FrutigerLTCom:"Times",Univers:"Times",Rockwell:"Times",RotisSansSerif:"Times",Optima:"Times",OfficinaSans:"Times",OCRAStd:"Times","Arial-Bold":"Helvetica-Bold","Arial,Bold":"Helvetica-Bold","Arial-BoldItalic":"Helvetica-BoldOblique","Arial,BoldItalic":"Helvetica-BoldOblique","Arial-BoldItalicMT":"Helvetica-BoldOblique","Arial-BoldMT":"Helvetica-Bold",Arial:"Helvetica","Arial-Italic":"Helvetica-Oblique","Arial,Italic":"Helvetica-Oblique","Arial-ItalicMT":"Helvetica-Oblique","Courier-Bold":"Courier-Bold","Courier,Bold":"Courier-Bold","Courier,BoldItalic":"Courier-BoldOblique","Courier-BoldOblique":"Courier-BoldOblique",Courier:"Courier","Courier,Italic":"Courier-Oblique","CourierNew-Bold":"Courier-Bold","CourierNew,Bold":"Courier-Bold","CourierNew-BoldItalic":"Courier-BoldOblique","CourierNew,BoldItalic":"Courier-BoldOblique",CourierNew:"Courier","CourierNew-Italic":"Courier-Oblique","CourierNew,Italic":"Courier-Oblique","CourierNewPS-BoldItalicMT":"Courier-BoldOblique","CourierNewPS-BoldMT":"Courier-Bold","CourierNewPS-ItalicMT":"Courier-Oblique",CourierNewPSMT:"Courier","Courier-Oblique":"Courier-Oblique",Helvetica:"arial narrow",HelveticaNeue:"arial narrow",Interstate:"Times",Symbol:"Symbol",StoneSans:"Times",TimesNewRoman:"Times",TimesNewRomanPS:"Times",TimesNewRomanPSMT:"Times","Times-Roman":"Times New Roman","Times-Bold":"Times New Roman","Times-Italic":"Times",TrajanPro:"Times",TradeGothicLTCom:"Times",Zapfino:"Times",simsun:"Arial"};function re(e,t){var r=e.charCodeAt(t);if(isNaN(r))return"";if(r<55296||r>57343)return e.charAt(t);if(55296<=r&&r<=56319){if(e.length<=t+1)return!1;var n=e.charCodeAt(t+1);return!(56320>n||n>57343)&&e.charAt(t)+e.charAt(t+1)}if(0===t)return!1;e.charCodeAt(t-1);return!1}function ne(e){var t=0,r="",n=[];for(t=0;t<e.length;t++)!1!==(r=re(e,t))&&n.push(r);return n}var ie={bk102033:1,bk103000:1,bk185720:1,bk303781:1,bk356827:1,bk356828:1,bk356833:1,bk356835:1,bk356837:1,bk356838:1,bk356839:1,bk356840:1,bk356885:1,bk356886:1,bk356887:1,bk356888:1,bk356889:1,bk356890:1,bk370246:1,bk370247:1,bk370248:1,bk370249:1,bk400360:1,bk400937:1,bk400938:1,bk400939:1,bk400940:1,bk400941:1,bk400942:1,bk402658:1,bk402673:1,bk402791:1,bk403361:1,bk403391:1,bk404117:1,bk404157:1,bk404171:1,bk404172:1,bk404173:1,bk404174:1,bk404738:1,bk404739:1,bk405512:1,bk406252:1,bk406254:1,bk406365:1,bk407405:1,bk409665:1,bk409666:1,bk409667:1,bk409668:1,bk409669:1,bk409670:1,bk409671:1,bk409672:1,bk410062:1,bk412962:1,bk412963:1,bk415599:1,bk421317:1,bk421349:1,bk421393:1,bk421437:1,bk421865:1,bk421869:1,bk421870:1,bk421871:1,bk422160:1,bk422161:1,bk424106:1,bk424107:1,bk424108:1,bk424109:1,bk424110:1,bk424111:1,bk424902:1,bk425862:1,bk427010:1,bk427018:1,bk427019:1,bk427020:1,bk427028:1,bk427029:1,bk427038:1,bk427039:1,bk427062:1,bk427064:1,bk427571:1,bk428911:1,bk431502:1,bk433666:1,bk433670:1,bk433680:1,bk434061:1,bk434062:1,bk435744:1,bk435745:1,bk436718:1,bk436728:1,bk436738:1,bk436742:1,bk436745:1,bk436748:1,bk436768:1,bk438088:1,bk438125:1,bk438126:1,bk438588:1,bk438589:1,bk438600:1,bk439188:1,bk439225:1,bk439227:1,bk442729:1,bk442730:1,bk451289:1,bk451291:1,bk451804:1,bk451810:1,bk453242:1,bk456351:1,bk456418:1,bk458060:1,bk458071:1,bk458123:1,bk458124:1,bk468203:1,bk472067:1,bk472068:1,bk479228:1,bk479229:1,bk481699:1,bk486466:1,bk486493:1,bk486494:1,bk486497:1,bk487013:1,bk489592:1,bk489734:1,bk489735:1,bk489736:1,bk491020:1,bk491031:1,bk491032:1,bk491040:1,bk493427:1,bk493878:1,bk498451:1,bk504923:1,bk510529:1,bk512315:1,bk512316:1,bk512411:1,bk512412:1,bk512425:1,bk512431:1,bk512466:1,bk512695:1,bk512732:1,bk514906:1,bk514957:1,bk514958:1,bk517636:1,bk518212:1,bk518364:1,bk518378:1,bk518379:1,bk518474:1,bk518475:1,bk518476:1,bk518710:1,bk518718:1,bk519412:1,bk519498:1,bk520082:1,bk520108:1,bk520131:1,bk520152:1,bk520169:1,bk520194:1,bk520382:1,bk521899:1,bk522153:1,bk523036:1,bk524011:1,bk524047:1,bk524070:1,bk524091:1,bk524094:1,bk524864:1,bk524865:1,bk525498:1,bk525745:1,bk525746:1,bk526410:1,bk526855:1,bk527414:1,bk528020:1,bk528931:1,bk528948:1,bk530970:1,bk530980:1,bk530990:1,bk532420:1,bk532430:1,bk532450:1,bk532458:1,bk535910:1,bk535918:1,bk537830:1,bk540297:1,bk540838:1,bk541068:1,bk541709:1,bk543159:1,bk544033:1,bk545619:1,bk545623:1,bk545947:1,bk547628:1,bk547648:1,bk547766:1,bk548259:1,bk548844:1,bk552245:1,bk552288:1,bk552534:1,bk552587:1,bk552599:1,bk552742:1,bk552794:1,bk552801:1,bk552853:1,bk553131:1,bk553242:1,bk556610:1,bk556617:1,bk558360:1,bk558730:1,bk558808:1,bk558809:1,bk558868:1,bk558894:1,bk558895:1,bk558916:1,bk566666:1,bk584016:1,bk601100:1,bk601101:1,bk601121:1,bk601122:1,bk601123:1,bk601124:1,bk601125:1,bk601126:1,bk601127:1,bk601128:1,bk601131:1,bk601136:1,bk601137:1,bk601138:1,bk601140:1,bk601142:1,bk601143:1,bk601144:1,bk601145:1,bk601146:1,bk601147:1,bk601148:1,bk601149:1,bk601174:1,bk601177:1,bk601178:1,bk601179:1,bk601186:1,bk601187:1,bk601188:1,bk601189:1,bk601382:1,bk601428:1,bk602907:1,bk602969:1,bk603128:1,bk603367:1,bk603445:1,bk603506:1,bk603601:1,bk603602:1,bk603694:1,bk603708:1,bk621021:1,bk621201:1,bk621977:1,bk622126:1,bk622127:1,bk622128:1,bk622129:1,bk622131:1,bk622132:1,bk622133:1,bk622134:1,bk622135:1,bk622136:1,bk622137:1,bk622138:1,bk622139:1,bk622140:1,bk622141:1,bk622143:1,bk622146:1,bk622147:1,bk622148:1,bk622149:1,bk622150:1,bk622151:1,bk622152:1,bk622153:1,bk622154:1,bk622155:1,bk622156:1,bk622165:1,bk622166:1,bk622168:1,bk622169:1,bk622178:1,bk622179:1,bk622184:1,bk622188:1,bk622199:1,bk622200:1,bk622202:1,bk622203:1,bk622208:1,bk622210:1,bk622211:1,bk622212:1,bk622213:1,bk622214:1,bk622215:1,bk622220:1,bk622225:1,bk622230:1,bk622235:1,bk622240:1,bk622245:1,bk622250:1,bk622251:1,bk622252:1,bk622253:1,bk622254:1,bk622258:1,bk622259:1,bk622260:1,bk622261:1,bk622280:1,bk622291:1,bk622292:1,bk622301:1,bk622302:1,bk622303:1,bk622305:1,bk622307:1,bk622308:1,bk622310:1,bk622311:1,bk622312:1,bk622316:1,bk622318:1,bk622319:1,bk622321:1,bk622322:1,bk622323:1,bk622324:1,bk622325:1,bk622327:1,bk622328:1,bk622329:1,bk622331:1,bk622332:1,bk622333:1,bk622335:1,bk622336:1,bk622337:1,bk622338:1,bk622339:1,bk622340:1,bk622341:1,bk622342:1,bk622343:1,bk622345:1,bk622346:1,bk622347:1,bk622348:1,bk622349:1,bk622350:1,bk622351:1,bk622352:1,bk622353:1,bk622355:1,bk622358:1,bk622359:1,bk622360:1,bk622361:1,bk622362:1,bk622363:1,bk622365:1,bk622366:1,bk622367:1,bk622368:1,bk622369:1,bk622370:1,bk622371:1,bk622373:1,bk622375:1,bk622376:1,bk622377:1,bk622378:1,bk622379:1,bk622382:1,bk622383:1,bk622384:1,bk622385:1,bk622386:1,bk622387:1,bk622388:1,bk622389:1,bk622391:1,bk622392:1,bk622393:1,bk622394:1,bk622395:1,bk622396:1,bk622397:1,bk622398:1,bk622399:1,bk622400:1,bk622406:1,bk622407:1,bk622411:1,bk622412:1,bk622413:1,bk622415:1,bk622418:1,bk622420:1,bk622421:1,bk622422:1,bk622423:1,bk622425:1,bk622426:1,bk622427:1,bk622428:1,bk622429:1,bk622432:1,bk622434:1,bk622435:1,bk622436:1,bk622439:1,bk622440:1,bk622441:1,bk622442:1,bk622443:1,bk622447:1,bk622448:1,bk622449:1,bk622450:1,bk622451:1,bk622452:1,bk622453:1,bk622456:1,bk622459:1,bk622462:1,bk622463:1,bk622466:1,bk622467:1,bk622468:1,bk622470:1,bk622471:1,bk622472:1,bk622476:1,bk622477:1,bk622478:1,bk622481:1,bk622485:1,bk622486:1,bk622487:1,bk622488:1,bk622489:1,bk622490:1,bk622491:1,bk622492:1,bk622493:1,bk622495:1,bk622496:1,bk622498:1,bk622499:1,bk622500:1,bk622506:1,bk622509:1,bk622510:1,bk622516:1,bk622517:1,bk622518:1,bk622519:1,bk622521:1,bk622522:1,bk622523:1,bk622525:1,bk622526:1,bk622538:1,bk622546:1,bk622547:1,bk622548:1,bk622549:1,bk622550:1,bk622561:1,bk622562:1,bk622563:1,bk622575:1,bk622576:1,bk622577:1,bk622578:1,bk622579:1,bk622580:1,bk622581:1,bk622582:1,bk622588:1,bk622598:1,bk622600:1,bk622601:1,bk622602:1,bk622603:1,bk622615:1,bk622617:1,bk622619:1,bk622622:1,bk622630:1,bk622631:1,bk622632:1,bk622633:1,bk622650:1,bk622655:1,bk622658:1,bk622660:1,bk622678:1,bk622679:1,bk622680:1,bk622681:1,bk622682:1,bk622684:1,bk622688:1,bk622689:1,bk622690:1,bk622691:1,bk622692:1,bk622696:1,bk622698:1,bk622700:1,bk622725:1,bk622728:1,bk622750:1,bk622751:1,bk622752:1,bk622753:1,bk622754:1,bk622755:1,bk622756:1,bk622757:1,bk622758:1,bk622759:1,bk622760:1,bk622761:1,bk622762:1,bk622763:1,bk622770:1,bk622777:1,bk622821:1,bk622822:1,bk622823:1,bk622824:1,bk622825:1,bk622826:1,bk622827:1,bk622836:1,bk622837:1,bk622840:1,bk622841:1,bk622842:1,bk622843:1,bk622844:1,bk622845:1,bk622846:1,bk622847:1,bk622848:1,bk622849:1,bk622855:1,bk622856:1,bk622857:1,bk622858:1,bk622859:1,bk622860:1,bk622861:1,bk622864:1,bk622865:1,bk622866:1,bk622867:1,bk622869:1,bk622870:1,bk622871:1,bk622877:1,bk622878:1,bk622879:1,bk622880:1,bk622881:1,bk622882:1,bk622884:1,bk622885:1,bk622886:1,bk622891:1,bk622892:1,bk622893:1,bk622895:1,bk622897:1,bk622898:1,bk622900:1,bk622901:1,bk622908:1,bk622909:1,bk622940:1,bk622982:1,bk628218:1,bk628288:1,bk628366:1,bk628368:1,bk650600:1,bk650700:1,bk650800:1,bk650900:1,bk682900:1,bk683970:1,bk685800:1,bk690755:1,bk694301:1,bk695800:1,bk843010:1,bk843360:1,bk843420:1,bk843610:1,bk843730:1,bk843800:1,bk843850:1,bk843900:1,bk870000:1,bk870100:1,bk870300:1,bk870400:1,bk870500:1,bk888000:1,bk940056:1,bk955880:1,bk955881:1,bk955882:1,bk955888:1,bk984301:1,bk998800:1},oe={ac010:1,ac021:1,ac022:1,ac023:1,ac852:1,ac853:1,ac024:1,ac027:1,ac025:1,ac020:1,ac028:1,ac029:1,ac0310:1,ac0311:1,ac0312:1,ac0313:1,ac0314:1,ac0315:1,ac0316:1,ac0317:1,ac0318:1,ac0319:1,ac0335:1,ac0570:1,ac0571:1,ac0572:1,ac0573:1,ac0574:1,ac0575:1,ac0576:1,ac0577:1,ac0578:1,ac0579:1,ac0580:1,ac0410:1,ac0411:1,ac0412:1,ac0413:1,ac0414:1,ac0415:1,ac0416:1,ac0417:1,ac0418:1,ac0419:1,ac0421:1,ac0427:1,ac0429:1,ac0710:1,ac0711:1,ac0712:1,ac0713:1,ac0714:1,ac0715:1,ac0716:1,ac0717:1,ac0718:1,ac0719:1,ac0722:1,ac0724:1,ac0728:1,ac0510:1,ac0511:1,ac0512:1,ac0513:1,ac0514:1,ac0515:1,ac0516:1,ac0517:1,ac0518:1,ac0519:1,ac0523:1,ac0470:1,ac0471:1,ac0472:1,ac0473:1,ac0474:1,ac0475:1,ac0476:1,ac0477:1,ac0478:1,ac0479:1,ac0482:1,ac0483:1,ac0790:1,ac0791:1,ac0792:1,ac0793:1,ac0794:1,ac0795:1,ac0796:1,ac0797:1,ac0798:1,ac0799:1,ac0701:1,ac0350:1,ac0351:1,ac0352:1,ac0353:1,ac0354:1,ac0355:1,ac0356:1,ac0357:1,ac0358:1,ac0359:1,ac0930:1,ac0931:1,ac0932:1,ac0933:1,ac0934:1,ac0935:1,ac0936:1,ac0937:1,ac0938:1,ac0941:1,ac0943:1,ac0530:1,ac0531:1,ac0532:1,ac0533:1,ac0534:1,ac0535:1,ac0536:1,ac0537:1,ac0538:1,ac0539:1,ac0450:1,ac0451:1,ac0452:1,ac0453:1,ac0454:1,ac0455:1,ac0456:1,ac0457:1,ac0458:1,ac0459:1,ac0591:1,ac0592:1,ac0593:1,ac0594:1,ac0595:1,ac0596:1,ac0597:1,ac0598:1,ac0599:1,ac0751:1,ac0752:1,ac0753:1,ac0754:1,ac0755:1,ac0756:1,ac0757:1,ac0758:1,ac0759:1,ac0760:1,ac0762:1,ac0763:1,ac0765:1,ac0766:1,ac0768:1,ac0769:1,ac0660:1,ac0661:1,ac0662:1,ac0663:1,ac0810:1,ac0811:1,ac0812:1,ac0813:1,ac0814:1,ac0816:1,ac0817:1,ac0818:1,ac0819:1,ac0825:1,ac0826:1,ac0827:1,ac0830:1,ac0831:1,ac0832:1,ac0833:1,ac0834:1,ac0835:1,ac0836:1,ac0837:1,ac0838:1,ac0839:1,ac0840:1,ac0730:1,ac0731:1,ac0732:1,ac0733:1,ac0734:1,ac0735:1,ac0736:1,ac0737:1,ac0738:1,ac0739:1,ac0743:1,ac0744:1,ac0745:1,ac0746:1,ac0370:1,ac0371:1,ac0372:1,ac0373:1,ac0374:1,ac0375:1,ac0376:1,ac0377:1,ac0378:1,ac0379:1,ac0391:1,ac0392:1,ac0393:1,ac0394:1,ac0395:1,ac0396:1,ac0398:1,ac0870:1,ac0871:1,ac0872:1,ac0873:1,ac0874:1,ac0875:1,ac0876:1,ac0877:1,ac0878:1,ac0879:1,ac0691:1,ac0692:1,ac0881:1,ac0883:1,ac0886:1,ac0887:1,ac0888:1,ac0550:1,ac0551:1,ac0552:1,ac0553:1,ac0554:1,ac0555:1,ac0556:1,ac0557:1,ac0558:1,ac0559:1,ac0561:1,ac0562:1,ac0563:1,ac0564:1,ac0565:1,ac0566:1,ac0951:1,ac0952:1,ac0953:1,ac0954:1,ac0431:1,ac0432:1,ac0433:1,ac0434:1,ac0435:1,ac0436:1,ac0437:1,ac0438:1,ac0439:1,ac0440:1,ac0770:1,ac0771:1,ac0772:1,ac0773:1,ac0774:1,ac0775:1,ac0776:1,ac0777:1,ac0778:1,ac0779:1,ac0851:1,ac0852:1,ac0853:1,ac0854:1,ac0855:1,ac0856:1,ac0857:1,ac0858:1,ac0859:1,ac0910:1,ac0911:1,ac0912:1,ac0913:1,ac0914:1,ac0915:1,ac0916:1,ac0917:1,ac0919:1,ac0971:1,ac0972:1,ac0973:1,ac0974:1,ac0975:1,ac0976:1,ac0977:1,ac0890:1,ac0898:1,ac0899:1,ac0891:1,ac0892:1,ac0893:1,ac0991:1,ac0990:1,ac0992:1,ac0995:1,ac0902:1,ac0994:1,ac0909:1,ac0996:1,ac0997:1,ac0908:1,ac0998:1,ac0903:1,ac0999:1,ac0901:1,ac0993:1,ac0906:1},ae={star:function(e){return"********************************************".substring(0,e)},processInfo:function(e){return e.length<9?e:(e=this.dealIDNum(e),e=this.dealBankcardNum(e),e=this.dealPassportNum(e),e=this.dealTelephoneNum(e))},dealIDNum:function(e){if(e.length<15)return e;return e.replace(/([^\d]|^)([16][1-5]|2[1-3]|3[1-7]|4[1-6]|5[0-4]|71|8[12])(\d{4})(19|20)\d{2}((0[1-9])|(1[0-2]))(([0-2][1-9])|[123]0|31)\d{3}[0-9Xx](?![0-9])/g,"$1$2$3************").replace(/([^\d]|^)([16][1-5]|2[1-3]|3[1-7]|4[1-6]|5[0-4]|71|8[12])(\d{4})\d{2}((0[1-9])|(1[0-2]))(([0-2][1-9])|[123]0|31)\d{2}[0-9Xx](?![0-9])/g,"$1$2$3*********")},dealBankcardNum:function(e){var t=this;if(e.length<16)return e;return e.replace(/([^\d]|^)(\d{6})(\d{10}|\d{13})(?![0-9])/g,(function(e,r,n,i){var o=n||"",a=i||"";return ie["bk"+o.substring(0,6)]?""+(r||"")+o+t.star(a.length):e||""}))},dealPassportNum:function(e){if(e.length<9)return e;return e.replace(/([^A-Za-z0-9]|^)([GPSDgpsd]\d)(\d{7})(?![0-9])/g,"$1$2*******")},dealTelephoneNum:function(e){if(e.length<10)return e;return e.replace(/([^\d]|^)(\+86|0086)?(\s*)(1(3[0-9]|5[0-35-9]|66|7[35-8]|8[0-9]|9[89]))(\s*)(\d{4})(\s*)(\d{4})(?![0-9])/g,"$1$2$3$4$6****$8****").replace(/([^\d]|^)(\d{3,4})(-?|\s*)(\d{7,8})(?![0-9])/g,(function(e,t,r,n,i){var o=t||"",a=i||"",s=r||"",c=n||"",d=oe["ac"+s];return(c||3===s.length)&&d||!c&&4===s.length&&(d||oe["ac"+s.substring(0,3)])?d?""+o+s+c+a.replace(/\d/g,"*"):""+o+s.substring(0,3)+"*"+a.replace(/\d/g,"*"):e||""}))}},se=function(e){function t(t){var r=e.call(this,"word")||this;return r.fontSize=0,r.color="#000",r.content="",r.letterSpacing=0,r.fontWeight="400",r.fontFamily=[],r.fontStyle="normal",r.filter="",r.chars=[],r.useCharRender=!1,r.backgroundColor="",r.measureCtx=t,r}return d(t,e),t.prototype.changeScale=function(e){var t;e>0&&1!==e&&(this.pos.x*=e,this.pos.y*=e,this.pos.w*=e,this.pos.h*=e,this.fontSize*=e,this.letterSpacing*=e,null===(t=this.chars)||void 0===t||t.forEach((function(t){t.rect.top*=e,t.rect.left*=e,t.rect.width*=e,t.rect.height*=e})))},t.prototype.parsePsObject=function(e){if(e){if(e._scaleX&&0!==e._scaleX&&(this.scaleX=e._scaleX,this.pos.x*=1/this.scaleX),e._rotate&&0!==e._rotate){var t=Math.PI/180*e._rotate;this.matrix={a:Math.cos(t),b:Math.sin(t),c:-Math.sin(t),d:Math.cos(t),e:0,f:0},90===e._rotate?(this.pos.x=this.pos.x-(this.pos.w-this.pos.h)/2,this.pos.y=this.pos.y-(this.pos.h-this.pos.w)/2):180===e._rotate?(this.pos.x=this.pos.x-this.pos.w,this.pos.y=this.pos.y-this.pos.h):270===e._rotate&&(this.pos.x=this.pos.x+(this.pos.h-this.pos.w)/2,this.pos.y=this.pos.y-(this.pos.w-this.pos.h)/2)}(e._opacity||e._alpha)&&(this.alpha=e._opacity||e._alpha)}},t.prototype.changeStyle=function(e,t,r){switch(e){case"font-size":return{fontSize:+t};case"letter-spacing":return{letterSpacing:+t};case"color":return{color:t};case"bold":return{fontWeight:"false"!==t?"600":"normal"};case"font-style":return{fontStyle:t};case"overflow":return{overflow:t};case"font-family":var n=r.fonts&&r.fonts[t]||t,i=te[n]&&te[n]||n;r.renderInfo.pageInfo.version>5?this.fontFamily=["'"+n+"'","'"+t+"'","'"+i+"'"]:this.fontFamily=["'"+t+"'","'"+n+"'","'"+i+"'"]}},t.prototype.changeStyleForObj=function(e,t){var r=this;if(e){var n={},i=Object.keys(e);return i&&i.forEach((function(i){var o=r.changeStyle(i,e[i],t);o&&Object.assign(n,o)})),n}},t.prototype.parse=function(e,t){var r,n,i,o=this;if(!e.c||!e.c.trim())return!1;var a=e.ps&&"object"==typeof e.ps;if(a&&0===(null===(r=e.ps)||void 0===r?void 0:r._alpha)||1===(null===(n=e.ps)||void 0===n?void 0:n._opacity))return!1;this.pos=e.p,this.content=e.c;var s=this.changeStyleForObj(e.s,t);if(s&&Object.assign(this,s),t.styleMap||(t.styleMap=new Map,t.styles&&t.styles.forEach((function(e){e.c&&e.c.forEach((function(r){var n,i,o={};(null===(n=t.styleMap)||void 0===n?void 0:n.has(r))&&(o=t.styleMap.get(r)),Object.assign(o,e.s),null===(i=t.styleMap)||void 0===i||i.set(r,o)}))}))),null===(i=e.r)||void 0===i||i.forEach((function(e){var r,n=null===(r=t.styleMap)||void 0===r?void 0:r.get(e),i=o.changeStyleForObj(n,t);i&&Object.assign(o,i)})),a){var c=e.ps;this.parsePsObject(c)}return this.changeScale(t.renderScale),this.measureCtx&&(this.chars=this.parseNodeToGrapheme()),this.content=ae.processInfo(this.content),!0},t.prototype.parseNodeToGrapheme=function(){var e=this,t=[],r=ne(this.content),n=0;r.forEach((function(i,o){var a=e.widthForText(i,e.measureCtx),s={text:i,rect:{width:a,height:e.pos.h,top:e.pos.y,left:e.pos.x+n}};n+=a,o!==r.length-1&&(n+=e.letterSpacing),t.push(s)}));var i=n-this.pos.w;return t.length>1&&Math.abs(this.letterSpacing)>.1&&i<=1&&(this.useCharRender=!0),t},t.prototype.widthForText=function(e,t){var r,n=(null===(r=this.fontFamily)||void 0===r?void 0:r.join(","))||"";t.font=this.fontStyle+" "+this.fontWeight+" "+this.fontSize+"px "+n;var i=t.measureText(e);return Number(i.width.toFixed(4))||0},t.prototype.copyNodeForText=function(e){var r=new t;return Object.assign(r,this),r.content=e,r},t}(ee);function ce(e,t){var r=e.pageInfo.version;if(e.htmlBcs&&e.pngs){var n=e.pngs.find((function(e){return e.pageIndex===t}));if(n)return n.url}var i=["pn="+t,"rn=1","t=png","v="+r].join("&");return k+"/pipe/"+e.storeId+"?"+i}var de=function(e){function t(){var t=e.call(this,"pic")||this;return t.src="",t.picPos={ix:0,iy:0,iw:0,ih:0},t}return d(t,e),t.prototype.changeScale=function(e,t){void 0===t&&(t=!0),e>0&&1!==e&&(this.pos.x*=e,this.pos.y*=e,this.pos.w*=e,this.pos.h*=e,this.pos.x0&&(this.pos.x0=this.pos.x0*e),this.pos.x1&&(this.pos.x1=this.pos.x1*e),this.pos.x2&&(this.pos.x2=this.pos.x2*e),this.pos.x3&&(this.pos.x3=this.pos.x3*e),this.pos.y0&&(this.pos.y0=this.pos.y0*e),this.pos.y1&&(this.pos.y1=this.pos.y1*e),this.pos.y2&&(this.pos.y2=this.pos.y2*e),this.pos.y3&&(this.pos.y3=this.pos.y3*e),t&&(this.picPos.ix*=e,this.picPos.iy*=e,this.picPos.iw*=e,this.picPos.ih*=e))},t.prototype.parsePicRenderWh=function(e){var t=e.x0,r=void 0===t?0:t,n=e.y0,i=void 0===n?0:n,o=e.x1,a=void 0===o?0:o,s=e.y1,c=void 0===s?0:s,d=e.x2,l=void 0===d?0:d,u=e.y2,h=void 0===u?0:u,p=Number(Math.sqrt(Math.pow(Math.abs(r-a),2)+Math.pow(Math.abs(i-c),2)).toFixed(4));return{w:Number(Math.sqrt(Math.pow(Math.abs(a-l),2)+Math.pow(Math.abs(c-h),2)).toFixed(4)),h:p}},t.prototype.parsePicRotate=function(e){var t=e.y0,r=void 0===t?0:t,n=e.y1,i=void 0===n?0:n,o=e.x1,a=void 0===o?0:o,s=e.x2,c=void 0===s?0:s,d=e.rotate,l=void 0===d?0:d,u=i>r,h=a>c;if(u&&h)return{a:-1,b:0,c:0,d:-1,e:0,f:0};if(u)return{a:1,b:0,c:0,d:-1,e:0,f:0};if(h)return{a:-1,b:0,c:0,d:1,e:0,f:0};if(Math.abs(l)>0){var p=Math.PI/180*l;return{a:Math.cos(p),b:Math.sin(p),c:-Math.sin(p),d:Math.cos(p),e:0,f:0}}},t.prototype.parse=function(e,t){var r;if((null==t?void 0:t.page)&&+(null===(r=t.page)||void 0===r?void 0:r.v)>5&&Object.prototype.hasOwnProperty.call(e.p,"opacity")&&0===e.p.opacity)return!1;var n=ce(t.renderInfo,t.curPage);if(t.config.useProxy&&(n="/img/content?requrl="+encodeURIComponent(n)),this.src=n||"",this.pos=e.p,this.picPos=e.c,this.changeScale(t.renderScale),(this.picPos.iw!==this.pos.w||this.picPos.ih!==this.pos.h)&&e.p.hasOwnProperty("x1")){var i=this.parsePicRenderWh(e.p);this.scaleX=i.w/this.picPos.iw,this.scaleY=i.h/this.picPos.ih;var o=((this.pos.y1||0)+(this.pos.y3||0))/2-this.picPos.ih/2,a=((this.pos.x1||0)+(this.pos.x3||0))/2-this.picPos.iw/2;this.pos.x=a,this.pos.y=o,this.pos.w=this.picPos.iw,this.pos.h=this.picPos.ih;var s=this.parsePicRotate(this.pos);s&&(this.matrix=s)}return!0},t.prototype.parsePPT=function(e){var t=0,r=e.curPage%e.config.renderInfoRn;e.config.customPnRn&&e.curPage>e.config.startPage&&(r=(e.curPage-e.config.startPage)%e.config.renderInfoRn),t=0===r?e.config.renderInfoRn:r;var n=e.renderInfo.urls[t-1];if(!n)return!1;e.config.useProxy&&(n="/img/content?requrl="+encodeURIComponent(n)),this.src=n;var i=e.renderInfo.pageInfo,o=i.width,a=i.height;return this.pos={x:0,y:0,w:o*e.renderScale,h:a*e.renderScale,z:0,opacity:1},this.picPos={ix:0,iy:0,iw:o,ih:a},!0},t}(ee);var le=0,ue=[],he=0;function pe(e,t){var r,n=t.config.keywordInfo,i=t.curPage,o=[],a=[],s=!1,c=e.content;if(i!==le&&(ue=n.keywordList,he=0),!c||!ue.length)return{isMatch:s,subNodes:o,keywords:a};le=i;for(var d=-1,l=0,u=b([],v(e.chars)),h=0,p=0,f=function(){var t=ue.join("|"),i=new RegExp(t,"g");if((d=t?c.search(i):-1)>-1){var f=(null===(r=c.match(i))||void 0===r?void 0:r[0])||"",m=c.split(f),v=0;if(p=m[0].length,m[0]){for(var b=0;b<m[0].length;b++)v+=u[b].rect.width;var k=u[m[0].length-1].rect;h=k.left+k.width;var w=Object.assign({},e,{content:m[0]||"",pos:g(g({},e.pos),{w:v,x:u[0].rect.left}),chars:u.splice(0,m[0].length)});o.push(w)}v=0;var x=f.length||d;for(b=0;b<x;b++)v+=u[b].rect.width;var y=u[0].rect.left;if(h&&y<h){var P=e.letterSpacing||0;k=u[x-1].rect;y=h-P*p,h=k.left+k.width,p+=x}var I=Object.assign({},e,{content:f||"",pos:g(g({},e.pos),{w:v,x:y}),chars:u.splice(0,f.length),color:n.color,backgroundColor:n.backgroundColor,keyword:f||""});l+=m[0].length+f.length,o.push(I),m.splice(0,1),c=m[0]&&m.join(f)||"",s=!0,a.push(g(g({},I.pos),{text:f||"",scaleX:e.scaleX})),ue=ue.filter((function(e){return e!==f})),he++}else{if(l){var T=0;for(b=0;b<u.length;b++)T+=u[b].rect.width;y=u[0].rect.left;if(h&&y<h){P=e.letterSpacing||0;y=h-P*p}var C=Object.assign({},e,{content:c,chars:u,pos:g(g({},e.pos),{w:T,x:y})});o.push(C)}else o.push(e);c=""}};c;)f();return{isMatch:s,subNodes:o,keywords:a,matchNum:he}}function fe(e,t){var r,n=[],i=["Microsoft YaHei","Hiragino Sans GB","arial","helvetica","clean"],o=(null===(r=e.config)||void 0===r?void 0:r.pageInfoWidth)||t.pageInfo.width,a=40,s=[],c=document.createElement("canvas").getContext("2d"),d=i.join(",")||"";c.font="normal normal 18px "+d;var l=function(e,t,r,n,o){var a=new se;return a.content=e,a.pos={x:t,y:r,w:n,h:18,z:0,opacity:1},a.chars=o,a.fontFamily=i,a.fontSize=18,a.fontStyle="normal",a.fontWeight="normal",a};return e.body.forEach((function(e){if("txt"===e.t){var t=e.c;(t=function(e){var t=document.createDocumentFragment().appendChild(document.createElement("div"));return t.innerHTML="<p>"+e+"</p>",t.innerText}(t)).split("\n").forEach((function(e){if(e&&""!==e.trim()){for(var t=ne(e),r="",i=[],d=40,u=function(e){var t={text:r,rect:{top:a,left:40,width:d,height:18},chars:i,nodes:[e]};s.push(t)},h=0;h<t.length;h++){var p=c.measureText(t[h]);if(d+p.width<o-40){if(r+=t[h],i.push({text:t[h],rect:{top:a,left:d,width:p.width,height:18}}),d+=p.width,h===t.length-1){var f=l(r,40,a,d-40,i);n.push(f),u(f),r="",i=[],d=40,a=a+10+18}}else{f=l(r,40,a,d-40,i);n.push(f),u(f),r=t[h],i=[{text:t[h],rect:{top:a+10+18,left:40,width:p.width,height:18}}],d=40+p.width,a=a+10+18}}a+=20}}))}})),{nodes:n,height:a+40-18,textLines:s}}var ge,me=function(){function e(){this.requestPromise=null}return e.prototype.send=function(e){var t=this;return this.requestPromise||(this.requestPromise=new Promise((function(r,n){i.a.get(e.path,{params:e.params}).then((function(e){r(e),t.clean()})).catch((function(e){n(e),t.clean()}))}))),this.requestPromise},e.prototype.sendPromise=function(e){var t=this;if(this.requestPromise)return this.requestPromise;if("function"!=typeof e)throw new Error("aPromiseFn must be a function");var r=e();return this.requestPromise=new Promise((function(e,n){r.then((function(r){e(r),t.clean()})).catch((function(e){n(e),t.clean()}))})),this.requestPromise},e.prototype.clean=function(){this.requestPromise=null},e}();!function(e){e[e.Normal=0]="Normal",e[e.Error=1]="Error"}(ge||(ge={}));var ve,be,ke=function(e){function t(t){var r=e.call(this,t)||this;return r.nodes=[],r.lines=[],r.renderImageCanvas=null,r.isLazy=!1,r.customFonts=[],r.customFontLoaded=!1,r.picSrc="",r.status=O.Inited,r.renderedCount=0,r.isResetToDamageMode=!1,r.keywordMatchNum=0,r.jsonPageInfo=null,r.readerStartTime=0,r.jsonPageWidth=0,r.isLazy=t.isLazy||!1,r.measureCtx=t.measureCtx,r.updateStatus(O.Inited),r}return d(t,e),t.prototype.render=function(){var e,t=this;if(this.status!==O.Loading&&this.status!==O.Rendering){this.updateStatus(O.Loading);var r=(null===(e=this.nodes)||void 0===e?void 0:e.length)>0;if(this.renderDocData.readerType===T.xreader)r?this.startRender():this.loadXreaderContent().then((function(){return t.startRender()})).catch((function(){t.updateStatus(O.Error),t.emitError(R.PageContentNotLoad,"load xreader content error")}));else if(this.renderDocData.readerType===T.ppt||this.renderDocData.readerType===T.xmind)this.readerInfoDataSource.requestIfNeed(this.index).then((function(e){e?(t.readerInfo=e,r||t.parsePPT(),t.startRender()):(t.updateStatus(O.Error),t.emitError(R.PageContentNotLoad,"load ppt content error"))}));else{if(this.renderDocData.readerType!==T.txt)throw new Error("[creader] the doc invalid: "+this.renderDocData.readerType);var n=function(){t.updatePageHeight(t.pageHeight),t.startRender()};r?n():this.loadTxtContent().then((function(){return n()})).catch((function(){t.updateStatus(O.Error),t.emitError(R.PageContentNotLoad,"load txt content error")}))}}},t.prototype.renderResizeCanvas=function(){var e=this.selectorId("creader-canvas"),t=document.getElementById(e);if(t&&0===t.width){var r=this.config.dpr;this.isResetToDamageMode?(t.width=this.readerInfo.pageInfo.width*r,t.height=this.readerInfo.pageInfo.height*r):(t.width=this.pageWidth*r,t.height=this.pageHeight*r),t.getContext("2d").setTransform(this.config.dpr,0,0,this.config.dpr,0,0),this.render()}},t.prototype.clearCanvas=function(){var e=this.selectorId("creader-canvas"),t=document.getElementById(e);t&&(t.width=0,t.height=0),this.renderImageCanvas&&(this.renderImageCanvas.width=0,this.renderImageCanvas.height=0),this.updateStatus(O.Cleared)},t.prototype.loadXreaderContent=function(){var e=this;return new Promise((function(t,r){var n={};e.readerInfoDataSource.requestIfNeed(e.index).then((function(t){var r,n;e.readerInfo=t;var i=null===(n=null===(r=null==t?void 0:t.jsons)||void 0===r?void 0:r.find)||void 0===n?void 0:n.call(r,(function(t){return t.pageIndex===e.index}));if(null==i?void 0:i.url){var o=[e.loadFontCss(),e.loadJsonContent(null==i?void 0:i.url)];return Promise.all(o)}return Promise.reject("can not find json url at page "+e.index)})).then((function(t){var r,i=t[1];if(!i)return e.emitError(R.XreaderJsonGetFailed,"jsonp get json error"),Promise.reject("can not load json content at page "+e.index);if(e.customFonts=Object.keys((null==i?void 0:i.font)||{}),n=i,i.page&&i.page.pw&&i.page.ph&&0===e.jsonPageWidth){e.jsonPageWidth=i.page.pw;var o=e.pageUnDamageScale();if(o&&1!==o){var a=i.page.ph*o;if(Math.abs(a-e.pageHeight)>1){e.pageHeight=a;var s=document.getElementById(e.selectorId("creader-canvas"));if(s){var c=e.config.dpr;s.style.height=a+"px",s.width=e.pageWidth*c,s.height=e.pageHeight*c,s.getContext("2d").setTransform(e.config.dpr,0,0,e.config.dpr,0,0)}}}}return(null===(r=null==n?void 0:n.body)||void 0===r?void 0:r.find((function(e){return"pic"===e.t})))&&(e.picSrc=ce(e.readerInfo,e.index)),Promise.all([e.loadImageIfNeed(e.picSrc),e.lazyLoadCustomFont()])})).then((function(){e.parseXreader(n),e.clipPageTop(n.page),t(!0)})).catch((function(e){r(e)}))}))},t.prototype.loadTxtContent=function(){var e=this;return new Promise((function(t,r){e.readerInfoDataSource.requestIfNeed(e.index).then((function(t){return t?(e.readerInfo=t,t):Promise.reject("[creader] reader info is null")})).then((function(t){var r,n,i,o,a=(r=t,n=e.index,i=r.md5sum.substring(1),o=["pn="+n,"rn=1","type=txt","spr=0","rsign="+r.rsign].join("&"),k+"/text/"+r.docId+"?"+i+"&"+o);return e.config.useProxy?B({url:"/doc/textcontent",page:e.index,params:{requrl:a}}):L({url:a,page:e.index})})).then((function(n){if(n&&Array.isArray(n)){var i=fe({body:n[0].parags,page:e.index,config:e.config},e.readerInfo);i?(e.nodes=i.nodes,e.pageHeight=i.height,e.lines=i.textLines,t(!0)):r()}})).catch((function(e){r(e)}))}))},t.prototype.loadJsonContent=function(e){var t=null;return t=this.config.useProxy?M.bind(this,{url:e,page:this.index}):N.bind(this,{url:e,page:this.index,cssPrefix:this.config.cssPrefix}),this.jsonContentRequestOnce||(this.jsonContentRequestOnce=new me),this.jsonContentRequestOnce.sendPromise(t)},t.prototype.loadImageIfNeed=function(e){var t=this;if(!this.readerInfo)return Promise.reject("can not find readerInfo");if(this.renderImage||!e)return Promise.resolve();var r=e;return new Promise((function(e){t.config.useProxy&&(r="/img/content?requrl="+encodeURIComponent(r)),Q(r).then((function(r){t.renderImage=r,e(r)})).catch((function(){e(!1)}))}))},t.prototype.lazyLoadCustomFont=function(){var e=this;return!!!(this.customFonts&&this.customFonts.length>0)||this.customFontLoaded?Promise.resolve(!0):new Promise((function(t){var r=e.customFonts.map((function(e){return new a.a(e).load(null,200)}));Promise.all(r).then((function(){e.customFontLoaded=!0,t(!0)})).catch((function(r){e.customFontLoaded=!0,e.emitError(R.LayoutFontFailed,"xreader font load failed"),t(!1)}))}))},t.prototype.loadFontCss=function(){if(!this.readerInfo)return Promise.reject("can not find readerInfo");if(!this.readerInfo.ttfs||0===this.readerInfo.ttfs.length)return Promise.resolve();var e,t=function(e,t){var r=e.pageInfo.version;if(e.htmlBcs&&e.ttfs){var n=e.ttfs.find((function(e){return e.pageIndex===t}));if(!n)return;var i=["pn="+t,"t="+(y()?"eot":"ttf"),"rn=1","v="+r].join("&");return k+"/pipe/"+e.storeId+"?"+i+n.params}}(this.readerInfo,this.index);return t?(this.config.useProxy&&(t="/css/content?requrl="+encodeURIComponent(t)),e=t,new Promise((function(t){var r=document.createElement("link");r.rel="stylesheet",r.href=e,document.head.appendChild(r),r.onload=function(){t(!0)},r.onerror=function(){t(!1)}}))):Promise.resolve()},t.prototype.pageDamageScale=function(){return this.config.width<=0?1:this.config.width/this.pageWidth},t.prototype.pageUnDamageScale=function(){var e=this.jsonPageWidth||this.readerInfo.pageInfo.width;if(e===this.pageWidth||0===e||0===this.pageWidth)return 1;var t=this.pageWidth/e;return t=+t.toFixed(4)},t.prototype.prepareReader=function(e){var t;void 0===e&&(e=!1);var r=X.call(this),n=$.call(this,e);if(this.renderDocData.readerType===T.ppt&&this.config.pptPadding){var i=this.config.pptPadding,o=i.top,a=i.right,s=i.bottom,c=i.left;n.style.padding=o+"px "+a+"px "+s+"px "+c+"px"}return this.rootEl.appendChild(r),r.appendChild(n),r.appendChild(G.call(this)),this.renderContext||(this.renderContext={canvas:n,config:this.config}),null===(t=this.emitter)||void 0===t||t.emit("pageReady",this),!0},t.prototype.updatePageWidth=function(e){if(!(e<=0)){var t=this.pageDamageScale(),r=document.getElementById(this.selectorId("pageNo")),n=document.getElementById(this.selectorId("creader-canvas"));r&&n&&(n.style.width=this.pageWidth*t+"px",n.style.height=this.pageHeight*t+"px",r.style.width=this.pageWidth*t+"px")}},t.prototype.updatePageInfoWidth=function(e,t){var r=this;if(void 0===t&&(t=!1),!(e<=0||e===this.pageWidth)){var n=e/this.pageWidth;this.pageWidth=e,this.pageHeight=this.pageHeight*n;var i=this.renderDocData.readerType!==T.ppt,o=function(e){r.nodes.forEach((function(t){t.changeScale(e,i)}))},a=function(e){var t=r.config.dpr,n=e.getContext("2d");n.clearRect(0,0,e.width,e.height),e.width=r.pageWidth*t,e.height=r.pageHeight*t,n.setTransform(t,0,0,t,0,0),e.style.width=r.pageWidth+"px",e.style.height=r.pageHeight+"px"};if(t)o(n);else{var s=document.getElementById(this.selectorId("pageNo")),c=document.getElementById(this.selectorId("creader-canvas")),d=document.getElementById(this.selectorId("creader-interative-canvas"));if(!s||!c)return;a(c),d&&a(d),s.style.width=this.pageWidth+"px",o(n),this.status!==O.Cleared&&(this.renderImageCanvas=null,this.render())}}},t.prototype.cloneThumbCanvas=function(e){if(0===e)return null;if(!this.nodes||0===this.nodes.length)return null;var t=e/this.pageWidth,r=document.createElement("canvas");return r.width=.4*this.pageWidth,r.height=.4*this.pageHeight,r.style.width=e+"px",r.style.height=this.pageHeight*t+"px",r.style.position="absolute",r.style.left="0",r.style.top="0",r.style.right="0",r.style.bottom="0",r.getContext("2d").setTransform(.4,0,0,.4,0,0),this.drawThumbImage(0,{canvas:r,config:this.config}),r},t.prototype.selectorId=function(e){return this.config.cssPrefix?this.config.cssPrefix+"-"+e+"-"+this.index:e+"-"+this.index},t.prototype.updateStatus=function(e){var t=this;(this.status=e,e===O.Loading||e===O.Rendering)?this.needAddSkeleton()&&(this.removeErrorEl(),this.rootEl.querySelector("#"+this.selectorId("creader-page-loading"))||this.rootEl.querySelector("#"+this.selectorId("pageNo")).appendChild(H.call(this))):e===O.Error?(F.call(this),this.addErrorIfNeed(),this.retryCount<2?(this.retryCount++,setTimeout((function(){t.render()}),200)):this.emitError(R.XreaderMaxRetry,"get json error")):e===O.Rendered&&(this.removeErrorEl(),F.call(this))},t.prototype.needAddSkeleton=function(){if(!this.config.limitSkeletonPageRange)return!0;var e=this.config.limitSkeletonPageRange.start,t=this.config.limitSkeletonPageRange.end;return!e&&!t||(t||(t=this.renderDocData.showPage+1),!(this.index>=e&&this.index<t))},t.prototype.drawNode=function(e,t,r){var n=this;if("word"===e.type)(new Y).draw(e,t),r&&r(!0);else if("pic"===e.type){var i=new Z,o=function(o){n.renderImageCanvas&&n.renderImageCanvas.width||n.isResetToDamageMode||[T.ppt,T.xmind].includes(n.renderDocData.readerType)||(n.renderImageCanvas=n.resizeImage(o)),i.drawWithImage(e,t,n.renderImageCanvas||o),r&&r(!0)};this.renderImage?o(this.renderImage):Q(e.src).then((function(e){n.renderImage=e,o(e)})).catch((function(){r&&r(!1)}))}},t.prototype.drawThumbImage=function(e,t){var r=this,n=this.nodes[e];if(n){this.drawNode(n,t,(function(){e+=1,r.drawThumbImage(e,t)}))}},t.prototype.cleanCanvasForce=function(){var e=document.getElementById(this.selectorId("creader-canvas"));e&&e.getContext("2d").clearRect(0,0,e.width,e.height)},t.prototype.startRender=function(){var e,t=this;this.updateStatus(O.Rendering),null===(e=this.emitter)||void 0===e||e.emit("pageBeforeRender",this);var r=function(){t.cleanCanvasForce(),t.nodes.forEach((function(e){t.drawNode(e,t.renderContext)})),function(){var e,r;t.renderedCount+=1,t.updateStatus(O.Rendered),null===(e=t.emitter)||void 0===e||e.emit("pageRendered",t),1===t.index&&1===t.renderedCount&&(null===(r=t.emitter)||void 0===r||r.emit("firstScreenRendered",t.renderDocData))}()},n=this.getPicUrl();this.loadImageIfNeed(n).then((function(){r()})).catch((function(){r()}))},t.prototype.getPicUrl=function(){var e="";if(this.renderDocData.readerType===T.ppt||this.renderDocData.readerType===T.xmind){var t=this.nodes[0];e=null==t?void 0:t.src}else this.renderDocData.readerType===T.xreader&&(e=this.picSrc);return e},t.prototype.resizeImage=function(e){var t=this.pageUnDamageScale();if(1===t)return null;var r=e.width*e.height;if(r/1024/1024>10)return this.toDamageScaleMode(),this.emitError(R.LayoutBigImage,"xreader image to big "+r),null;var n=e.width*t,i=e.height*t,o=document.createElement("canvas");return o.width=n,o.height=i,o.getContext("2d").drawImage(e,0,0,n,i),o},t.prototype.toDamageScaleMode=function(){this.isResetToDamageMode=!0;var e=1/this.pageUnDamageScale(),t=this.renderDocData.readerType!==T.ppt;this.nodes.forEach((function(r){r.changeScale(e,t)})),this.lines.forEach((function(t){t.rect.top*=e,t.rect.left*=e,t.rect.width*=e,t.rect.height*=e}));var r=document.getElementById(this.selectorId("creader-canvas"));if(r){var n=this.config.dpr;r.width=this.readerInfo.pageInfo.width*n,r.height=this.readerInfo.pageInfo.height*n,r.getContext("2d").setTransform(n,0,0,n,0,0)}},t.prototype.parsePPT=function(){var e,t;null===(e=this.emitter)||void 0===e||e.emit("pageBeforeParser",this),this.nodes=function(e){if(!e.renderInfo)throw new Error("renderInfo canot be nil");var t=[],r=new de;return r.parsePPT(e)&&t.push(r),t}({curPage:this.index,renderInfo:this.readerInfo,config:this.config,renderScale:this.pageUnDamageScale()}),null===(t=this.emitter)||void 0===t||t.emit("pageParsered",this)},t.prototype.parseXreader=function(e){var t,r;null===(t=this.emitter)||void 0===t||t.emit("pageBeforeParser",this);var n=function(e,t){var r;if(!e.renderInfo)throw new Error("renderInfo canot be nil");if(!e.body)throw new Error("body cannot be nul");if(!t)throw new Error("measureCtx must not null");var n=[],i=!1,o=null,a=null,s=[],c=new Map,d=!1;return(null===(r=e.config.keywordInfo.keywordList)||void 0===r?void 0:r.length)&&(d=!0),e.body.forEach((function(r){var l,u,h=null,p=!1;if("word"===r.t){if(p=(h=new se(t)).parse(r,e)){a&&0===Math.abs(a.pos.y/2-h.pos.y/2)&&o?(o.chars=o.chars.concat(h.chars),o.rect.height=Math.max(o.rect.height,h.pos.h),o.text+=h.content,o.nodes.push(h)):(u=(l=h).chars,o={rect:{top:l.pos.y,left:l.pos.x,width:l.pos.w,height:l.pos.h},chars:u,text:l.content,nodes:[l]},s.push(o));var f=o.chars[0],g=o.chars[o.chars.length-1];f&&g&&(o.rect.width=g.rect.left+g.rect.width-f.rect.left),a=h}if(e.config.keywordEnable&&d&&p){var m=pe(h,e),k=m.isMatch,w=m.subNodes,x=m.keywords,y=m.matchNum,P=void 0===y?0:y;if(k){if(w.forEach((function(e){n.push(e)})),x.length){var I=s.length,T=s[+I-1];T.keywords?T.keywords=b(b([],v(T.keywords)),v(x)):T.keywords=x}c.set(e.curPage,P)}else n.push(h)}else p&&n.push(h)}else{if("pic"!==r.t)throw"the node type error "+r.t;p=(h=new de).parse(r,e),i=!0,p&&n.push(h)}})),n.sort((function(e,t){return+e.pos.z-+t.pos.z})),s.sort((function(e,t){return e.rect.top-t.rect.top})),{contents:n,textLines:s,isHavePic:i,keywordMatchNum:c}}({fonts:e.font,styles:e.style,body:e.body,page:e.page,curPage:this.index,renderInfo:this.readerInfo,config:this.config,renderScale:this.pageUnDamageScale()},this.measureCtx);this.customFonts=Object.keys(e.font||{}),this.nodes=n.contents,this.lines=n.textLines,this.jsonPageInfo=e.page,this.keywordMatchNum=n.keywordMatchNum.get(this.index)||0,null===(r=this.emitter)||void 0===r||r.emit("pageParsered",this),e.body&&0!==e.body.length||this.emitError(R.XreaderBodyNull,"body null")},t.prototype.clipPageTop=function(e){if(e&&this.config.firstPageTopPadding>=0&&1===this.index){var t=e.cy-this.config.firstPageTopPadding;if(t<0)return;var r=this.rootEl.querySelector("#"+this.selectorId("pageNo"));r&&(r.style.marginTop=-t*this.pageUnDamageScale()+"px")}},t.prototype.updatePageHeight=function(e){var t=this,r=this.config.dpr,n=this.pageDamageScale(),i=function(i){var o=document.getElementById(t.selectorId(i));o&&(o.width=t.pageWidth*r,o.height=e*r,o.style.width=t.pageWidth*n+"px",o.style.height=e*n+"px",o.getContext("2d").setTransform(r,0,0,r,0,0))};i("creader-canvas"),i("creader-interative-canvas")},t}(J),we=function(e){function t(t){var r=e.call(this,t)||this;return r.updateStatus(O.Inited),r}return d(t,e),t.prototype.render=function(){var e=this;this.updateStatus(O.Loading),this.loadHtmlData().then((function(t){var r,n,i,o;if(t){var a=document.getElementById(e.selectorId("pageNo"));if(!a)return;a.innerHTML=t,e.updateStatus(O.Rendered),null===(n=null===(r=e.emitter)||void 0===r?void 0:r.emit)||void 0===n||n.call(r,"firstScreenRendered",e.renderDocData),null===(o=null===(i=e.emitter)||void 0===i?void 0:i.emit)||void 0===o||o.call(i,"pageRendered",e)}else e.updateStatus(O.Error)})).catch((function(){e.updateStatus(O.Error)}))},t.prototype.loadHtmlData=function(){var e=this;return this.config.SSRContent?Promise.resolve(z(this.config.SSRContent)):new Promise((function(t,r){e.readerInfoDataSource.requestIfNeed(e.index).then((function(t){return t?(e.readerInfo=t,t):Promise.reject("[creader] reader info is null")})).then((function(t){var n,o=t.editorDocHtmlUrl;return e.config.useProxy?B({url:"/doc/textcontent",page:e.index,params:{requrl:o}}):o?(n={url:o,page:e.index},new Promise((function(e,t){i.a.get(n.url).then((function(r){r&&r.data?e(r.data):t(r)}))}))):void r("bosurl is null")})).then((function(e){if(e)return t=e,new Promise((function(e){i.a.post("/common/htmlaudit",{html:t}).then((function(r){var n,i;0===(null===(n=null==r?void 0:r.data)||void 0===n?void 0:n.code)&&(null===(i=null==r?void 0:r.data)||void 0===i?void 0:i.html)?e(r.data.html):e(z(t))})).catch((function(){e(z(t))}))}));var t;throw Error("html content null")})).then((function(e){t(e)})).catch((function(e){r(e)}))}))},t.prototype.prepareReader=function(){var e,t=X.call(this);return this.rootEl.appendChild(t),this.rootEl.appendChild(G.call(this)),null===(e=this.emitter)||void 0===e||e.emit("pageReady",this),!0},t.prototype.selectorId=function(e){return this.config.cssPrefix?this.config.cssPrefix+"-"+e+"-1":e+"-1"},t.prototype.updateStatus=function(e){var t=this;if(this.status=e,e===O.Loading||e===O.Rendering){if(this.needAddSkeleton()&&(this.removeErrorEl(),!document.getElementById(this.selectorId("creader-page-loading")))){var r=document.getElementById(this.selectorId("pageNo"));if(!r)return;r.style.height=this.pageHeight+"px",r.appendChild(H.call(this))}}else e===O.Error?(F.call(this),this.addErrorIfNeed(),this.retryCount<2?(this.retryCount++,setTimeout((function(){t.render()}),200)):this.emitError(R.XreaderMaxRetry,"get json error")):e===O.Rendered&&(this.removeErrorEl(),F.call(this),this.changePageElHeight(0))},t.prototype.needAddSkeleton=function(){return!this.config.limitSkeletonPageRange},t}(J),xe=function(){function e(e){this.datas=new Map,this.loading=!1,this.docId=e.docId,this.renderType=e.renderType,this.config=e.config,this.emitter=e.emitter}return e.prototype.setDataForKey=function(e,t){e&&t&&this.datas.set(e,t)},e.prototype.renderInfoAtPageIndex=function(e){var t,r=this.keyForPage(e);return null===(t=this.datas.get(r))||void 0===t?void 0:t.readerInfo},e.prototype.currentRn=function(){return b([],v(this.datas.keys()))[this.datas.size-1]},e.prototype.requestIfNeed=function(e,t){var r,n,i=this;void 0===t&&(t=!1);var o=this.keyForPage(e),a=this.datas.get(o);if(a){if((new Date).getTime()-a.startTime>3e6)a.startTime=(new Date).getTime();else if(a.readerInfo&&!t)return Promise.resolve(a.readerInfo)}else a={startTime:(new Date).getTime(),requestOnce:new me},this.setDataForKey(o,a);a.requestOnce||(a.requestOnce=new me);var s=e;this.config.customPnRn&&(s=((null===(n=null===(r=this.datas.get(o-1))||void 0===r?void 0:r.readerInfo)||void 0===n?void 0:n.showPage)||0)+1);var c=A.bind(this,{docId:this.docId,type:this.renderType,pn:s,rn:this.config.renderInfoRn},this.config.readerInfoAPI);return a.requestOnce.sendPromise(c).then((function(e){var t;return e&&a?(a.readerInfo=e,null===(t=i.emitter)||void 0===t||t.emit("readerInfoUpdated",e),e):null})).catch((function(){return null}))},e.prototype.keyForPage=function(e){return this.config.customPnRn?e<=this.config.startPage?1:Math.ceil((e-this.config.startPage)/this.config.renderInfoRn)+1:Math.ceil(e/this.config.renderInfoRn)},e}();!function(e){e.Up="up",e.Down="down"}(ve||(ve={})),function(e){e.Up="up",e.Down="down",e.Move="move"}(be||(be={}));var ye=0;var Pe=function(){function e(e,t){if(this.selectionColor="rgba(17,119,255,0.3)",this.startPoint=null,this.endPoint=null,this.lines=[],this.page=e,this.lines=e.lines||[],t)this.startPoint=t;else{var r=this.firstChar();r&&(this.startPoint={x:r.rect.left,y:r.rect.top})}var n=document.getElementById(this.page.selectorId("creader-interative-canvas"));if(!n){var i=document.getElementById(this.page.selectorId("creader-canvas"));(n=V.call(e,"creader-interative-canvas")).width=i.width/e.config.dpr,n.height=i.height/e.config.dpr;var o=document.getElementById(e.selectorId("pageNo"));o?o.appendChild(n):console.error("[creader] page dom not found",e)}this.interactiveCanvas=n}return e.prototype.lastChar=function(){var e,t=this.lines[this.lines.length-1];return null===(e=null==t?void 0:t.chars)||void 0===e?void 0:e[t.chars.length-1]},e.prototype.firstChar=function(){var e,t=this.lines[0];return null===(e=null==t?void 0:t.chars)||void 0===e?void 0:e[0]},e.prototype.drawTextSelect=function(e){if(this.endPoint=e,this.startCursor=this.geCursor2DLoction(this.startPoint),!this.startCursor){var t=this.geCursor2DLoction(e);if(!t)return!1;this.startPoint=e,this.startCursor=t}var r=this.geCursor2DLoction(e);return r&&(this.endCursor=r),this.render(),!0},e.prototype.drawToLastChar=function(){var e;if(null===(e=this.lines)||void 0===e?void 0:e.length){this.clearContext();var t=this.lines[this.lines.length-1];this.endCursor={lineIndex:this.lines.length-1,charIndex:t.chars.length?t.chars.length-1:0},this.render()}},e.prototype.drawAll=function(){this.clearContext();var e=this.lines[this.lines.length-1];this.startCursor={lineIndex:0,charIndex:0},this.endCursor={lineIndex:this.lines.length-1,charIndex:e.chars.length?e.chars.length-1:0},this.render()},e.prototype.exit=function(){var e;this.startCursor=void 0,this.endCursor=void 0,this.startPoint=null,this.interactiveCanvas&&(null===(e=this.interactiveCanvas.parentNode)||void 0===e||e.removeChild(this.interactiveCanvas))},e.prototype.changeLocation=function(){return this.startCursor&&this.endCursor?{startLineIndex:Math.min(this.startCursor.lineIndex,this.endCursor.lineIndex),endLineIndex:Math.max(this.startCursor.lineIndex,this.endCursor.lineIndex),startCharIndex:Math.min(this.startCursor.charIndex,this.endCursor.charIndex),endCharIndex:Math.max(this.startCursor.charIndex,this.endCursor.charIndex)}:{startLineIndex:0,endLineIndex:0,startCharIndex:0,endCharIndex:0}},e.prototype.render=function(){if(!this.startCursor||!this.endCursor)return!1;var e=this.interactiveCanvas.getContext("2d");e.fillStyle=this.selectionColor;var t=this.startCursor.lineIndex,r=this.endCursor.lineIndex;if(r>t||r===t&&this.endCursor.charIndex>=this.startCursor.charIndex)for(var n=t;n<=r;n++){var i=this.lines[n],o=n===t?i.chars[this.startCursor.charIndex]:i.chars[0],a=n===r?i.chars[this.endCursor.charIndex]:i.chars[i.chars.length-1];this.drawRect(e,{left:o.rect.left,top:o.rect.top,width:a.rect.left+a.rect.width-o.rect.left,height:i.rect.height})}else if(r<t||r===t&&this.endCursor.charIndex<this.startCursor.charIndex)for(n=t;n>=r;n--){i=this.lines[n],o=n===t?i.chars[this.startCursor.charIndex]:i.chars[i.chars.length-1],a=n===r?i.chars[this.endCursor.charIndex]:i.chars[0];this.drawRect(e,{left:a.rect.left,top:a.rect.top,width:o.rect.left+o.rect.width-a.rect.left,height:i.rect.height})}return!0},e.prototype.drawRect=function(e,t){e.fillRect(t.left,t.top,t.width,t.height),e.fill()},e.prototype.isPointInRect=function(e,t){return e.x>=t.left&&e.x<=t.left+t.width&&e.y>=t.top&&e.y<=t.top+t.height},e.prototype.geCursor2DLoction=function(e){if(e){e=this.scalePoint(e);for(var t=0;t<this.lines.length;t++){var r=this.lines[t];if(this.isPointInRect(e,{top:r.rect.top,left:r.rect.left,width:r.rect.width,height:r.rect.height})){for(var n=-1,i=0;i<r.chars.length;i++){var o=r.chars[i];if(this.isPointInRect(e,o.rect))return{lineIndex:t,charIndex:i};e.x>o.rect.left&&(n=i)}return{lineIndex:t,charIndex:-1===n?r.chars.length-1:n}}}}},e.prototype.getSelectedText=function(){var e,t,r,n,i,o,a;if(this.startCursor&&this.endCursor){for(var s=this.changeLocation(),c=s.startLineIndex,d=s.endLineIndex,l=s.startCharIndex,u=s.endCharIndex,h="",p=c;p<=d;p++){var f=this.lines[p];c===d?h=(null===(t=null===(e=f.chars.slice(l,u+1))||void 0===e?void 0:e.map((function(e){return e.text})))||void 0===t?void 0:t.join(""))||"":p===c?h=(null===(n=null===(r=f.chars.slice(l))||void 0===r?void 0:r.map((function(e){return e.text})))||void 0===n?void 0:n.join(""))||"":p===d?(h+="\n",h+=(null===(o=null===(i=f.chars.slice(0,u+1))||void 0===i?void 0:i.map((function(e){return e.text})))||void 0===o?void 0:o.join(""))||""):(h+="\n",h+=(null===(a=f.chars.map((function(e){return e.text})))||void 0===a?void 0:a.join(""))||"")}return h}},e.prototype.clearContext=function(){this.interactiveCanvas.getContext("2d").clearRect(0,0,this.interactiveCanvas.width,this.interactiveCanvas.height)},e.prototype.pointScale=function(){var e=this.page.pageDamageScale();return this.page.isResetToDamageMode&&(e=this.page.config.pageInfoWidth/this.page.readerInfo.pageInfo.width),1/e},e.prototype.scalePoint=function(e){var t=this.pointScale();return 1===t?e:{x:e.x*t,y:e.y*t}},e}(),Ie=function(e){var t=e.target;if(t&&t.id){var r=t.id.split("-");if(r.length>1)return Number(r[r.length-1])}return-1};function Te(){var e=this,t=0,r=0,n=!1,i=!1,o=!1,a=!0,s=0,c=function(e){return window.TouchEvent&&e instanceof TouchEvent&&1===e.touches.length},d=function(e,t){void 0===t&&(t="changedTouches");var r=0,n=0;if(window.TouchEvent&&e instanceof TouchEvent){var i="changedTouches"===t?e.changedTouches:e.targetTouches,o=e.target;if(i&&o){var a=o.getBoundingClientRect(),s=a.x,c=a.y,d=a.width,l=a.height;r=(i[0].clientX-s)/d*o.offsetWidth,n=(i[0].clientY-c)/l*o.offsetHeight}}else r=e.offsetX,n=e.offsetY;return{x:r,y:n}},l=function(l){if(n=!0,!i&&!a){var u=Ie(l),h=e.renderPages[u-1];if(h){var p=e.selectTextMap.get(u);if(p||(p=u===t?new Pe(h,d(l,"targetTouches")):new Pe(h),e.selectTextMap.set(u,p)),!o)if(p.getSelectedText()){if(c(l)&&Date.now()-s<1200)return;c(l)&&l.stopPropagation(),e.emitter.emit("eventTextSelectStart"),o=!0}i=!0,r=u,function(n){e.clearSelectTextCtx();var i=d(n);if(t===r)null==(a=e.selectTextMap.get(t))||a.drawTextSelect(i);else if(t<r)for(var o=t;o<=r;o++){var a=e.selectTextMap.get(o);o===r?null==a||a.drawTextSelect(i):null==a||a.drawToLastChar()}else for(o=r;o<=t;o++){if(!(a=e.selectTextMap.get(o)))return;if(o===r){var s=a.lastChar();a.startPoint={x:s.rect.left+s.rect.width/2,y:s.rect.top},null==a||a.drawTextSelect(i)}else{var c=a.firstChar();a.drawTextSelect({x:c.rect.left,y:c.rect.top})}}}(l),setTimeout((function(){i=!1}),10)}}},u=function(i){var o,s;if(a=!0,e.readerRootEl.removeEventListener("mousemove",l),n){n=!1;var c=e.getSelectContent();if(c&&c.length){var u=Math.min(t,r),p=Math.max(t,r),f=e.selectTextMap.get(u),m=e.selectTextMap.get(p);if(!f||!m)return;var v={text:c,start:{page:u,x:(null===(o=f.startPoint)||void 0===o?void 0:o.x)||0,y:(null===(s=f.startPoint)||void 0===s?void 0:s.y)||0},end:g({page:p},d(i)),renderMode:e.config.renderMode||h.Canvas};e.emitter.emit("eventTextSelected",v)}e.emitter.emit("eventTextSelectEnd")}},p=function(r){if(n=!1,setTimeout((function(){a=!1}),300),r instanceof MouseEvent&&2===r.button)r.preventDefault();else if(!function(e){return window.TouchEvent&&e instanceof TouchEvent&&e.touches.length>1}(r)){s=Date.now();var i=Ie(r);if(e.renderPages[i-1]){e.clearSelectTextCtx(),e.clearSelectText(),o=!1,e.emitter.emit("eventTextCanceled"),t=i,e.readerRootEl.removeEventListener("mousemove",l),e.readerRootEl.addEventListener("mousemove",l),e.readerRootEl.addEventListener("mouseup",u);try{e.readerRootEl.removeEventListener("touchmove",l),e.readerRootEl.addEventListener("touchmove",l),e.readerRootEl.addEventListener("touchend",u)}catch(e){}}}};if(this.config.textSelectEnable){this.readerRootEl.addEventListener("mousedown",p);try{this.readerRootEl.addEventListener("touchstart",p)}catch(e){}}}function Ce(){var e=this,t=0,r=0,n=0,i=0,o=function(o){var a=function(t){var r;if(!t||(null===(r=t.classList)||void 0===r?void 0:r.contains("fr-view")))return null;var n,i=e.rootEl.getBoundingClientRect();return n=t.getBoundingClientRect().top-i.top+e.rootEl.scrollTop,{x:i.width/2,y:n}}(o.target);a&&(t&&r||(t=a.x,r=a.y),n=a.x,i=a.y)};this.config.textSelectEnable&&(this.readerRootEl.addEventListener("mousedown",(function(){e.readerRootEl.addEventListener("mousemove",o)})),this.readerRootEl.addEventListener("mouseup",(function(){e.readerRootEl.removeEventListener("mousemove",o);var a,s=(a=window.getSelection())&&a.rangeCount?a.getRangeAt(0):null;if(s){var c=null==s?void 0:s.toString();if(c&&c.length&&(t||r)){var d={text:c,start:{page:1,x:t,y:Math.min(r,i)},end:{page:1,x:n,y:Math.max(r,i)},renderMode:e.config.renderMode||h.HTML};e.emitter.emit("eventTextSelected",d)}}})))}function Se(){var e=this,t=null,r=null,n=this.config.keywordInfo,i=0,o=function(r){var n=r.pageIndex,i=r.xstart,o=r.xend,a=r.yend,s=r.color,c=r.scaleX,d=e.renderPages[n-1];if(!(t=document.getElementById(d.selectorId("creader-keyword-canvas")))){var l=document.getElementById(d.selectorId("creader-canvas"));(t=V.call(d,"creader-keyword-canvas")).width=l.width/d.config.dpr,t.height=l.height/d.config.dpr;var u=document.getElementById(d.selectorId("pageNo"));u?u.appendChild(t):console.error("[creader] page dom not found",n)}var h=t.getContext("2d");h.save(),h.beginPath(),c&&1!==c&&h.scale(c,1),h.moveTo(i,a),h.lineTo(o,a),h.lineWidth=1,h.strokeStyle=s,h.stroke(),h.restore()},a=function(){t&&(t.getContext("2d").clearRect(0,0,t.width,t.height),t.width=t.width)},s=function(e,t){document.getElementsByClassName("pageNo")[e-1].style.cursor=t},c=function(){var t=(null==r?void 0:r.text)||"";t&&(e.emitter.emit("keywordClickEvent",t),a(),r=null)};this.readerRootEl.addEventListener("mousemove",(function(t){var d=Ie(t),l=e.renderPages[d-1];if(l){d!==i&&(!function(){var t,r=e.renderPages[i-1];if(r){var n=document.getElementById(r.selectorId("creader-keyword-canvas"));n&&(null===(t=n.parentNode)||void 0===t||t.removeChild(n))}}(),i=d);for(var u,h,p={x:t.offsetX,y:t.offsetY},f=l.lines,g=0;g<f.length;g++){var m=f[g];if(u=p,h=m.rect,u.x>=h.left&&u.x<=h.left+h.width&&u.y>=h.top&&u.y<=h.top+h.height){for(var v=m.keywords||[],b=void 0,k=void 0,w=0;w<v.length;w++){var x=v[w];if(k=(b=x.x)+x.w,p.x>=b&&p.x<=k){a();var y={pageIndex:d,xstart:b,xend:k,yend:x.y+x.h,color:n.underlineColor,text:x.text,scaleX:x.scaleX};return o(y),s(d,"pointer"),e.readerRootEl.removeEventListener("click",c),e.readerRootEl.addEventListener("click",c),r=y,!1}a(),s(d,"text"),e.readerRootEl.removeEventListener("click",c),r=null}return!1}a(),s(d,"text"),e.readerRootEl.removeEventListener("click",c),r=null}}}))}var Ee,Re=void 0,Oe=function(){function e(e){var t,r;this.readerDocData={page:0,showPage:0,freePage:0,readerType:T.xreader,pageRenderWidth:0,pageRenderHeight:0,pageOriginalWidth:0},this.lazyPageMap=new Map,this.renderPages=[],this.rootLine="creader-decview",this.selectTextMap=new Map,this.installedPlugins=new Set,this.intersectionObserver=null,this.renderedPageSet=new Set,this.viewportPageSet=new Set,this.config=e.config||w,this.mergeConfig(),this.root=e.root,this.rootEl=this.findRootEl(e),this.readerRootEl=q(this.config),this.rootEl.appendChild(this.readerRootEl),this.docId=e.docId,this.measureCtx=((t=document.createElement("canvas")).width=32,t.height=32,t.getContext("2d")),this.emitter=e.emitter||{all:r=r||new Map,on:function(e,t){var n=r.get(e);n?n.push(t):r.set(e,[t])},off:function(e,t){var n=r.get(e);n&&(t?n.splice(n.indexOf(t)>>>0,1):r.set(e,[]))},emit:function(e,t){var n=r.get(e);n&&n.slice().map((function(e){e(t)})),(n=r.get("*"))&&n.slice().map((function(r){r(e,t)}))}},this.dataSource=new xe({docId:this.docId,renderType:I.HTML,config:this.config,emitter:this.emitter}),this.addPluginEvent()}return e.prototype.beginReader=function(e){var t=this;return new Promise((function(r,n){var i=function(e){if(e){if(!t.isSupport(e))return Re.addToCReader({content:"not support this type doc: "+e.readerType,type:ge.Error}),void console.error("[creader] not support this type doc",e.readerType,e.docId);if(t.mergeReaderInfo(e),t.readerDocData={page:e.page,showPage:e.showPage,freePage:e.freePage,readerType:e.readerType,pageRenderWidth:e.pageInfo.width,pageRenderHeight:e.pageInfo.height,pageOriginalWidth:e.pageInfo.width},t.config.pageInfoWidth>0){t.readerDocData.pageRenderWidth=t.config.pageInfoWidth;var n=t.config.pageInfoWidth/e.pageInfo.width;t.readerDocData.pageRenderHeight=e.pageInfo.height*n}t.config.renderMode!==h.HTML&&t.initIntersectionObserver(),t.emitter.emit("readerInfoFinish",e);var i,o,a,c,d=t.startPageCount();if(t.loadNextPage(d,1),t.config.loadMoreType===l.Scroll)i=t.rootEl,o=200,a=t.didScroll.bind(t),c=s(o,(function(){var e=i.scrollHeight-i.clientHeight-i.scrollTop,t=ye>i.scrollTop?ve.Up:ve.Down;ye=i.scrollTop,a({toBottomHeight:e,toTopHeight:ye,direction:t})})),i.addEventListener("scroll",c);else if(t.config.loadMoreType===l.Fold){var u=function(){var e=document.createElement("div");return e.className="creader-fold",e.innerHTML='<div class="creader-fold__content">\n        <div id="creader-fold-text" class="creader-fold__text"></div>\n    </div>',e}();t.readerRootEl.appendChild(u),t.updateFoldText(),t.addFoldEvent()}r(!0)}else t.emitError(R.RenderInfoLoadFail,"can't get readerInfo")},o=function(e,r){if(void 0===r&&(r=!0),window.IntersectionObserver||t.config.renderMode===h.HTML)i(e);else{(n="https://edu-wenku.bdimg.com/v1/wksmallApp/intersection-observer-min-1638168222751.js",new Promise((function(e){var t=document.getElementsByTagName("head")[0],r=document.createElement("script");r.setAttribute("src",n),r.setAttribute("type","text/javascript"),r.onload=function(){e(!0)},r.onerror=function(){e(!1)},t.appendChild(r)}))).then((function(t){t?i(e):r&&setTimeout((function(){o(e,!1)}),1e3)}))}var n};e?(t.dataSource.setDataForKey(t.dataSource.keyForPage(1),{readerInfo:e,startTime:(new Date).getTime()}),o(e)):t.dataSource.requestIfNeed(1).then((function(e){o(e)})).catch((function(e){t.emitError(R.RenderInfoLoadFail,"request readerInfo error: "+e),n(e)}))}))},e.prototype.resetReader=function(e){var t;this.readerDocData={page:0,showPage:0,freePage:0,readerType:T.xreader,pageRenderWidth:0,pageRenderHeight:0,pageOriginalWidth:0},this.lazyPageMap=new Map,this.renderPages=[],this.docId=e,this.renderedPageSet=new Set,this.viewportPageSet=new Set,this.dataSource=new xe({docId:this.docId,renderType:I.HTML,config:this.config,emitter:this.emitter}),null===(t=this.readerRootEl.parentElement)||void 0===t||t.removeChild(this.readerRootEl),this.readerRootEl=q(this.config),this.rootEl.appendChild(this.readerRootEl),window.__CRjsonpRequestMap||(window.__CRjsonpRequestMap=new Map)},e.prototype.on=function(e,t){return this.emitter.on(e,t)},e.prototype.off=function(e){return this.emitter.off(e)},e.prototype.prepareHtmlPage=function(){if(!this.canNext())return!1;var e=new we({index:1,rootEl:this.readerRootEl,config:this.config,emitter:this.emitter,renderDocData:this.readerDocData,readerInfoDataSource:this.dataSource});e.prepareReader(),e.render(),this.renderPages.push(e)},e.prototype.preparePage=function(e,t){var r;if(e<this.renderPages.length)return!1;if(!this.canNext(t))return!1;var n=this.lazyPageMap.get(e);n?this.lazyPageMap.delete(e):n=new ke({index:e,rootEl:this.readerRootEl,config:this.config,emitter:this.emitter,renderDocData:this.readerDocData,measureCtx:this.measureCtx,readerInfoDataSource:this.dataSource});var i=e<=this.config.startPage;n.prepareReader(i),this.renderPages.push(n),i&&(n.render(),this.renderedPageSet.add(e));var o=document.getElementById(n.selectorId("creader-canvas"));return o&&(null===(r=this.intersectionObserver)||void 0===r||r.observe(o)),!0},e.prototype.prepareLazyPage=function(e){var t,r=this;if(e>this.readerDocData.showPage)return Promise.reject("invalid page index");if(e-1<this.renderPages.length)return Promise.resolve();var n=function(e){return r.readerDocData.readerType===T.xreader?e.loadXreaderContent():r.readerDocData.readerType===T.txt?e.loadTxtContent():Promise.resolve()};if(this.lazyPageMap.has(e)){var i=this.lazyPageMap.get(e);return i&&(null===(t=i.nodes)||void 0===t?void 0:t.length)<=0?n(i):Promise.resolve()}var o=new ke({index:e,rootEl:this.readerRootEl,config:this.config,isLazy:!0,emitter:this.emitter,renderDocData:this.readerDocData,measureCtx:this.measureCtx,readerInfoDataSource:this.dataSource});return this.lazyPageMap.set(e,o),n(o)},e.prototype.loadNextPage=function(e,t){void 0===t&&(t=0);for(var r=this.renderPages.length+1,n=0;n<e&&r+n<=this.readerDocData.showPage;n++)this.readerDocData.readerType===T.html?this.prepareHtmlPage():this.preparePage(r+n);if(t>0&&this.config.lazyLoadEnable){var i=this.renderPages.length+1;for(n=0;n<e&&i+n<=this.readerDocData.showPage;n++)this.prepareLazyPage(i+n)}},e.prototype.gotoPage=function(e){var t=this.readerDocData.showPage;if(e<1)return!1;if(this.config.customPnRn&&(t=e),this.readerDocData.readerType===T.html)return!1;var r=this.renderPages.length;if(e<=r)return!1;for(var n=this.renderPages.length+1,i=e-r,o=0;o<i&&n+o<=t;o++)this.preparePage(n+o,t);return!0},e.prototype.scrollToPage=function(e){if(e.toPageIndex<=0)return console.warn("toPageIndex must more than 0"),!1;var t=this.renderPages[e.toPageIndex-1];if(!t)return!1;var r=document.getElementById(t.selectorId("pageNo"));if(!r)return!1;var n=e.fixedTop||0;if(e.containerSelector){var i=document.querySelector(e.containerSelector);if(!i)return console.warn("not found scroll container"),!1;var o=i.scrollTop||0,a=i.scrollLeft||0;o+=(r.getBoundingClientRect().top||0)-n,i.scrollTo(a,o)}else{var s=document.documentElement,c=document.body;o=s.scrollTop||c.scrollTop||window.pageYOffset||0,a=s.scrollLeft||c.scrollLeft||0;o+=r.getBoundingClientRect().top-n,window.scrollTo(a,o)}return!0},e.prototype.use=function(e,t){var r;return this.installedPlugins.has(e)||(null===(r=e.install)||void 0===r||r.call(e,t),this.installedPlugins.add(e)),e},e.prototype.curPage=function(){return this.renderPages.length},e.prototype.lastPageCount=function(){return this.readerDocData.page-this.curPage()},e.prototype.canNext=function(e){return e||(e=this.readerDocData.showPage),!(this.curPage()+1>this.readerDocData.page)&&this.curPage()+1<=e},e.prototype.viewportPage=function(){var e=Array.from(this.viewportPageSet);if(!e)return 1;var t=e[e.length-1],r=this.renderPages[t-1];return t<1||!r?1:t},e.prototype.startPageCount=function(){return this.readerDocData.readerType===T.ppt||this.readerDocData.readerType===T.xmind?Math.min(this.config.pptStartPage,this.readerDocData.showPage):Math.min(this.config.startPage,this.readerDocData.showPage)},e.prototype.setViewerMode=function(e,t){var r=this;if(void 0===t&&(t=!1),this.config.viewerMode===e)return!1;this.config.viewerMode=e;var n=this.pageViewerCount();return t?this.readerRootEl.style.width=this.readerDocData.pageRenderWidth*n+"px":this.setPageInfoWidth(this.readerDocData.pageRenderWidth/n),this.renderPages.forEach((function(e){var t=r.rootEl.querySelector("#"+e.selectorId("creader-canvas"));if(t){var i=e.pageDamageScale();if(t.style.width=e.pageWidth*i+"px",t.style.height=e.pageHeight*i+"px",n>1)t.style.padding="0";else if(r.config.pptPadding){var o=r.config.pptPadding,a=o.top,s=o.right,c=o.bottom,d=o.left;t.style.padding=a+"px "+s+"px "+c+"px "+d+"px"}}})),!0},e.prototype.pageViewerCount=function(){return this.config.viewerMode===f.VDoublePage?2:1},e.prototype.didScroll=function(e){e.toBottomHeight<150&&this.loadNextPage(this.config.foldOpenCount,2),this.emitter.emit("eventScroll",e)},e.prototype.setWidth=function(e){this.config.renderMode!==h.Canvas&&(e<=50||this.config.width===e||(this.config.width=e,this.renderPages.forEach((function(t){t.updatePageWidth(e)}))))},e.prototype.setPageInfoWidth=function(e){var t,r;if(this.config.renderMode===h.Canvas&&!(e<=50)){var n=this.pageViewerCount(),i=e/this.readerDocData.pageRenderWidth;this.readerDocData.pageRenderWidth=e,this.readerDocData.pageRenderHeight*=i,this.readerRootEl.style.width=e*n+"px";var o=function(t){setTimeout((function(){t.updatePageInfoWidth(e,!0)}),0)};try{for(var a=m(this.lazyPageMap.values()),s=a.next();!s.done;s=a.next()){o(s.value)}}catch(e){t={error:e}}finally{try{s&&!s.done&&(r=a.return)&&r.call(a)}finally{if(t)throw t.error}}this.renderPages.forEach((function(t){setTimeout((function(){t.updatePageInfoWidth(e)}),0)}))}},e.prototype.clearSelectTextCtx=function(){b([],v(this.selectTextMap.values())).forEach((function(e){e.clearContext()}))},e.prototype.getPageIndex=function(e){var t=e.target;if(t&&t.id){var r=t.id.split("-");if(r.length>1)return Number(r[r.length-1])}return-1},e.prototype.isSupport=function(e){return!![T.xreader,T.ppt,T.xmind,T.txt,T.html].includes(e.readerType)},e.prototype.getSelectContent=function(){if(this.selectTextMap.size){var e=[],t=b([],v(this.selectTextMap.values()));return t.sort((function(e,t){return e.page.index-t.page.index})),t.forEach((function(t){var r=t.getSelectedText();r&&e.push(r)})),e.join("\n")}},e.prototype.clearSelectText=function(){var e,t;try{for(var r=m(this.selectTextMap.values()),n=r.next();!n.done;n=r.next()){n.value.exit()}}catch(t){e={error:t}}finally{try{n&&!n.done&&(t=r.return)&&t.call(r)}finally{if(e)throw e.error}}this.selectTextMap.clear()},e.prototype.addPluginEvent=function(){var e=this;this.emitter.on("pageBeforeRender",(function(t){e.installedPlugins.forEach((function(e){var r;null===(r=e.pageBeforeRender)||void 0===r||r.call(e,t)}))})),this.emitter.on("pageRendered",(function(t){e.installedPlugins.forEach((function(e){var r;null===(r=e.pageRendered)||void 0===r||r.call(e,t)})),e.config.renderMode===h.Canvas?1===t.index&&1===t.renderedCount&&(e.config.textSelectEnable&&Te.call(e),e.config.keywordEnable&&Se.call(e),e.addContentMenuEvent()):Ce.call(e)})),this.emitter.on("pageBeforeParser",(function(t){e.installedPlugins.forEach((function(e){var r;null===(r=e.pageBeforeParser)||void 0===r||r.call(e,t)}))})),this.emitter.on("pageParsered",(function(t){e.installedPlugins.forEach((function(e){var r;null===(r=e.pageParsered)||void 0===r||r.call(e,t)}))}))},e.prototype.getReaderSet=function(){for(var e=this.config.viewerMode===f.VSignalPage?2:4,t=e,r=e,n=Array.from(this.viewportPageSet),i=n[0],o=n[n.length-1],a=1;a<=t;a++){var s=i-a;s>0&&n.unshift(s)}for(a=1;a<=r;a++){var c=o+a;c<=this.renderPages.length&&n.push(c)}return new Set(n)},e.prototype.initIntersectionObserver=function(){var e=this;this.intersectionObserver=new IntersectionObserver((function(t){var r,n,i,o;t.forEach((function(t){var r,n=t.target;if(n&&(null===(r=n.id)||void 0===r?void 0:r.includes("creader-canvas"))){var i=n.id.split("-"),o=+i[i.length-1];if(e.renderPages[o-1])if(t.isIntersecting?e.viewportPageSet.add(o):e.viewportPageSet.delete(o),e.config.renderFlow===p.UnDestroy){if(!e.renderedPageSet.has(o)){var a=e.renderPages[o-1];a&&a.renderResizeCanvas(),e.renderedPageSet.add(o)}}else e.config.renderFlow===p.Viewport||console.error("[creader] CRRenderFlow value error",e.config.renderFlow)}}));var a=Array.from(e.viewportPageSet);if(a.sort((function(e,t){return e-t})),e.viewportPageSet=new Set(a),e.config.renderFlow===p.Viewport){var s=e.getReaderSet();try{for(var c=m(e.renderedPageSet),d=c.next();!d.done;d=c.next()){var l=d.value;if(!s.has(l))(f=e.renderPages[l-1])&&f.clearCanvas()}}catch(e){r={error:e}}finally{try{d&&!d.done&&(n=c.return)&&n.call(c)}finally{if(r)throw r.error}}try{for(var u=m(s),h=u.next();!h.done;h=u.next()){var f,g=h.value;(f=e.renderPages[g-1])&&f.renderResizeCanvas()}}catch(e){i={error:e}}finally{try{h&&!h.done&&(o=u.return)&&o.call(u)}finally{if(i)throw i.error}}e.renderedPageSet=new Set(s)}}))},e.prototype.updateFoldText=function(){var e,t=this.lastPageCount(),r=document.getElementById("creader-fold-text");if(r)if(this.curPage()>=this.readerDocData.showPage&&t>0)r.innerText="试读已结束， 剩余"+t+"页未读";else if(t>0)r.innerHTML="剩余 "+t+' 页未读，<span class="creader-fold__read-all">继续阅读</span>';else{var n=document.querySelector(".creader-fold");n&&(null===(e=n.parentNode)||void 0===e||e.removeChild(n))}},e.prototype.addFoldEvent=function(){var e=this,t=document.getElementById("creader-fold-text");if(t){var r=function(){e.emitter.emit("foldClicked"),e.config.foldCanOpen&&e.canNext()&&(e.loadNextPage(e.config.foldOpenCount,2),e.updateFoldText())};t.removeEventListener("click",r),t.addEventListener("click",r)}},e.prototype.findRootEl=function(e){var t=null;if("string"==typeof this.root){var r=document.getElementById(e.root);if(!r)throw"The "+e.root+" must be id selector and exist in document, eg: reader-view";t=r}else t=e.root;if(!t)throw"You must provide a root element use root proterty";return t},e.prototype.mergeConfig=function(){(!this.config.pptStartPage||this.config.pptStartPage<=0)&&(this.config.pptStartPage=this.config.startPage||5)},e.prototype.mergeReaderInfo=function(e){e.pageInfo.width||(e.pageInfo.width=945),e.pageInfo.height||(e.pageInfo.height=1336),this.config.customPnRn||(e.readerType===T.xreader&&e.jsons.length<10&&e.jsons.length<e.showPage?e.showPage=e.jsons.length:(e.readerType===T.ppt||e.readerType===T.xmind)&&e.urls.length<10&&e.urls.length<e.showPage?e.showPage=e.urls.length:e.readerType===T.html&&(e.showPage=1,this.config.renderMode=h.HTML))},e.prototype.emitError=function(e,t){this.emitter.emit("error",{code:e,message:t})},e.prototype.addContentMenuEvent=function(){var e=this;this.readerRootEl.addEventListener("contextmenu",(function(t){t.preventDefault(),e.emitter.emit("eventContextMenu",t)}))},e}();!function(e){e[e.RightBottom=0]="RightBottom"}(Ee||(Ee={}));var je=new(function(){function e(){this.fontSize=16,this.edge=50,this.textColor="#000000"}return e.prototype.install=function(e){this.options=e,this.cacheImage=null},e.prototype.pageRendered=function(e){e.config.renderMode===h.Canvas?this.addWatermarkToCanvas(e):this.addWatermarkToDiv(e)},e.prototype.addWatermarkToDiv=function(e){var t=document.getElementById(e.selectorId("pageNo"));if(t){var r=this.options,n=document.createElement("div");n.classList.add("watermark-container"),t.appendChild(n);var i=document.createElement("p");i.classList.add("watermark-text"),i.style.color="#cdcdcd",i.style.marginRight=this.edge+"px";var o=r.text;if(o&&(i.innerText=o),n.appendChild(i),r.imgSrc){var a=document.createElement("img");a.classList.add("watermark-img"),a.src=r.imgSrc,a.style.marginRight=this.edge+"px",n.appendChild(a)}}},e.prototype.addWatermarkToCanvas=function(e){var t,r=this,n=e.renderContext.canvas.getContext("2d");if(n){var i=e.pageWidth,o=e.pageHeight,a=this.options,s=e.config.pageInfoWidth/945,c=0;e.renderDocData.readerType===T.ppt&&(s=1,c=(null===(t=e.config.pptPadding)||void 0===t?void 0:t.right)||0);var d=function(e){if(a.text){var t=a.text;n.save(),n.textBaseline="middle",n.fillStyle=r.textColor,n.font="500 "+r.fontSize*s+"px sans-serif";var d=n.measureText(a.text).width,l=i-d-r.edge*s-c,u=o-e-(r.edge+r.fontSize)*s;n.globalAlpha=.25,n.fillText(t,l,u),n.restore()}};if(a.imgSrc){var l=function(e){var t=(a.imgScale||.2)*s,l=e.width*t,u=e.height*t,h=i-l-r.edge*s-c,p=o-u-r.edge*s;n.drawImage(e,h,p,l,u),a.text&&d(u)};this.cacheImage?l(this.cacheImage):Q(a.imgSrc).then((function(e){r.cacheImage=e,l(e)}))}else a.text&&d(0)}},e}()),De=(new(function(){function e(){}return e.prototype.install=function(e){this.options=e},e.prototype.pageParsered=function(e){if(e instanceof ke)try{this.transform(e)}catch(e){console.log(e)}},e.prototype.calcMatrix=function(e){e.ph;var t,r,n,i,o,a=e.pw,s=e.viewPortMarginInfo,c=e.pageInfo,d=c.ox,l=c.oy,u=s.marginX||0,h=s.marginY||0,p=Math.min(u,d),f=Math.min(h,l);r=c.pw/(c.ow+2*p),n=c.ph/(c.oh+2*f),t=Math.min(r,n),p=Math.min(u,d),f=Math.min(h,l),i=((c.pw/t-c.ow)/2-c.ox)*t,o=((c.ph/t-c.oh)/2-c.oy)*t;var g=a/c.pw;return[t,0,0,t,i*g,o*g]},e.prototype.transform=function(e){var t,r,n=null===(t=this.options)||void 0===t?void 0:t.viewPortMarginInfo;if((null==n?void 0:n.isOpen)&&(null===(r=null==e?void 0:e.jsonPageInfo)||void 0===r?void 0:r.ox)){e.config.firstPageTopPadding=-1;for(var i=this.calcMatrix({pageInfo:e.jsonPageInfo,ph:e.pageHeight,pw:e.pageWidth,viewPortMarginInfo:n}),o=i[0],a=i[3],s=i[4],c=i[5],d=0;d<e.lines.length;++d){var l=e.lines[d];l.rect.left=l.rect.left*o+s,l.rect.top=l.rect.top*a+c,l.rect.width*=o,l.rect.height*=a}for(var u=0;u<e.nodes.length;++u){var h=e.nodes[u];h.pos.x=h.pos.x*o+s,h.pos.y=h.pos.y*a+c,h.pos.w*=o,h.pos.h*=a,h instanceof se&&(h.fontSize*=o,h.letterSpacing*=o,h.chars.forEach((function(e){e.rect.left=e.rect.left*o+s,e.rect.top=e.rect.top*a+c,e.rect.width*=o,e.rect.height*=a})))}}},e}()),r(435),r(5)),Ne=r(4);function Me(){var e,t,r=Object(De.$)(".reader-topbar"),n=Number(r.height())+Number(Object(De.$)(".ql-menubar").height());if(null!==Ne.a&&void 0!==Ne.a&&null!==(e=Ne.a.state)&&void 0!==e&&null!==(t=e.viewUI)&&void 0!==t&&t.screenMode){var i=Object(De.$)(".top-toolbar-wrap");return+Number(i.height())}return n+=Number(Object(De.$)(".search-box-wrapper").outerHeight())}var Le=r(2),Be=r(0),_e=r(7),Ae=r(1),ze=r(14),qe=r(10);function We(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function He(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?We(Object(r),!0).forEach((function(t){Fe(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):We(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Fe(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Ue={name:"AdNewPageCenter",data:function(){return{visible:!0}},computed:He(He(He(He(He(He({},Object(Le.mapState)("userInfo",["isIE"])),Object(Le.mapState)("docInfo",["docId","title"])),Object(Le.mapState)("infrastructure",["eventBus"])),Object(Le.mapState)("vipInfo",["isVip"])),Object(Le.mapState)("ads",["wkAdBlockStatus"])),{},{picUrl:function(){return"https://edu-wenku.bdimg.com/v1/ad/adrec-1663759279471.png"},brandName:function(){var e,t,r,n;return(null==this||null===(e=this.style)||void 0===e||null===(t=e.idea2051)||void 0===t||null===(r=t.item)||void 0===r||null===(n=r[0])||void 0===n?void 0:n.brand_name)||this.showurl},actionLink:function(){var e,t,r,n,i,o,a;return(null==this||null===(e=this.style)||void 0===e||null===(t=e.idea2164)||void 0===t||null===(r=t.item)||void 0===r||null===(n=r[0])||void 0===n?void 0:n.action_link)||(null==this||null===(i=this.style)||void 0===i||null===(o=i.idea8640)||void 0===o||null===(a=o.icon_link)||void 0===a?void 0:a.link)||(null==this?void 0:this.link)||""},smalltitle:function(){var e,t,r,n;return(null==this||null===(e=this.style)||void 0===e||null===(t=e.idea8639)||void 0===t?void 0:t.smalltitle)||(null==this||null===(r=this.style)||void 0===r||null===(n=r.idea8643)||void 0===n?void 0:n.smalltitle)||{text:"最近30分钟前有人浏览"}},smalltitleLink:function(){return this.smalltitle.link||this.link},showSmalltitle:function(){return this.smalltitleLink&&this.smalltitle.text}}),mounted:function(){var e=this;this.eventBus.on("removeAds",(function(){e.visible=!1}))},methods:{show:function(){var e=this.isVip?"removeAds":"initNoAdDialog";this.eventBus.emit(e)}}},$e=(r(437),r(438),r(3)),Ve=Object($e.default)(Ue,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return e.visible?r("div",{staticClass:"hx-warp",class:"fc-"+e.searchId,attrs:{"data-action":"ck","data-nvk":e.nvk,"data-ecimtimesign":e.imTimeSign}},[r("span",{staticClass:"vip",on:{click:e.show}},[e._v("\n        VIP去广告 "),r("span",{staticClass:"icon"})]),e._v(" "),r("a",{staticClass:"hx-center-title",attrs:{href:e.link},domProps:{innerHTML:e._s(e.title)}}),e._v(" "),r("div",{staticClass:"hx-center-content"},[e.picUrl?r("a",{staticClass:"hx-center-content-left",attrs:{href:e.link}},[r("img",{attrs:{src:e.picUrl,alt:""}})]):e._e(),e._v(" "),r("div",{staticClass:"hx-center-content-right"},[e.showSmalltitle?r("a",{staticClass:"hx-center-sub hx-center-link",attrs:{href:e.smalltitleLink}},[r("span"),e._v(" "),r("div",{staticClass:"hx-center-sub-title"},[e._v("\n                    "+e._s(e.smalltitle.text)+"\n                ")])]):e._e(),e._v(" "),r("a",{staticClass:"hx-center-desc hx-center-link",attrs:{href:e.link},domProps:{innerHTML:e._s(e.desc)}}),e._v(" "),r("div",{staticClass:"hx-center-replier"},[e.actionLink?r("a",{staticClass:"hx-center-tip hx-center-link",attrs:{href:e.actionLink}},[e._v("\n                    立即免费查看相关内容"),r("span")]):e._e()]),e._v(" "),r("a",{staticClass:"hx-center-btn hx-center-link",attrs:{href:e.link}},[e._v("\n                查看全文"),r("span")]),e._v(" "),r("a",{staticClass:"hx-center-brand hx-center-link",attrs:{href:e.link}},[r("span",[e._v(e._s(e.brandName))]),e._v(" 广告\n            ")])])])]):e._e()}),[],!1,null,"d7edd856",null).exports,Xe=r(26);function Ge(e,t,r){var n,i,o,a=new qe.default({extends:Ve,store:Ne.a,data:function(){return t}});if(null!=e&&e.length&&(a.$mount(),null==e||null===(n=e.first)||void 0===n||null===(i=n.call(e))||void 0===i||null===(o=i.after)||void 0===o||o.call(i,a.$el),r))var s=setTimeout((function(){Object(Xe.b)(r,e),clearTimeout(s)}),100)}function Je(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ke(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Je(Object(r),!0).forEach((function(t){Ye(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Je(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Ye(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Qe=_e.a.ACT_ID,Ze=_e.a.BEHAVIOR,et=_e.a.MODULE,tt=945,rt={data:function(){return{creader:{},currentPage:0,totalPage:0,loadSize:50,curLoadStartPage:51,adArr:[],keywordShowView:1,keywordClickView:1,keywordLog:new Map,DOC_BIZ_TYPE:Ae.b,selectionTxt:"",remindTxt:"",screenSize:"small-size"}},computed:Ke(Ke(Ke(Ke(Ke(Ke(Ke(Ke(Ke({},Object(Le.mapState)(["docInfo","readerInfo","creatorInfo"])),Object(Le.mapState)("infrastructure",["resetNewDoc","eventBus"])),Object(Le.mapState)("docInfo",["docId","docBizType","title"])),Object(Le.mapState)("creader",["isFoldOnff"])),Object(Le.mapState)("readerInfo",["foldPage","curPage","curLastPage","showPage","adObject","region","page","interceptPage"])),Object(Le.mapState)("viewUI",["scrollObject","screenMode","readerThumb","pptStatus","readerThumbAbsolute"])),Object(Le.mapState)("vipInfo",["isVip"])),Object(Le.mapState)("wkSmallFlow",["wkWeb9738"])),{},{pptCls:function(){var e=this.readerInfo,t=this.screenSize;return"ppt"!==(null==e?void 0:e.tplName)?"":["mlppt",t].join(" ")},isNotHitCopyTask:function(){return!0},isPPT:function(){var e;return"ppt"===(null===(e=this.readerInfo)||void 0===e?void 0:e.tplName)}}),watch:{"foldPage.unfold":function(e){var t=this.interceptPage!==this.page?this.interceptPage-this.curLastPage:this.loadSize;this.creader.gotoPage(this.curLastPage+t),this.isPPT&&this.creader.scrollToPage({toPageIndex:this.curLastPage,fixedTop:Me(),containerSelector:".reader-wrap"})},pptStatus:function(e){var t=this.creader,r=((null==t?void 0:t.config)||{}).viewerMode;2===e&&r===f.VSignalPage?t.setViewerMode(f.VDoublePage):r===f.VDoublePage&&t.setViewerMode(f.VSignalPage),this.adjustThumbnail(),Object(De.$)(".ql-menubar .ql-thumbnail").css({background:1===e?"#F7F7F7":"transparent"})},scrollObject:function(e){var t;null!=this&&null!==(t=this.creader)&&void 0!==t&&t.docId&&this.getViewPage()},adObject:function(e){for(var t,r,n=null===(t=this.creader)||void 0===t||null===(r=t.renderPages)||void 0===r?void 0:r.length,i=Math.max(e.showHxNum,n),o=1;o<=i;o++)this.renderAds(o)},curPage:function(e){var t,r,n;e-=1;var i=(null===(t=this.creader)||void 0===t||null===(r=t.renderPages)||void 0===r||null===(n=r[e])||void 0===n?void 0:n.keywordMatchNum)||0;!this.keywordLog.has(e)&&i&&(this.keywordLog.set(e,1),Be.log.xsend(Qe,{behavior:Ze.SHOW,module:et.KeywordOfDoc,matchNum:i,keywordShowView:this.keywordShowView}),this.keywordShowView=0)},docId:function(e){document.querySelector(".reader-topbar-below").scrollTo({left:0})},"readerThumb.width":{immediate:!0,handler:function(e){this.adaptLayout(!0)}},screenMode:function(e){if(this.isPPT){var t=".reader-wrap";this.screenMode&&(t=null),this.creader.scrollToPage({toPageIndex:this.curPage,fixedTop:Me(),containerSelector:t})}},readerThumbAbsolute:function(e){if(e)Object(De.$)("#original-creader-root").css({paddingLeft:0});else{var t,r=(null===(t=this.readerThumb)||void 0===t?void 0:t.width)||0;Object(De.$)("#original-creader-root").css({paddingLeft:r})}}},mounted:function(){var e=this;this.initCreader(),this.bindEvent(),this.underWordTool(),this.isPPT&&this.setPptStatus(1),setTimeout((function(){var t,r,n,i=e.curPage,o=void 0===i?1:i;o-=1;var a=(null===(t=e.creader)||void 0===t||null===(r=t.renderPages)||void 0===r||null===(n=r[o])||void 0===n?void 0:n.keywordMatchNum)||0;!e.keywordLog.has(o)&&a&&(e.keywordLog.set(o,1),Be.log.xsend(Qe,{behavior:Ze.SHOW,module:et.KeywordOfDoc,matchNum:a,keywordShowView:e.keywordShowView}),e.keywordShowView=0)}),2e3)},beforeDestroy:function(){var e,t;null===(e=this.creader)||void 0===e||null===(t=e.resetReader)||void 0===t||t.call(e)},methods:Ke(Ke(Ke(Ke(Ke({},Object(Le.mapMutations)("readerInfo",["setCurLastPage","setFoldPageUnfold","setGoOnReadAction","updateHtmlUrls"])),Object(Le.mapMutations)("readerPlugin",["setCopyGuideStyle"])),Object(Le.mapMutations)("creader",["setCreader"])),Object(Le.mapMutations)("viewUI",["setReaderThumbLeft","setPptStatus","setReaderThumbAbsolute","setSmallSide"])),{},{initCreader:function(){var e,t,r=this;this.setCurLastPage(+Math.min(50,+this.readerInfo.showPage));var n=w;this.adjustReaderWidth(),n.pageInfoWidth=tt,n.textSelectEnable=this.isNotHitCopyTask,n.loadMoreType=l.None,n.useProxy=!1,n.cssPrefix="original";var i=h.Canvas;"html"===(null===(e=this.readerInfo)||void 0===e?void 0:e.tplName)&&(i=h.HTML),n.renderMode=i,n.limitSkeletonPageRange={start:1,end:2};var o=this.showPage;n.customPnRn=!0;var a={powerId:2,clientType:1,srcRef:0===this.resetNewDoc.count?document.referrer.split("?")[0]:location.href.split("?")[0],bizName:"mainPc"},s=(null===(t=this.readerInfo)||void 0===t?void 0:t.queryInfo)||{},c=s.bdQuery,d=s.wkQuery;c&&Object.assign(a,{bdQuery:c}),d&&Object.assign(a,{wkQuery:d}),n.readerInfoAPI={path:u.ndocview,params:a},n.pptPadding={top:0,right:0,bottom:0,left:0},n.startPage=o,n.pptStartPage=0,n.renderFlow=p.UnDestroy,this.creader=new Oe({docId:this.docId,root:"app-reader-editor",config:n}),window.creader=this.creader;var f="".concat("pageNo","-");n.cssPrefix&&(f="".concat(n.cssPrefix,"-").concat("pageNo","-")),Object(ze.f)(f);var g={text:this.watermarkName(),imgSrc:"https://edu-wenku.bdimg.com/v1/wkSmallApp/pc/watermark-1635842134822.png",imgScale:.5};this.creader.use(je,g);var m=_(this.readerInfo);this.setCreader(this.creader),this.creader.beginReader(m),this.creader.on("error",(function(e){e&&Be.log.xsend(Qe,{behavior:Ze.UNEXPECTED_DATA,module:[et.CReaderError,e.code].join("_"),errMsg:e.message})})),this.creader.on("readerInfoUpdated",(function(e){var t;e&&(null==e?void 0:e.showPage)>r.curLastPage&&(r.setCurLastPage(null==e?void 0:e.showPage),r.setGoOnReadAction(null==e?void 0:e.goOnReadAction),"ppt"===(null===(t=r.readerInfo)||void 0===t?void 0:t.tplName)&&r.updateHtmlUrls(null==e?void 0:e.urls))})),this.adjustReaderWidth()},adaptLayout:function(e){if(!this.readerThumbAbsolute){var t,r=(null===(t=this.readerThumb)||void 0===t?void 0:t.width)||0;Object(De.$)("#original-creader-root").css({paddingLeft:r})}this.adjustReaderWidth(!0)},adjustReaderWidth:function(e){var t,r=this,n=Number(Object(De.$)(document.body).width());n>=1280&&n<=1440?(Object(De.$)(".center-wrapper").addClass("small-side-center-wrapper"),this.setSmallSide(!0)):(Object(De.$)(".center-wrapper").removeClass("small-side-center-wrapper"),this.setSmallSide(!1));var i=Object(De.$)(".reader-wrap"),o=Number(Object(De.$)(".center-wrapper").width()),a=(null===(t=this.readerThumb)||void 0===t?void 0:t.width)||0,s=tt,c="auto";if(o<=720){var d,l,u;if(720!==tt||e)tt=720,null===(d=this.creader)||void 0===d||null===(l=d.setPageInfoWidth)||void 0===l||l.call(d,s),c="ppt"===(null===(u=this.readerInfo)||void 0===u?void 0:u.tplName)?tt+a+5:c,i.width(c);this.setReaderThumbAbsolute(!1)}else if(o>=720&&o<910){var h,p,f,g,m;if(tt=o,this.isPPT)null===(p=this.creader)||void 0===p||null===(f=p.setPageInfoWidth)||void 0===f||f.call(p,s-30);else null===(g=this.creader)||void 0===g||null===(m=g.setPageInfoWidth)||void 0===m||m.call(g,s);c="ppt"===(null===(h=this.readerInfo)||void 0===h?void 0:h.tplName)?tt-25+"":c,this.setReaderThumbAbsolute(!0),i.width(c)}else if(o<=945){var v,b,k,w,x;if(tt=o,this.isPPT)null===(b=this.creader)||void 0===b||null===(k=b.setPageInfoWidth)||void 0===k||k.call(b,tt-a-30);else null===(w=this.creader)||void 0===w||null===(x=w.setPageInfoWidth)||void 0===x||x.call(w,s);c="ppt"===(null===(v=this.readerInfo)||void 0===v?void 0:v.tplName)?tt-25:c,i.width(c),this.setReaderThumbAbsolute(!1)}else{if(945!==tt||e){var y,P,I,T,C,S=(tt=945)+a+5;if(this.isPPT&&o<1070)S=o-25,null===(P=this.creader)||void 0===P||null===(I=P.setPageInfoWidth)||void 0===I||I.call(P,o-a-30);else null===(T=this.creader)||void 0===T||null===(C=T.setPageInfoWidth)||void 0===C||C.call(T,s);c="ppt"===(null===(y=this.readerInfo)||void 0===y?void 0:y.tplName)?S:c,i.width(c)}this.setReaderThumbAbsolute(!1)}this.$nextTick((function(){var e=document.querySelector(".reader-wrap"),t=document.querySelector(".reader-topbar-below");if(e){var n=getComputedStyle(e),i=getComputedStyle(t),o=parseInt(null==n?void 0:n.marginLeft,10)||0;(o+=parseInt(null==i?void 0:i.paddingLeft,10)||0)&&r.setReaderThumbLeft(o+"px")}}))},adjustThumbnail:function(){var e=this;this.$nextTick((function(){var t,r,n=null===(t=document.getElementsByClassName("creader-root"))||void 0===t?void 0:t[0],i=null===(r=document.getElementsByClassName("reader-ppt"))||void 0===r?void 0:r[0];e.isPPT&&n&&i&&(945===tt?e.screenSize="normal-size":1===e.pptStatus&&(e.screenSize="small-size"))}))},bindEvent:function(){var e,t=this;Object(De.$)(window).on("resize",De.$.proxy(this.adjustReaderWidth,this)),this.creader.on("firstScreenRendered",(function(){var e,r,n,i,o,a;Object(De.$)("#ssr-reader-container").remove(),Object(De.$)(".ssr-container").remove(),Object(De.$)(t.$refs.creaderRef).parent().height("auto"),t.initCopGuide(),Object(De.$)(".ql-editor").hide();var s=(null===(e=t.resetNewDoc)||void 0===e?void 0:e.count)>0?+new Date:window.tsFMP||+new Date;null===(r=t.eventBus)||void 0===r||null===(n=r.emit)||void 0===n||n.call(r,"firstScreenRendered",{tsFMP:s}),null===(i=t.creader)||void 0===i||!i.config||null!==(o=t.docInfo)&&void 0!==o&&null!==(a=o.patentInfo)&&void 0!==a&&a.isPatent||(t.creader.config.renderFlow=null==p?void 0:p.Viewport),t.adaptLayout(!0)})),this.creader.on("pageRendered",(function(e){t.renderAds(e.index),1!==e.index||t.isVip||t.drawLineToRemindCopy(e)})),this.creader.on("keywordClickEvent",(function(e){if(e){window.open("".concat("https://wenku.baidu.com","/search?word=").concat(e,"&lm=0&od=0&fr=viewKeywordClick&ie=utf-8")),Be.log.xsend(Qe,{behavior:Ze.CLICK,module:et.KeywordOfDoc,keywordClickView:t.keywordClickView}),t.keywordClickView=0}})),null===(e=this.eventBus)||void 0===e||e.on("gotopage",(function(e){t.gotoPage(e)}))},drawLineToRemindCopy:function(e){var t,r,n,i,o,a,s=this,c=document.getElementById(null==e?void 0:e.selectorId("creader-canvas"));if(c){var d=c.getContext("2d");d.save();var l=null==e||null===(t=e.lines)||void 0===t?void 0:t[5],u=null==e||null===(r=e.lines)||void 0===r?void 0:r[6];if(l){var h=this.calStartPoint(l),p=this.calEndPoint(l);this.remindTxt=l.text,d.strokeStyle="rgba(0,0,0, 0.6)",this.drawWaveLine(d,h,p);var f=Object(De.$)("#".concat(null==e?void 0:e.selectorId("pageNo"))),g=Object(De.$)(".".concat("creader-root")),m=+(null==f||null===(n=f.css("margin-top"))||void 0===n?void 0:n.replace("px","")),v=+(null==g||null===(i=g.css("margin-left"))||void 0===i?void 0:i.replace("px","")),b={x:h.x+v,y:h.y-l.rect.height+m-2};this.$store.commit("readerPlugin/setReminderStatus",b),u&&(h=this.calStartPoint(u),p=this.calEndPoint(u),this.drawWaveLine(d,h,p),this.remindTxt+=u.text),d.stroke();var k=(new Date).toDateString();k!==(null===(o=localStorage)||void 0===o?void 0:o.getItem("copyRemindShow"))&&(this.$store.commit("readerPlugin/setSelectedText",this.remindTxt),this.$store.commit("readerPlugin/setReminderVisible",!0),Be.log.xsend(Qe,{behavior:Ze.SHOW,module:[et.ReaderPlugin,"mouseup","remind"].join("_")}),localStorage.setItem("copyRemindShow",k)),null===(a=document.getElementById("".concat(null==e?void 0:e.selectorId("pageNo"))))||void 0===a||a.addEventListener("click",(function(e){if(!s.selectionTxt){var t=(null==l?void 0:l.rect)||{};if(e.layerX>t.left&&e.layerX<t.left+t.width&&e.layerY>t.top&&e.layerY<t.top+t.height)return s.$store.commit("readerPlugin/setSelectedText",s.remindTxt),s.$store.commit("readerPlugin/setReminderVisible",!0),void Be.log.xsend(Qe,{behavior:Ze.SHOW,module:[et.ReaderPlugin,"mouseup","remind","click"].join("_")});var r=(null==u?void 0:u.rect)||{};e.layerX>r.left&&e.layerX<r.left+r.width&&e.layerY>r.top&&e.layerY<r.top+r.height&&(s.$store.commit("readerPlugin/setSelectedText",s.remindTxt),s.$store.commit("readerPlugin/setReminderVisible",!0),Be.log.xsend(Qe,{behavior:Ze.SHOW,module:[et.ReaderPlugin,"mouseup","remind","click"].join("_")}))}}))}}},drawWaveLine:function(e,t,r){var n=r.x-t.x;e.moveTo(t.x,t.y);for(var i=Math.ceil(n/10),o=1;o<=i;o++)e.quadraticCurveTo(t.x+10*(o-1),t.y+5,t.x+10*o,t.y),e.moveTo(t.x+10*o,t.y)},calStartPoint:function(e){return{x:e.rect.left,y:e.rect.top+e.rect.height}},calEndPoint:function(e){return{x:e.rect.left+e.rect.width,y:e.rect.top+e.rect.height}},gotoPage:function(e){var t=e.curPage,r=e.needUpdateFold,n=void 0===r||r;this.creader.gotoPage(t);var i=".reader-wrap";this.screenMode&&"ppt"!==this.readerInfo.tplName&&(i=null),this.creader.scrollToPage({toPageIndex:t,fixedTop:Me(),containerSelector:i}),n&&this.setFoldPageUnfold(this.foldPage.unfold+1)},initCopGuide:function(){var e,t,r=((null===(e=this.creader)||void 0===e||null===(t=e.renderPages)||void 0===t?void 0:t[0])||{}||{}).lines,n=((null==r?void 0:r[2])||{}).rect;n?null!=n&&n.width&&null!=n&&n.height&&this.setCopyGuideStyle({display:"none"}):this.setCopyGuideStyle({display:"none"})},underWordTool:function(){var e=this;if(this.isNotHitCopyTask){var t=this.creader;t.on("eventTextSelected",(function(t){var r,n,i=t.end,o=t.text,a=Object(ze.e)(),s=Object(De.$)("#".concat(a).concat(i.page)),c=null==s||null===(r=s[0])||void 0===r?void 0:r.offsetTop,d={x:(null==s||null===(n=s[0])||void 0===n?void 0:n.offsetLeft)+i.x,y:c+i.y};o&&(e.selectionTxt=o,e.$store.commit("readerPlugin/setSelectedText",o),e.$store.commit("readerPlugin/setLastStatus",d),e.$store.commit("readerPlugin/setVisible",!0),e.$store.commit("readerPlugin/setIsSendToPhoneActivated",!1),Be.log.xsend(Qe,{behavior:Ze.SHOW,module:[et.ReaderPlugin,"mouseup"].join("_")}))})),t.on("eventTextCanceled",(function(){e.selectionTxt="",e.$store.commit("readerPlugin/setVisible",!1),e.$store.commit("readerPlugin/setReminderVisible",!1)}))}},getViewPage:function(){var e=this;this.$nextTick((function(){var t=setTimeout((function(){e.currentPage=e.creader.viewportPage(),clearTimeout(t)}),1e3)}))},getNextPage:function(){var e,t=null===(e=document)||void 0===e?void 0:e.documentElement,r=t.scrollHeight-t.scrollTop-t.clientHeight,n=Object(ze.e)();r<2*document.getElementById("".concat(n,"1")).offsetHeight&&this.isFoldOnff&&(this.totalPage=this.creader.readerDocData.page||0,this.creader.loadNextPage(this.currentPage,2))},renderAds:function(){var e,t,r,n,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,o=this.adObject,a=o.data,s=o.adResult,c=o.startIndex;if(0!==s.length){var d=null==s?void 0:s.length;if(!((i+=c)>d||this.adArr.indexOf(i)>-1)){var l=null===(e=this.creader)||void 0===e?void 0:e.rootLine,u=(null===(t=this.creader)||void 0===t||null===(r=t.config)||void 0===r?void 0:r.cssPrefix)||"",h="#"+(u=u&&u+"-")+l+"-"+i;if(i<this.readerInfo.page&&null!==(n=Object(De.$)(h))&&void 0!==n&&n.length&&!this.screenMode){var p,f,g,m,v;this.adArr.push(i);var b=+De.Util.Common.getParam("noAdRegion"),k=null==s||null===(p=s[i-1])||void 0===p?void 0:p[0];if(1==+this.region&&1!==b||(null!=k&&k.title&&(s[i-1][0].title="<em>".concat(this.title,"</em>_").concat(k.title)),null!=k&&k.desc&&(s[i-1][0].desc="<em>".concat(this.title,"</em>，").concat(k.desc))),1===this.wkWeb9738){var w=Ke({searchId:a.searchId,imTimeSign:(null==a?void 0:a.im_time_sign)||""},s[i-1][0]),x=(null==a?void 0:a.ad_place_js)||"";return void Ge(Object(De.$)(h),w,x)}var y=['<div class="hx-warp">','<div id="wkad2'.concat(i,'"></div>'),'<a class="ad-logo"></a>',"</div>"].join("");Object(De.$)(h).after(y),null===(f=window)||void 0===f||null===(g=f.Apex)||void 0===g||null===(m=g.plugin)||void 0===m||null===(v=m["parallax-scrolling-webku"])||void 0===v||v.call(m,"#wkad2"+i,{im_time_sign:a.im_time_sign,ads:s[i-1]})}}}},watermarkName:function(){var e=this.creatorInfo,t=e.tname,r=e.shopInfo||{},n=r.shopId,i=r.showShopName,o=n?i:t;return o?"@".concat(o):""}})},nt=(r(439),Object($e.default)(rt,(function(){var e=this.$createElement;return(this._self._c||e)("div",{ref:"creaderRef",staticClass:"creader-reader",class:[this.pptCls,this.docBizType===this.DOC_BIZ_TYPE.CASH?"cursor-default":"cursor-text",this.isNotHitCopyTask?"":"cursor-pointer"],style:{"user-select":this.isNotHitCopyTask?"auto":"none"},attrs:{id:"app-reader-editor"}})}),[],!1,null,null,null));t.default=nt.exports}}]);
//# sourceMappingURL=20.0e37f6d0db03b6c9618f.js.map