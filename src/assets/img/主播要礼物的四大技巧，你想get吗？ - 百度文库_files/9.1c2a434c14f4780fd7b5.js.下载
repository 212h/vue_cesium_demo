(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{106:function(t,e,i){"use strict";var o=i(0),n={props:{fr:{type:String,default:""},isPatent:{type:Boolean,default:!1}},computed:{url:function(){return"https://wenku.baidu.com/?fr=logo"},isFromTfReader:function(){return"searchTfBox&tfUTMSource=bdss-WD"===this.fr}},methods:{log:function(){o.log.xsend(102899,{cos_type:"click",position:"logo",isPatent:this.isPatent?1:0})}}},s=(i(124),i(3)),r=Object(s.default)(n,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"search-logo-wrap",class:{patent:t.isPatent}},[i("a",{attrs:{href:t.url,target:"_self"},on:{click:t.log}},[i("span",{staticClass:"wk-logo-icon"})]),t._v(" "),i("a",{directives:[{name:"show",rawName:"v-show",value:t.isPatent,expression:"isPatent"}],staticClass:"link-patent",attrs:{href:"https://wenku.baidu.com/ndthirdparty/patent",target:"_blank"},on:{click:function(e){return e.stopPropagation(),t.log.apply(null,arguments)}}})])}),[],!1,null,null,null).exports,a=i(17),c=i.n(a);function l(t){var e=t.e,i=void 0===e?{}:e,o=t.cb,n=void 0===o?function(){}:o,s=i.currentTarget,r=null;if(s){var a=n,c=function(){r&&clearTimeout(r),r=setTimeout((function(){a(n)}),50)},l=function(){a(),r&&clearTimeout(r)};a=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){};s.removeEventListener("mouseleave",c),s.removeEventListener("mouseenter",l),t()},s.addEventListener("mouseleave",c),setTimeout((function(){s.addEventListener("mouseenter",l)}))}}function u(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"_blank";h(t)?window.open(t,e):window.open("https://wenku.baidu.com".concat(t),e)}var d={name:"bizuiFlagHash",getStorageHash:function(){var t={};try{t=JSON.parse(localStorage.getItem(this.name)||"{}")}catch(t){console.log(t)}return t},setStorageHash:function(t){try{localStorage.setItem(this.name,JSON.stringify(t))}catch(t){console.log(t)}},active:function(t){var e;return((null===(e=this.getStorageHash())||void 0===e?void 0:e[t])||0)>(new Date).getTime()},update:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:864e5,i=this.getStorageHash();i[t]=((new Date).getTime()+e).toString(),this.setStorageHash(i)}};function h(t){return/^(https?:\/\/(([a-zA-Z0-9]+-?)+[a-zA-Z0-9]+\.)+[a-zA-Z]+)(:\d+)?(\/.*)?(\?.*)?(#.*)?$/.test(t)}var p=[{icon:"slim",text:"文档瘦身",url:"https://box.baidu.com/ndtool/home#/doc-slim"},{icon:"converter",text:"格式转化",url:"https://converter.baidu.com/?origin=wenkuConverterOther"},{icon:"merge",text:"PDF合并",url:"https://box.baidu.com/ndtool/home#/doc-merge"},{icon:"cut",text:"PDF拆分",url:"https://box.baidu.com/ndtool/home#/doc-split"},{icon:"watermark",text:"PDF加水印",url:"https://box.baidu.com/ndtool/home#/doc-add-watermark"},{icon:"imgtotext",text:"图片转文字",url:"https://box.baidu.com/ndtool/home#/img-to-text"}],v={ACT_ID_MAP:{_view2020_:103232,_view2022_:103302},BEHAVIOR:{SHOW:"show",CLICK:"click",EVENT:"event",HOVER:"hover",DURATION:"duration"},MODULE:{SearchBox:"SearchBox",SearchInput:"".concat("SearchBox","_SearchInput"),SearchTab:"".concat("SearchBox","_SearchTab"),NewVipActivity:"".concat("SearchBox","_NewVipActivity"),ClientDownload:"".concat("SearchBox","_ClientDownload"),BrowseHistory:"".concat("SearchBox","_BrowseHistory"),UserIcon:"".concat("SearchBox","_UserIcon"),ShopEnter:"".concat("SearchBox","_ShopEnter"),Patent:"".concat("SearchBox","_Patent")}},f=v.ACT_ID_MAP,m=v.MODULE,g=v.BEHAVIOR,y={props:{page:{type:String}},data:function(){return{menus:p,hoverShow:!1}},computed:{colorStyle:function(){var t,e={color:"#222"};return(null===(t=location.href)||void 0===t?void 0:t.indexOf("box.baidu.com"))>-1||this.hoverShow?(e.color="#22AB82",e):e}},mounted:function(){o.log.xsend(200377)},methods:{mouseEnter:function(t){var e=f[this.page];e&&o.log.xsend(e,{behavior:g.HOVER,module:[null==m?void 0:m.SearchTab,"docTool"].join("_")}),this.hoverShow=!0,l({e:t,cb:this.mouseLeave})},mouseLeave:function(){this.hoverShow=!1},itemClick:function(t){this.hoverShow=!1,o.log.xsend(200376,{menu:t.icon}),u(t.url)},openTool:function(){var t=f[this.page];t&&o.log.xsend(t,{behavior:g.CLICK,module:[null==m?void 0:m.SearchTab,"DocTool"].join("_")}),u("https://box.baidu.com/ndtool/home","_self")}}},w=(i(125),Object(s.default)(y,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"doc-tool-btn",class:{active:t.hoverShow},on:{click:function(e){return e.stopPropagation(),t.openTool.apply(null,arguments)},mouseenter:t.mouseEnter}},[i("div",{staticClass:"tool-icon"},[i("span",{staticClass:"tool-name",style:t.colorStyle},[t._v("文档工具")])]),t._v(" "),i("div",{class:["hover-content",{show:t.hoverShow}]},t._l(t.menus,(function(e){return i("div",{key:e.icon,staticClass:"item",on:{click:function(i){return i.stopPropagation(),t.itemClick(e)}}},[i("div",{staticClass:"icon",class:e.icon}),t._v(" "),i("div",{staticClass:"text"},[t._v(t._s(e.text))])])})),0)])}),[],!1,null,"0cc6a292",null).exports),_=[{id:"docpack",url:"/docpackhome",urlReal:"https://wenku.baidu.com/ndcore/browse/docPack",type:"_self",log:"pack",title:"文集"},{id:"literature",url:"/wx/home",urlReal:"https://wenku.baidu.com/ndthirdparty/home",type:"_self",log:"wx",title:"文献"}],C=v.ACT_ID_MAP,b=v.MODULE,I=v.BEHAVIOR,k={props:{page:{type:String},activeId:{type:String,default:""}},data:function(){return{menus:_,hoverShow:!1}},methods:{mouseEnter:function(t){var e=C[this.page];e&&o.log.xsend(e,{behavior:I.HOVER,module:[null==b?void 0:b.SearchTab,"MoreMenu"].join("_")}),this.hoverShow=!0,l({e:t,cb:this.mouseLeave})},mouseLeave:function(){this.hoverShow=!1},itemClick:function(t){this.hoverShow=!1,o.log.xsend(103252,{index:t.log,id:t.id}),u(t.urlReal)}}},x=(i(126),Object(s.default)(k,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"more-menu-btn",on:{mouseenter:t.mouseEnter}},[t._m(0),t._v(" "),i("div",{staticClass:"hover-content",class:{show:t.hoverShow}},t._l(t.menus,(function(e){return i("div",{key:e.id,staticClass:"item",on:{click:function(i){return t.itemClick(e)}}},[i("div",{class:{"menu-active":e.id===t.activeId}},[t._v("\n                "+t._s(e.title)+"\n            ")])])})),0)])}),[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"tool-icon"},[e("span",{staticClass:"tool-name"},[this._v("更多")])])}],!1,null,"3e8a5010",null).exports),S=v.ACT_ID_MAP,T=v.MODULE,V=v.BEHAVIOR,A={components:{DocTool:w,MoreMenu:x},props:{page:{type:String},isShowAllTool:{type:Boolean},docList:{type:Array,default:function(){return[]}}},data:function(){return{docShowFlag:!1}},computed:{tabListComputed:function(){return[{id:"shop",url:"https://cuttlefish.baidu.com/shopmis",urlReal:"https://cuttlefish.baidu.com/shopmis",type:"_self",log:"shop",title:"写作赚钱",redDot:!(null!=d&&d.active("shopDot"))}]},tabActiveId:function(){var t=/^https{0,1}:\/\/.*?(\/.*?)$/.exec(location.href||"");if(!t)return"";for(var e=null==t?void 0:t[1],i=0;i<this.tabListComputed.length;++i){var o=this.tabListComputed[i];if(~e.indexOf(o.url)||~e.indexOf(o.urlReal))return o.id}return""}},methods:{gotoHome:function(){var t=S[this.page];t&&o.log.xsend(t,{behavior:V.CLICK,module:[null==T?void 0:T.SearchTab,"home"].join("_")}),this.open("https://wenku.baidu.com/","_self","home")},open:function(t,e,i){u(t,e)},mouseenterDoc:function(t){var e=S[this.page];e&&o.log.xsend(e,{behavior:V.HOVER,module:[null==T?void 0:T.SearchTab,"doc"].join("_")}),this.showDoc(),l({e:t,cb:this.hidenDoc})},showDoc:function(){this.docShowFlag=!0},hidenDoc:function(){this.docShowFlag=!1},handleTabClick:function(t){var e=S[this.page];e&&o.log.xsend(e,{behavior:V.CLICK,module:[null==T?void 0:T.SearchTab,t.id].join("_")}),"shop"===t.id&&(null==d||d.update("shopDot",1/0)),this.open(t.url,t.type,t.log)},handleClassClick:function(t){u(t.url)}}},P=(i(127),Object(s.default)(A,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"search-tab-wrap"},[i("div",{staticClass:"search-tab-content"},[i("div",{staticClass:"search-tab-item",on:{click:t.gotoHome}},[t._v("\n            首页\n        ")]),t._v(" "),t.isShowAllTool?i("div",{staticClass:"search-tab-item",on:{mouseenter:t.mouseenterDoc}},[t._v("\n            文档\n            "),i("div",{class:["doc-content",{show:t.docShowFlag}]},[t.docList.length?i("div",{staticClass:"doc-hint-content"},t._l(t.docList,(function(e,o){return i("div",{key:o,staticClass:"doc-hint-item",on:{click:function(i){return t.handleClassClick(e)}}},[t._v("\n                        "+t._s(e.className)+"\n                    ")])})),0):t._e()])]):t._e(),t._v(" "),t._l(t.tabListComputed,(function(e){return t.isShowAllTool?i("div",{key:e.id,class:{"search-tab-item":!0,"search-tab-item-active":e.id===t.tabActiveId,"red-dot":e.redDot},on:{click:function(i){return t.handleTabClick(e)}}},[t._v("\n            "+t._s(e.title)+"\n        ")]):t._e()})),t._v(" "),i("DocTool",{attrs:{page:t.page}}),t._v(" "),i("MoreMenu",{attrs:{page:t.page,"active-id":t.tabActiveId}})],2)])}),[],!1,null,null,null).exports),L=i(13),D=i(9),O=i(111),E=i.n(O),B=function(t){var e="";try{e=window.localStorage.getItem(t)||""}catch(t){console.log(t)}return e},U=function(t,e){try{window.localStorage.setItem(t,e)}catch(t){console.log(t)}},j=function(t){var e,i,n=B("searchQueryHistory")||"",s=!!n&&n.split("###")||[];if(""!==t&&-1===s.indexOf(t)){var r=s.length||0;r>2&&(n=s.slice(r-2,r).join("###")),n=n?"".concat(n,"###").concat(t):t,U("searchQueryHistory",n)}o.log.xsend(103045),(e=t,i=Math.floor((new Date).getTime()/1e3),D.wkAxios.get("/user/interface/jiaoyusearch",{params:{source:"pc",action:"set",mark:"".concat(e,":").concat(i)}})).catch(console.log)};function Q(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,o)}return i}function q(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?Q(Object(i),!0).forEach((function(e){R(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):Q(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function R(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var H=(null==v?void 0:v.MODULE).SearchInput,M=q(q({},v),{},{MODULE:{SearchInput:H,relativeQuery:[H,"relativeQuery"].join("_")}}),$=M.ACT_ID_MAP,F=M.BEHAVIOR,N=M.MODULE,W={props:{placeholder:{type:String,default:""},fr:{type:String,default:""},modelLm:{type:String,default:""},page:{type:String,default:""},userInputQuery:{type:String,default:""},ie:{type:String,default:"utf-8"},fixed:{type:Boolean},viewBizInfo:{type:Object,default:function(){}},wkSmallflow:{type:Object,default:function(){}},isThird:{type:Boolean,default:!1},isShowAllTool:{type:Boolean,default:!0},adData:{type:Object,default:function(){}},hotData:{type:Object,default:function(){}}},data:function(){return{query:"",defaultQuery:"",focus:!1,mouseDown:!1,sugList:[],reletiveQueryList:[],visibleRelativeQuery:!1,sugWrapVisible:!1,hotSearchWrapVisible:!1,queryInitedEmpty:!0,activeSugIndex:0,historyQueryList:(B("searchQueryHistory")||"").split("###").filter((function(t){return t})),searchUrl:"/search"}},computed:{searchbarVipquery:function(){var t;return(null===(t=this.adData)||void 0===t?void 0:t.SearchbarVipquery)||{}},hotSearchQueryList:function(){var t;return((null===(t=this.hotData)||void 0===t?void 0:t.normalHotWords)||[]).splice(0,3)},suggessQueryWrapVisible:function(){var t;return!this.sugWrapVisible&&!this.query&&(null===(t=this.searchbarVipquery)||void 0===t?void 0:t.title)&&this.focus},sugShow:function(){return this.sugWrapVisible||this.suggessQueryWrapVisible||this.visibleRelativeQuery},historyQueryShow:function(){return this.historyQueryList.length>0},hotSearchQueryShow:function(){var t;return this.hotSearchQueryList.length>0&&(null===(t=this.searchbarVipquery)||void 0===t?void 0:t.isshow)},isFromTfReader:function(){return"searchTfBox&tfUTMSource=bdss-WD"===this.fr}},watch:{"viewBizInfo.recommend.relativeQuery":{immediate:!0,handler:function(t){t&&this.handleRelativeQuery(t)}},visibleRelativeQuery:function(t){if(t)for(var e=this.reletiveQueryList,i=$[this.page],n=0;n<e.length;n++)i&&o.log.xsend(i,{behavior:null==F?void 0:F.SHOW,module:N.relativeQuery,i:n+1})}},mounted:function(){this.userInputQuery&&(this.query=this.userInputQuery),this.fetchRelativeQuery(),this.bindEvent(),this.isThird&&(this.searchUrl="/ndthirdparty/search")},methods:{calQuery:function(t){var e=L.b.Common.getParamByStr("word",document.referrer),i=L.b.Common.getParam("word");e=e?decodeURIComponent(e):"",i=i?decodeURIComponent(i):"";var n="";e&&"undefined"!==e&&"null"!==e?n=e:i&&"undefined"!==i&&"null"!==i&&(n=i);var s=window.eventBus;if(n)this.query=n,this.queryInitedEmpty=!1,o.log.xsend(102740,{query:encodeURIComponent(n),origin:"inherit_query",ie:"utf-8"}),s.emit("queryTypeGot",{from:"bizui",data:{query:n,origin:"inherit_query"}});else{var r;if(null==t||!t.length)return;var a=null==t||null===(r=t[0])||void 0===r?void 0:r.title;this.query=a,this.queryInitedEmpty=!1,o.log.xsend(102740,{query:encodeURIComponent(a),origin:"request_query",ie:"utf-8"}),s.emit("queryTypeGot",{from:"bizui",data:{query:a,origin:"request_query"}})}this.defaultQuery=this.query},handleRelativeQuery:function(t){for(var e=(null==t?void 0:t.relateQuery)||[],i=0;i<(null==e?void 0:e.length);i++){var o=e[i];e[i].searchedCount=this.searchedCount(o)}this.reletiveQueryList=e,this.calQuery(e)},fetchRelativeQuery:function(){var t,e,i,n,s,r,a=this,c=this;null!==(t=this.wkSmallflow)&&void 0!==t&&t.wkWeb4774&&(null!==(e=this.viewBizInfo)&&void 0!==e&&null!==(i=e.recommend)&&void 0!==i&&null!==(n=i.hasOwnProperty)&&void 0!==n&&n.call(i,"relativeQuery")||D.wkAxios.get("/search/interface/getrelatequery",{params:{word:null===(s=this.viewBizInfo)||void 0===s||null===(r=s.docInfo)||void 0===r?void 0:r.title,show_doc_count:1,is_read_view:1}}).then((function(t){o.log.xsend(102722,{}),a.handleRelativeQuery(t)})));var l=window.eventBus;l&&"function"==typeof l.on&&l.on("queryAndRelatedGot",(function(t){var e=t.query,i=t.list;o.log.xsend(102494,{index:1}),a.query||("DEFAULT_QUERY_WENKU"!==e?(a.query=e,a.queryInitedEmpty=!1,o.log.xsend(102740,{query:encodeURIComponent(e),origin:"baidu_query",ie:"utf-8"}),l.emit("queryTypeGot",{from:"bizui",data:{query:e,origin:"baidu_query"}})):c.calQuery(i))}))},searchedCount:function(t){var e=t.doc_count;return e>=1e8?(e/1e8).toFixed(2)+"亿":e>1e4?parseInt(String(e/1e4),10)+"万":e+""},delSearchHistoryItem:function(t){var e,i;e=t,(i=B("searchQueryHistory").split("###")).splice(e,1),U("searchQueryHistory",i.join("###")),this.historyQueryList.splice(t,1)},changeSugActive:function(t){this.activeSugIndex=t},clearSearchHistory:function(){this.historyQueryList=[],U("searchQueryHistory","")},bindEvent:function(){var t=this;Object(L.a)(document).on("click",(function(e){Object(L.a)(e.target).closest(".search-input-wrap").length||(t.sugWrapVisible=!1,t.visibleRelativeQuery=!1,t.focus=!1)}))},fetchSug:function(t){var e=this,i=encodeURIComponent(t),o=Math.random();Object(D.default)({url:"https://www.baidu.com/sugrec?prod=open_wenku&oe=gb18030&wd=".concat(i,"&t=").concat(o),adapter:E.a}).then((function(t){var i=t.data;e.makeSug(i)}))},makeSug:function(t){var e=this;this.sugList=(t.g||[]).map((function(t){var i=(null==t?void 0:t.q)||"",o=!1,n=i.replace(new RegExp("(^".concat(e.query,")")),(function(){return o=!0,""}));return{query:i,inputedQuery:e.query,splitedQuery:n,isHightLight:o}})),this.sugList.length?this.sugWrapVisible=!0:this.sugWrapVisible=!1},clickSug:function(t){this.sugWrapVisible=!1,u("".concat(this.searchUrl,"?word=").concat(encodeURIComponent(t.query),"&lm=").concat(this.modelLm,"&od=0&fr=").concat(this.fr,"&ie=").concat(this.ie))},clickRelativeQuery:function(t,e){var i=$[this.page];i&&o.log.xsend(i,{behavior:null==F?void 0:F.CLICK,module:null==N?void 0:N.relativeQuery,i:e+1}),this.visibleRelativeQuery=!1,u("/search?word=".concat(encodeURIComponent(t.title),"&lm=").concat(this.modelLm,"&od=0&fr=").concat(this.fr,"&ie=").concat(this.ie))},changeQuery:function(t){this.query=t.target.value,this.query!==this.defaultQuery&&(this.visibleRelativeQuery=!1),this.$emit("changeQuery",this.query),this.queryInitedEmpty?this.fetchSug(this.query):this.queryInitedEmpty=!0},inputFocus:function(){var t;this.setKeyWordFromElement(),this.focus=!0,this.visibleRelativeQuery=Boolean(null===(t=this.reletiveQueryList)||void 0===t?void 0:t.length)&&this.query===this.defaultQuery},setKeyWordFromElement:function(){var t,e=null===(t=document.getElementById("kw"))||void 0===t?void 0:t.value;this.query=e},changeQueryFromSug:function(){var t,e;this.query=(null===(t=this.sugList)||void 0===t||null===(e=t[this.activeSugIndex])||void 0===e?void 0:e.query)||this.query},inputKeyDown:function(t){var e=this.sugList.length;switch(t.key){case"ArrowUp":this.activeSugIndex<=0?this.activeSugIndex=e-1:this.activeSugIndex--,this.changeQueryFromSug(),t.preventDefault();break;case"ArrowDown":this.activeSugIndex>=e-1?this.activeSugIndex=0:this.activeSugIndex++,this.changeQueryFromSug();break;case"Enter":return this.submit()}},submitMouseDown:function(){this.setKeyWordFromElement(),this.mouseDown=!0},submitMouseUp:function(){this.mouseDown=!1},submitMouseOut:function(){this.mouseDown=!1},submit:function(){var t=$[this.page];t&&o.log.xsend(t,{behavior:F.CLICK,module:N.SearchInput});var e=this.query,i=this.placeholder;""===e&&""===i||(j(e),this.$emit("searchDoc",{word:e||i}))}}},z=(i(128),Object(s.default)(W,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("form",{staticClass:"search-input-wrap",attrs:{onsubmit:"return false"}},[i("span",{staticClass:"search-input",class:{focus:t.focus,sug:t.sugShow,fixed:t.fixed,"toufang-reader":t.isFromTfReader}},[i("input",{attrs:{id:"kw",maxlength:"256",tabindex:"1",autocomplete:"off",placeholder:t.placeholder||""},domProps:{value:t.query},on:{input:function(e){return t.changeQuery(e)},focus:t.inputFocus,keydown:function(e){return t.inputKeyDown(e)}}}),t._v(" "),i("div",{staticClass:"input-hint-content"},[i("div",{directives:[{name:"show",rawName:"v-show",value:t.suggessQueryWrapVisible,expression:"suggessQueryWrapVisible"}],staticClass:"sug-wrap"},[t.hotSearchQueryShow?[i("div",{staticClass:"sug-title"},[t._v("热门搜索")]),t._v(" "),i("a",{key:"hot-0",staticClass:"sug-item hot-item",attrs:{href:t.searchbarVipquery.link}},[i("span",{staticClass:"hot-option-word-content"},[t._v(t._s(t.searchbarVipquery.title))]),t._v(" "),i("span",{staticClass:"hot-option-word-icon"},[t._v("荐")])])]:t._e(),t._v(" "),t._l(t.hotSearchQueryList,(function(e,o){return i("a",{key:"normal-"+o,staticClass:"sug-item normal-item",attrs:{href:"https://wenku.baidu.com"+t.searchUrl+"?word="+e.query+"&fr="+t.fr}},[i("span",{staticClass:"hot-option-word-content"},[t._v(t._s(e.query))])])})),t._v(" "),t.historyQueryShow?i("div",{staticClass:"history-box"},[i("div",{staticClass:"sug-title"},[t._v("最近搜过")]),t._v(" "),i("div",{staticClass:"history-clear",on:{click:t.clearSearchHistory}},[t._v("清空记录")]),t._v(" "),t._l(t.historyQueryList,(function(e,o){return i("div",{key:"history-"+o,staticClass:"search-history-item"},[i("a",{staticClass:"sug-item",attrs:{href:"https://wenku.baidu.com"+t.searchUrl+"?word="+e+"&fr="+t.fr}},[i("span",{staticClass:"hot-option-word-content"},[t._v(t._s(e))])]),t._v(" "),i("span",{staticClass:"del-history-item",on:{click:function(e){return e.stopPropagation(),t.delSearchHistoryItem.apply(null,arguments)}}},[t._v("删除")])])}))],2):t._e()],2),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:t.sugWrapVisible,expression:"sugWrapVisible"}],staticClass:"sug-wrap"},t._l(t.sugList,(function(e,o){return i("div",{key:o,class:["sug-item",{active:t.activeSugIndex===o}],on:{mouseenter:function(e){return t.changeSugActive(o)},click:function(i){return t.clickSug(e)}}},[e.isHightLight?i("span",{staticClass:"sug-text-input-query"},[t._v(t._s(e.inputedQuery))]):t._e(),t._v(" "),i("span",{staticClass:"sug-text",domProps:{textContent:t._s(e.splitedQuery)}})])})),0),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:t.visibleRelativeQuery,expression:"visibleRelativeQuery"}],staticClass:"sug-wrap"},[i("div",{staticClass:"sug-title"},[t._v("大家还搜索了")]),t._v(" "),t._l(t.reletiveQueryList,(function(e,o){return i("div",{key:o,class:["sug-item","others-search",t.activeSugIndex===o?"active":""],on:{mouseenter:function(e){return t.changeSugActive(o)},click:function(i){return t.clickRelativeQuery(e,o)}}},[i("span",{class:"sug-idx-"+(o+1)},[t._v(t._s(o+1))]),t._v(" "),i("span",{staticClass:"sug-text",domProps:{textContent:t._s(e.title)}}),t._v(" "),t.isShowAllTool?i("span",{staticClass:"doc-amount"},[t._v("相关文档约"+t._s(e.searchedCount)+"篇")]):t._e()])}))],2)])]),t._v(" "),i("div",{staticClass:"search-submit-btn",class:{"mouse-down":t.mouseDown},on:{mousedown:t.submitMouseDown,mouseup:t.submitMouseUp,mouseout:t.submitMouseOut,click:t.submit}},[t._v("\n        搜索文档\n    ")]),t._v(" "),t._t("default")],2)}),[],!1,null,null,null).exports),K={props:{placeholder:{type:String,default:""},userInputQuery:{type:String,default:""},ie:{type:String,default:"utf-8"},fixed:{type:Boolean}},mounted:function(){this.userInputQuery&&(this.query=this.userInputQuery)},data:function(){return{query:""}},methods:{submit:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"toPatent";this.$emit("searchDoc",{action:t,query:this.query})},inputKeyDown:function(t){switch(t.key){case"Enter":return this.submit()}}}},G=(i(129),Object(s.default)(K,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("form",{staticClass:"patent-search-input-wrap",attrs:{onsubmit:"return false"}},[i("span",{staticClass:"search-input",class:{fixed:t.fixed}},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.query,expression:"query"}],attrs:{maxlength:"256",tabindex:"1",autocomplete:"off",placeholder:t.placeholder||""},domProps:{value:t.query},on:{keydown:function(e){return t.inputKeyDown(e)},input:function(e){e.target.composing||(t.query=e.target.value)}}})]),t._v(" "),i("div",{staticClass:"patent-submit-btn",on:{click:function(e){return t.submit("toPatent")}}},[t._v("\n        搜索专利\n    ")]),t._v(" "),i("div",{staticClass:"search-submit-btn",on:{click:function(e){return t.submit("toSearch")}}},[t._v("\n        搜索文档\n    ")]),t._v(" "),t._t("default")],2)}),[],!1,null,"a51107b8",null).exports),J=v.ACT_ID_MAP,X=v.MODULE,Z=v.BEHAVIOR,Y={doc:"doc",wps:"wps",rtf:"rtf",docx:"doc",epub:"epub",pdf:"pdf",ppt:"ppt",pptx:"ppt",dps:"wps",pot:"ppt",pps:"ppt",txt:"txt",xls:"xls",xlsx:"xls",et:"wps",vsd:"vsd",dwg:"dwg",xmind:"xmind",none:"none"},tt={props:{page:{type:String},isLogin:{type:Boolean}},data:function(){return{historyList:[],docIconHash:Y,hintShowFlag:!1}},mounted:function(){},created:function(){var t=this;D.wkAxios.get("/user/interface/getuserdoc2019",{params:{from:"view"}}).then((function(t){return Promise.resolve(((null==t?void 0:t.view)||[]).slice(0,6))})).then((function(e){t.historyList=e})).catch((function(e){t.historyList=[]}))},methods:{open:function(t,e,i){u(t)},handleClick:function(){var t=J[this.page];(t&&o.log.xsend(t,{behavior:Z.CLICK,module:null==X?void 0:X.BrowseHistory}),this.isLogin)||(new c.a).log()},showHint:function(){this.hintShowFlag=!0},hidenHint:function(){this.hintShowFlag=!1},docIcon:function(t){return"//edu-wenku.bdimg.com/v1/pc/doc-icon/".concat(this.docIconHash[t.type]||this.docIconHash.none,".png")},hover:function(t){var e=J[this.page];e&&o.log.xsend(e,{behavior:Z.HOVER,module:null==X?void 0:X.BrowseHistory}),this.showHint(),l({e:t,cb:this.hidenHint})}}},et=(i(130),Object(s.default)(tt,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"browse-history-wrap",on:{mouseenter:t.hover}},[i("div",{staticClass:"browse-history-content",on:{click:t.handleClick}},[i("div",{staticClass:"client-icon"}),t._v(" "),i("div",{staticClass:"client-text"},[t._v("看过")])]),t._v(" "),i("div",{class:["history-hint-content",{"has-content":0!==t.historyList.length,show:t.hintShowFlag&&t.isLogin}]},[t._l(t.historyList,(function(e,o){return i("div",{key:o,staticClass:"history-item"},[i("div",{staticClass:"history-item-icon",style:{backgroundImage:"url("+t.docIcon(e)+")"}}),t._v(" "),i("div",{staticClass:"history-item-text",on:{click:function(i){return t.open("https://wenku.baidu.com/view/"+e.doc_id,"history",e.doc_id)}}},[t._v(t._s(e.title))])])})),t._v(" "),0!==t.historyList.length?i("div",{staticClass:"history-more-btn",on:{click:function(e){return t.open("https://wenku.baidu.com/nduc/browse/uc?_page=home&_redirect=1#/home","historymore")}}},[t._v("查看更多")]):i("div",{staticClass:"no-history"},[t._v("暂无浏览记录")])],2)])}),[],!1,null,null,null).exports),it={MODULE:{CompTopbarPcClient:"CompTopbarPcClient"}};function ot(t){return function(t){if(Array.isArray(t))return nt(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return nt(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return nt(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function nt(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,o=new Array(e);i<e;i++)o[i]=t[i];return o}var st={props:{visible:{type:Boolean,default:!1},docInfo:{type:Object,default:function(){}},logConf:{type:Object,default:function(){}},from:{type:Array,default:function(){return[]}},contentConf:{type:Object,default:function(){return{privileges:[{icon:"https://edu-wenku.bdimg.com/v1/pc/view/CompPcClient/icon-adblock.png",text:"免广告"},{icon:"https://edu-wenku.bdimg.com/v1/pc/view/CompPcClient/icon-convert.png",text:"格式转换"},{icon:"https://edu-wenku.bdimg.com/v1/pc/view/CompPcClient/icon-offline.png",text:"离线浏览"},{icon:"https://edu-wenku.bdimg.com/v1/pc/view/CompPcClient/icon-doc.png",text:"文档管理"}],btnText:"限时下载PC客户端"}}},pcClientUrl:{type:Object,default:function(){}}},watch:{visible:function(t){if(t){var e,i=this.logConf||{},n=i.actId,s=i.ACT_ID,r=i.behavior,a=void 0===r?{}:r,c=i.BEHAVIOR,l=void 0===c?{}:c;if(s||n)o.log.xsend(s||n,{behavior:(null==l?void 0:l.SHOW)||a.Show,module:[].concat(ot(this.from),[null==it||null===(e=it.MODULE)||void 0===e?void 0:e.CompTopbarPcClient]).join("_")})}}},methods:{clickRoot:function(){var t,e=this,i=this.logConf||{},n=i.actId,s=i.ACT_ID,r=i.behavior,a=void 0===r?{}:r,c=i.BEHAVIOR,l=void 0===c?{}:c;(s||n)&&o.log.xsend(s||n,{behavior:(null==l?void 0:l.CLICK)||a.Click,module:[].concat(ot(this.from),[null==it||null===(t=it.MODULE)||void 0===t?void 0:t.CompTopbarPcClient]).join("_")});window.protocolcheckSDKInited?this.download():(L.a.getScript("https://edu-wenku.bdimg.com/v1/pc/protocolcheck/protocolcheck.js",(function(){e.download()})),window.protocolcheckSDKInited=!0)},download:function(){var t,e,i,o,n=this;if(null!==(t=this.docInfo)&&void 0!==t&&t.docId){var s="wkpcclient://wenku.baidu.com/reader?docId=".concat(null===(e=this.docInfo)||void 0===e?void 0:e.docId);null===(i=window)||void 0===i||null===(o=i.protocolCheck)||void 0===o||o.call(i,s,(function(){n.startDownload()}))}else this.startDownload()},startDownload:function(){var t=this.pcClientUrl||{},e=t.mac,i=t.win,o=/macintosh|mac os x/i.test(navigator.userAgent)?null==e?void 0:e.url:null==i?void 0:i.url;window.location.href=o||"https://wenku.baidu.com/pcactivity/landingPage"}}},rt=(i(131),Object(s.default)(st,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{directives:[{name:"show",rawName:"v-show",value:t.visible,expression:"visible"}],staticClass:"pc-client-wrap",on:{click:function(e){return e.stopPropagation(),t.clickRoot.apply(null,arguments)}}},[i("div",{staticClass:"content-wrap"},t._l(t.contentConf.privileges,(function(e,o){return i("div",{key:o+"_"+e.text,staticClass:"privilege-item",style:{backgroundImage:"url("+e.icon+")"}},[i("div",{staticClass:"privilege-text",domProps:{textContent:t._s(e.text)}})])})),0),t._v(" "),i("div",{staticClass:"button-wrap"},[i("div",{staticClass:"button-download",domProps:{textContent:t._s(t.contentConf.btnText)}})])])}),[],!1,null,"c3a7b62a",null).exports),at=v.ACT_ID_MAP,ct=v.MODULE,lt=v.BEHAVIOR,ut={components:{CompTopbarPcClient:rt},props:{isFrom:{type:Boolean},page:{type:String},wkSmallflow:{type:Object,default:function(){}},viewBizInfo:{type:Object,default:function(){}},logConf:{type:Object,default:function(){}},from:{type:String,default:""},contentConf:{type:Object,default:function(){}},pcClientUrl:{type:Object,default:function(){}}},data:function(){return{visiblePcClientPop:!1}},computed:{docInfo:function(){var t;return(null===(t=this.viewBizInfo)||void 0===t?void 0:t.docInfo)||{}}},methods:{mouseenter:function(){var t,e=(null===(t=this.logConf)||void 0===t?void 0:t.ACT_ID)||at[this.page];e&&o.log.xsend(e,{behavior:lt.HOVER,module:null==ct?void 0:ct.ClientDownload}),this.visiblePcClientPop=!0},mouseleave:function(){this.visiblePcClientPop=!1},handleClick:function(){var t,e=this,i=(null===(t=this.logConf)||void 0===t?void 0:t.ACT_ID)||at[this.page];i&&o.log.xsend(i,{behavior:lt.CLICK,module:null==ct?void 0:ct.ClientDownload}),window.protocolcheckSDKInited?this.download():(L.a.getScript("https://edu-wenku.bdimg.com/v1/pc/protocolcheck/protocolcheck.js",(function(){e.download()})),window.protocolcheckSDKInited=!0)},download:function(){var t,e,i,o,n=this;if(null!==(t=this.docInfo)&&void 0!==t&&t.docId){var s="wkpcclient://wenku.baidu.com/reader?docId=".concat(null===(e=this.docInfo)||void 0===e?void 0:e.docId);null===(i=window)||void 0===i||null===(o=i.protocolCheck)||void 0===o||o.call(i,s,(function(){n.startDownload()}))}else this.startDownload()},startDownload:function(){var t=this.pcClientUrl||{},e=t.mac,i=t.win,o=/macintosh|mac os x/i.test(navigator.userAgent)?null==e?void 0:e.url:null==i?void 0:i.url;window.location.href=o||"https://wenku.baidu.com/pcactivity/landingPage"}}},dt=(i(132),Object(s.default)(ut,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"client-download-wrap"},[i("div",{staticClass:"client-download-content ",on:{click:t.handleClick,mouseenter:t.mouseenter,mouseleave:t.mouseleave}},[i("div",{staticClass:"client-icon"}),t._v(" "),i("div",{staticClass:"client-text"},[t._v("客户端")]),t._v(" "),i("CompTopbarPcClient",{attrs:{visible:t.visiblePcClientPop,"doc-info":t.docInfo,"pc-client-url":t.pcClientUrl,"log-conf":t.logConf,from:[t.from,"ClientDownload"],"content-conf":t.contentConf},on:{"update:visible":function(e){t.visiblePcClientPop=e}}})],1)])}),[],!1,null,null,null).exports);function ht(t){return function(t){if(Array.isArray(t))return pt(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return pt(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return pt(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function pt(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,o=new Array(e);i<e;i++)o[i]=t[i];return o}var vt=v.ACT_ID_MAP,ft=v.MODULE,mt=v.BEHAVIOR,gt=new c.a,yt={props:{page:{type:String},userInfo:{type:Object,default:function(){return{}}},vipInfo:{type:Object,default:function(){return{}}},myShopInfo:{type:Object,default:function(){return{}}},isLogin:{type:Boolean}},data:function(){return{tabList:[{id:0,title:"个人中心",url:"https://wenku.baidu.com/nduc/browse/uc?_page=home&_redirect=1#/home",logPos:"usercenter"},{id:1,title:"会员中心",url:"https://wenku.baidu.com/ndvipmember/browse/index",logPos:"vipcenter"},{id:2,title:"消息",url:"https://wenku.baidu.com/user/mymessage",logPos:"usermsg"},{id:3,title:"收藏",url:"https://wenku.baidu.com/user/collection?st=1",logPos:"usercollection"},{id:4,title:"意见反馈",url:"https://help.baidu.com/newadd?"+["prod_id=12","category=","ufo_refer_url="+encodeURIComponent(location.href)].join("&"),openType:"feedback",logPos:"feedback"},{id:5,title:"退出登录",url:"https://passport.baidu.com/?logout&u="+encodeURIComponent(location.href),openType:"_self",logPos:"loginout"}],hintShowFlag:!1}},computed:{userIcon:function(){var t,e;return(null===(t=this.userInfo)||void 0===t?void 0:t.headIcon)||(null===(e=this.userInfo)||void 0===e?void 0:e.headicon)||""},isVip:function(){return this.vipInfo.isVip},tabListComputed:function(){var t,e=[];this.myShopInfo.showShop&&(e=[{id:6,title:"墨斗鱼后台",url:"https://cuttlefish.baidu.com/shopmis",logPos:"shopmis"},{id:7,title:"作者主页",url:"https://cuttlefish.baidu.com/shop/".concat(null===(t=this.myShopInfo)||void 0===t?void 0:t.shopId),logPos:"/shop"}]);return[].concat(ht(e),ht(this.tabList))}},methods:{showHintContent:function(){this.hintShowFlag=!0;var t=vt[this.page];t&&o.log.xsend(t,{behavior:mt.SHOW,module:[null==ft?void 0:ft.UserIcon,"tabList"].join("_")})},hideHintContent:function(){this.hintShowFlag=!1},hover:function(t){this.$refs["user-hint-content"];this.showHintContent(),l({e:t,cb:this.hideHintContent})},handleTabClick:function(t){var e=vt[this.page];switch(e&&o.log.xsend(e,{behavior:mt.CLICK,module:[null==ft?void 0:ft.UserIcon,"tabList",t.logPos].join("_")}),t.openType){case"_self":u(t.url,"_self");break;case"feedback":u(t.url);break;default:u(t.url)}},mouseenter:function(){var t=vt[this.page],e=this.isLogin?ft.UserIcon:[ft.UserIcon,"notLogin"].join("_");t&&o.log.xsend(t,{behavior:mt.HOVER,module:e})},handleClick:function(){var t=vt[this.page],e=this.isLogin?ft.UserIcon:[ft.UserIcon,"notLogin"].join("_");t&&o.log.xsend(t,{behavior:mt.CLICK,module:e})},login:function(){gt.log()}}},wt=(i(133),Object(s.default)(yt,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"user-icon-wrap",on:{click:t.handleClick,mouseenter:t.mouseenter}},[t.isLogin?[i("div",{class:{"user-icon-content":!0,login:!0,vip:t.isVip},on:{mouseenter:t.hover}},[i("div",{staticClass:"user-icon",style:{backgroundImage:"url("+t.userIcon+")"}}),t._v(" "),i("div",{ref:"user-hint-content",class:["user-icon-hint-content",{show:t.hintShowFlag}]},t._l(t.tabListComputed,(function(e){return i("div",{key:e.id,staticClass:"tab-item",on:{click:function(i){return t.handleTabClick(e)}}},[t._v("\n                    "+t._s(e.title)+"\n                ")])})),0)])]:[i("div",{staticClass:"user-icon-content no-login",on:{click:function(e){return e.preventDefault(),t.login.apply(null,arguments)}}},[i("div",{staticClass:"user-icon"}),t._v(" "),i("div",{staticClass:"user-text"},[t._v("登录")])])]],2)}),[],!1,null,null,null).exports),_t={inheritAttrs:!1,props:{vipInfo:{type:Object,default:function(){return{}}},goodsInfo:{type:Object,default:function(){return{}}},voucher:{type:Object,default:function(){return{}}},monthlySubTitle:{type:String,default:""},proDownloadTicketTotal:{type:Number,default:0},normalDownloadTicketTotal:{type:Number,default:0},isActGoods:{type:Boolean},wkSmallflow:{type:Object,default:function(){return{}}}},computed:{vipInfoText:function(){var t=this.vipInfo;if(this.$attrs.isVip){var e=t.vip_1,i=t.vip_4,o=t.renewal_vip_info,n=0,s=0;return t.isJiaoyuVip&&(s=i.end_time),(t.isWenkuVip||t.isClassicVip)&&(n=e.end_time),n=n>s?o.vip_info.etime_str:o.jiaoyu_vip_info.etime_str,"".concat(n)}return""},sendTicketTotal:function(){return this.normalDownloadTicketTotal+this.proDownloadTicketTotal<=2?16:0},price:function(){var t,e=this.goodsInfo||{},i=e.sale_price;e.is_auto_pay||(i-=(null===(t=this.voucher)||void 0===t?void 0:t.voucher_price)||0);return i/100},actMainTitle:function(){var t,e;return(null===(t=this.goodsInfo)||void 0===t||null===(e=t.searchBoxVipEntranceActInfo)||void 0===e?void 0:e.mainTitle)||""},actSubTitle:function(){var t,e;return(null===(t=this.goodsInfo)||void 0===t||null===(e=t.searchBoxVipEntranceActInfo)||void 0===e?void 0:e.subTitle)||""}}},Ct=(i(134),Object(s.default)(_t,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"vip-hint-title"},[!t.$attrs.isLogin||t.$attrs.isNewUser?[i("p",{staticClass:"main-title"},[t._v("扫码开通连续包月")]),t._v(" "),i("p",{staticClass:"sub-title"},[t._v("新用户首月仅需"),i("em",[t._v("￥"+t._s(t.price))])])]:t.$attrs.isVip?[!t.$attrs.hideQRCode&&t.isActGoods?[i("p",{staticClass:"main-title",domProps:{innerHTML:t._s(t.actMainTitle)}}),t._v(" "),i("p",{staticClass:"sub-title",domProps:{innerHTML:t._s(t.actSubTitle)}})]:t.normalDownloadTicketTotal+t.proDownloadTicketTotal<=2?[i("p",{staticClass:"main-title"},[t._v("扫码"),i("em",[t._v("￥"+t._s(t.price))]),t._v("续费年卡")]),t._v(" "),i("p",{staticClass:"sub-title"},[t._v("立赠"),i("em",[t._v(t._s(t.sendTicketTotal))]),t._v("个下载特权")])]:t.$attrs.vipLastTime<=7?[i("p",{staticClass:"main-title"},[t._v("扫码"),i("em",[t._v("￥"+t._s(t.price))]),t._v("续费年卡")]),t._v(" "),t._m(0)]:[i("p",{staticClass:"main-title"},[t._v("您正享用VIP多项特权：")]),t._v(" "),i("p",{staticClass:"sub-title vip-etime"},[t._v("VIP有效期至："+t._s(t.vipInfoText))])]]:t.$attrs.isLogin&&!t.$attrs.isVip?[!t.$attrs.hideQRCode&&t.isActGoods?[i("p",{staticClass:"main-title",domProps:{innerHTML:t._s(t.actMainTitle)}}),t._v(" "),i("p",{staticClass:"sub-title",domProps:{innerHTML:t._s(t.actSubTitle)}})]:t.$attrs.vipLastTime<=10&&t.normalDownloadTicketTotal+t.proDownloadTicketTotal>=1?[i("p",{staticClass:"main-title"},[t._v("扫码"),i("em",[t._v("￥"+t._s(t.price))]),t._v("续费年卡")]),t._v(" "),t._m(1)]:[i("p",{staticClass:"main-title"},[t._v("扫码"),i("em",[t._v("￥"+t._s(t.price))]),t._v("续费年卡")]),t._v(" "),i("p",{staticClass:"sub-title"},[t._v("海量内容免费下载")])]]:t._e()],2)}),[function(){var t=this.$createElement,e=this._self._c||t;return e("p",{staticClass:"sub-title"},[this._v("剩余下载特权"),e("em",[this._v("延时30天")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",{staticClass:"sub-title"},[this._v("\n                已过期下载特权"),e("em",[this._v("延时30天")])])}],!1,null,null,null).exports),bt=i(29),It=i.n(bt);function kt(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,o)}return i}function xt(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?kt(Object(i),!0).forEach((function(e){St(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):kt(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function St(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var Tt=new c.a,Vt={inheritAttrs:!1,props:{hintContentShowFlag:{type:Boolean},goodsInfo:{type:Object,default:null},voucher:{type:Object,default:function(){return{}}},isLogin:{type:Boolean},isNewUser:{type:Boolean},isBackUser:{type:Boolean},extParams:{type:Object,default:function(){return{}}},isActGoods:{type:Boolean}},data:function(){return{qrCode:"",qrCodeValidTimer:0,checkQrCodeTimes:0,isExpire:!1,loginStatus:this.isLogin?1:0,isInit1st:!1}},computed:{isAutoPay:function(){var t;return null===(t=this.goodsInfo)||void 0===t?void 0:t.is_auto_pay},params:function(){var t,e,i,o,n,s,r,a=(null===(t=this.goodsInfo)||void 0===t?void 0:t.sale_price)||0;this.isAutoPay||(a-=(null===(r=this.voucher)||void 0===r?void 0:r.voucher_price)||0);return xt({action:"vip",price:a,original_price:null===(e=this.goodsInfo)||void 0===e?void 0:e.price,cashier_type:1,goods_id:null===(i=this.goodsInfo)||void 0===i?void 0:i.goods_id,goods_type:null===(o=this.goodsInfo)||void 0===o?void 0:o.goods_type,voucher_id:(null===(n=this.voucher)||void 0===n?void 0:n.voucher_id)||0,voucher_price:(null===(s=this.voucher)||void 0===s?void 0:s.voucher_price)||0,platform:"pc",auth_pay:this.isAutoPay?1:0},this.extParams)},showLoginMask:function(){return!this.isLogin||0===this.loginStatus}},watch:{params:function(t,e){this.loginStatus&&this.checkParams()&&this.isInit1st&&this.initQrCodeCashier(this.params)},hintContentShowFlag:function(t){this.isInit1st=!!this.isInit1st||t},isInit1st:function(t){t&&this.initQrCodeCashier(this.params)}},methods:{fetchQrpayCode:function(t){return D.wkAxios.get("/cashier/interfacev2/getqrpaycode",{params:xt({t:+new Date},t)})},checkQrpay:function(t){return D.wkAxios.get("/cashier/interfacev2/getqrpaystatus",{params:xt({t:+new Date},t)})},initQrCodeCashier:function(t){var e=this;this.loginStatus&&this.checkParams()&&this.fetchQrpayCode(t).then((function(t){if(!t.qr_code||!t.qr_url)throw"qr_url_err";e.qrCode=t.qr_code;var i={text:t.qr_url,width:84,height:84,colorLight:""};if(e.$attrs.isVip)i.colorLight="#FFF4DB";else if(e.isActGoods){var o,n;i.colorLight=(null===(o=e.goodsInfo)||void 0===o||null===(n=o.searchBoxVipEntranceActInfo)||void 0===n?void 0:n.rightPartBgColor)||"#FFF"}else i.colorLight="#E7E7E7";e.$refs.qrCodeWrap&&(e.$refs.qrCodeWrap.innerHTML=""),new It.a(e.$refs.qrCodeWrap,i),clearTimeout(e.qrCodeValidTimer),e.checkQrCodeTimes=0,e.checkQrCodeValid()})).catch((function(t){t.status&&2003==+t.status.code?e.loginStatus=0:e.showRefreshQrCode(),"qr_url_err"===t&&o.log.xsend("102886",{goodsType:e.goodsInfo.goods_type})}))},checkQrCodeValid:function(){var t=this;this.qrCodeValidTimer=setTimeout((function(){++t.checkQrCodeTimes;var e={t:+new Date,code:t.qrCode};t.checkQrCodeTimes<24?t.checkQrpay(e).then((function(e){e.status&&1==+e.status?location.reload():t.checkQrCodeValid()})).catch((function(e){e.status&&2003==+e.status.code?t.loginStatus=0:t.checkQrCodeValid()})):t.showRefreshQrCode()}),5e3)},showRefreshQrCode:function(){this.$refs.qrCodeWrap&&(this.$refs.qrCodeWrap.innerHTML=""),this.isExpire=!0,clearTimeout(this.qrCodeValidTimer)},clickRefreshQrCode:function(){this.isExpire&&(this.isExpire=!1,this.initQrCodeCashier(this.params))},clickLogin:function(){Tt.log()},checkParams:function(){var t=this.goodsInfo||{},e=t.goods_type,i=t.goods_id,o=t.sale_price;return!!(e&&i&&o)}}},At=(i(135),Object(s.default)(Vt,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"scan-wrap"},[t.loginStatus?i("div",{ref:"qrCodeWrap",staticClass:"qr-code-wrap",class:[{"refresh-qr-code":t.isExpire}],on:{click:t.clickRefreshQrCode}}):i("div",{staticClass:"qr-code-wrap no-login",on:{click:t.clickLogin}}),t._v(" "),t._m(0),t._v(" "),t.isAutoPay?i("p",{staticClass:"agreement"},[t._v("购买即同意\n        "),i("a",{attrs:{href:"https://wenku.baidu.com/portal/browse/help#help/25",target:"_blank"}},[t._v("《自动续费协议》")])]):t._e()])}),[function(){var t=this.$createElement,e=this._self._c||t;return e("p",{staticClass:"pay-tips"},[this._v("微信/支付宝付款后请"),e("em",[this._v("刷新")]),this._v("页面")])}],!1,null,null,null).exports),Pt={inheritAttrs:!1,props:{pagesTracker:{type:Object},assembleCashierUrl:{type:Function},isActGoods:{type:Boolean},page:{type:String,default:""},ccExt:{type:String,default:""},viewBizInfo:{type:Object,default:function(){return{}}},vipInfo:{type:Object,default:function(){return{}}},mixVipAndUserInfo:{type:Object,default:function(){return{}}}},computed:{actBtnText:function(){var t,e;return(null===(t=this.$attrs.goodsInfo)||void 0===t||null===(e=t.searchBoxVipEntranceActInfo)||void 0===e?void 0:e.btnText)||""}},methods:{handleClick:function(){var t,e=this.page,i=this.mixVipAndUserInfo,o=this.vipInfo,n=this.viewBizInfo;t=this.$attrs.isLogin&&this.$attrs.isVip?"NewtopVipQrcardBtnXf":"NewtopVipQrcardBtnKt",t+=this.ccExt;var s,r=(this.$attrs.goodsInfo||{}).good_id,a={location:"searchBox.newVipActivity.vipPayBtn",ext:t},c={choose_goods_id:void 0===r?312:r};if("function"==typeof this.assembleCashierUrl)s=this.assembleCashierUrl(L.b.Cashier.CASHIER.VIP,a,c);else{var l={page:e,mixVipAndUserInfo:i,vipInfo:o,viewBiz:n};this.pagesTracker&&(l.pagesTracker=this.pagesTracker),s=L.b.Cashier.assembleCashierUrl(L.b.Cashier.CASHIER.VIP,a,l,c)}h(s)||(s="https://wenku.baidu.com".concat(s)),location.href=s}}},Lt=(i(136),Object(s.default)(Pt,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.$attrs.isVip&&t.$attrs.vipLastTime>7&&t.$attrs.normalDownloadTicketTotal+t.$attrs.proDownloadTicketTotal>2?i("div",{staticClass:"pay-btn",on:{click:t.handleClick}},[t._v("续费VIP")]):t.isActGoods?i("div",{staticClass:"pay-btn",on:{click:t.handleClick}},[t._v(t._s(t.actBtnText))]):i("div",{staticClass:"pay-btn",on:{click:t.handleClick}},[t._v("查看更多VIP套餐")])}),[],!1,null,null,null).exports),Dt=v.ACT_ID_MAP,Ot=v.MODULE,Et=v.BEHAVIOR,Bt={components:{VipHintTitle:Ct,VipQrCode:At,VipPayBtn:Lt},props:{pagesTracker:{type:Object},assembleCashierUrl:{type:Function},assembleCashierCode:{type:Function},vipInfo:{type:Object,default:function(){return{}}},page:{type:String,default:""},ccExt:{type:String,default:""},isLogin:{type:Boolean},viewBizInfo:{type:Object,default:function(){return{}}},mixVipAndUserInfo:{type:Object,default:function(){return{}}},wkSmallflow:{type:Object,default:function(){return{}}},monthlyConfigInfo:{type:Object,default:function(){}}},data:function(){return{hintContentShowFlag:!1,goodsInfo:null,voucher:null,monthlyIconText:"",monthlySubTitle:"",showVipReportCode:!1}},computed:{isVip:function(){return this.vipInfo.isVip},isClassicVip:function(){return this.vipInfo.isClassicVip},isWenkuVip:function(){return this.vipInfo.isWenkuVip},isJiaoyuVip:function(){return this.vipInfo.isJiaoyuVip},isNewUser:function(){return!!this.vipInfo.is_new_user},isBackUser:function(){return this.isLogin&&!this.isVip&&!this.isNewUser},vipLastTime:function(){var t=this.vipInfo,e=t.vip_1,i=void 0===e?{}:e,o=t.vip_2,n=void 0===o?{}:o,s=t.vip_4,r=void 0===s?{}:s,a=(1e3*Math.max(i.end_time||0,n.end_time||0,r.end_time||0)-(new Date).getTime())/1e3/60/60/24;return this.isVip?Math.ceil(Math.abs(a)):Math.floor(Math.abs(a))},normalDownloadTicketTotal:function(){var t,e,i,o,n;return this.isVip?(null===(t=this.vipInfo.renewal_vip_info)||void 0===t?void 0:t.normal_download_ticket_total)||0:((null===(e=this.vipInfo.renewal_vip_info)||void 0===e||null===(i=e.vip_info)||void 0===i?void 0:i.normal_download_ticket)||0)+((null===(o=this.vipInfo.renewal_vip_info)||void 0===o||null===(n=o.jiaoyu_vip_info)||void 0===n?void 0:n.normal_download_ticket)||0)},proDownloadTicketTotal:function(){var t,e,i,o,n;return this.isVip?(null===(t=this.vipInfo.renewal_vip_info)||void 0===t?void 0:t.pro_download_ticket_total)||0:((null===(e=this.vipInfo.renewal_vip_info)||void 0===e||null===(i=e.vip_info)||void 0===i?void 0:i.pro_download_ticket)||0)+((null===(o=this.vipInfo.renewal_vip_info)||void 0===o||null===(n=o.jiaoyu_vip_info)||void 0===n?void 0:n.pro_download_ticket)||0)},showVipReport:function(){return this.isVip||this.isLogin&&!this.isVip&&1!=+this.vipInfo.user_type},hideQRCode:function(){return this.isVip&&this.vipLastTime>7&&this.normalDownloadTicketTotal+this.proDownloadTicketTotal>2},extParams:function(){var t,e,i,o=this.page,n=this.mixVipAndUserInfo,s=this.vipInfo,r=this.viewBizInfo;i=this.isLogin&&this.isVip?"NewtopVipQrcardQrXf":"NewtopVipQrcardQrKt";var a,c={location:"searchBox.newVipActivity.qr",ext:i+=this.ccExt};if("function"==typeof this.assembleCashierCode)a=this.assembleCashierCode(L.b.Cashier.CASHIER.VIP,c);else{var l={page:o,mixVipAndUserInfo:n,viewBizInfo:r,vipInfo:s,isOnlyCurPage:!0};this.pagesTracker&&(l.pagesTracker=this.pagesTracker),a=L.b.Cashier.assembleCashierCode(L.b.Cashier.CASHIER.VIP,c,l)}return{refer_doc_id:null===(t=this.viewBizInfo)||void 0===t||null===(e=t.docInfo)||void 0===e?void 0:e.showDocId,cashier_code:a,test_id:this.wkSmallflow.testId}},isActGoods:function(){var t,e,i,o;return null===(t=this.goodsInfo)||void 0===t||null===(e=t.vip_act)||void 0===e?void 0:e.includes(null===(i=this.goodsInfo)||void 0===i||null===(o=i.searchBoxVipEntranceActInfo)||void 0===o?void 0:o.key)},searchBoxVipEntranceActInfo:function(){var t;return this.isActGoods?(null===(t=this.goodsInfo)||void 0===t?void 0:t.searchBoxVipEntranceActInfo)||{}:null},actStyle:function(){return this.isActGoods?{backgroundImage:"url(".concat(this.searchBoxVipEntranceActInfo.bgImg,")"),backgroundColor:this.searchBoxVipEntranceActInfo.bgColor}:null},actLeftPartStyle:function(){return this.isActGoods?{color:this.searchBoxVipEntranceActInfo.leftPartTextColor}:null},actRightPartStyle:function(){return this.isActGoods?{background:this.searchBoxVipEntranceActInfo.rightPartBgColor}:null},isLowIE9:function(){var t=navigator.userAgent;if(/Trident\/7/i.test(t)&&/rv:11/i.test(t))return!1;var e=/MSIE ([0-9.]*)/.exec(t);return!!(e&&e[1]&&+e[1]<=9)}},watch:{monthlyConfigInfo:{immediate:!0,handler:function(t){t&&Object.keys(t).length&&(this.setMonthlyTag(),this.$emit("update-view-monthly-config",(null==t?void 0:t.pcView)||{}))}}},created:function(){this.initGoodsInfo()},methods:{open:function(t,e){e&&o.log.xsend(102899,{cos_type:"click",position:e}),u(t)},hover:function(t){var e=Dt[this.page],i="kaitongVip";!this.isLogin||this.isNewUser?i="newUserVip":this.isVip&&(i="xufeiVip"),e&&o.log.xsend(e,{behavior:Et.HOVER,module:[null==Ot?void 0:Ot.SearchTab,i].join("_")}),o.log.xsend(102899,{cos_type:"show",position:"topvipqrcard"}),this.showHintContent(),l({e:t,cb:this.hidenHintContent})},showHintContent:function(){((this.goodsInfo||{}).sale_price||0)&&(this.hintContentShowFlag=!0)},hidenHintContent:function(){this.hintContentShowFlag=!1},showReport:function(t){o.log.xsend(103237),this.showReportCode(),l({e:t,cb:this.hideReportCode})},showReportCode:function(){this.showVipReportCode=!0},hideReportCode:function(){this.showVipReportCode=!1},gotoCashier:function(){var t=Dt[this.page];t&&o.log.xsend(t,{behavior:Et.CLICK,module:null==Ot?void 0:Ot.NewVipActivity});var e=this.page,i=this.mixVipAndUserInfo,n=this.vipInfo,s=this.viewBizInfo,r="";r=this.isVip?"NewtopVipQriconXf":"NewtopVipQriconKt";var a,c={location:"searchBox.newVipActivity",ext:r+=this.ccExt};if("function"==typeof this.assembleCashierUrl)a=this.assembleCashierUrl(L.b.Cashier.CASHIER.VIP,c);else{var l={page:e,mixVipAndUserInfo:i,vipInfo:n,viewBiz:s};this.pagesTracker&&(l.pagesTracker=this.pagesTracker),a=L.b.Cashier.assembleCashierUrl(L.b.Cashier.CASHIER.VIP,c,l)}u(a)},setMonthlyTag:function(){var t,e=this;this.monthlyConfig=(null===(t=this.monthlyConfigInfo)||void 0===t?void 0:t.pcHeader)||{},this.monthlyConfig&&function(){var t,i,o,n=(e.wkSmallflow||{}).testData,s=void 0===n?{}:n;if(s=s[null===(t=e.monthlyConfig)||void 0===t?void 0:t.layerId]||{},(null===(i=e.monthlyConfig)||void 0===i||null===(o=i.array)||void 0===o?void 0:o.length)>0)for(var r=function(t){var i,o,n,r,a=e.monthlyConfig.array[t];a&&(e.monthlyIconText=a.defaultTextIconView,e.monthlySubTitle=a.defaultTextSubTitle,(null==a||null===(i=a.list)||void 0===i?void 0:i.length)>0&&(o=a.list.find((function(t){return s[a.key]===t.value}))),o&&(e.monthlyIconText=null===(n=o)||void 0===n?void 0:n.textIconView,e.monthlySubTitle=null===(r=o)||void 0===r?void 0:r.textSubTitle))},a=0;a<e.monthlyConfig.array.length;a++)r(a)}()},getGoodsInfo:function(){return!this.isLogin||this.isNewUser?1:this.isBackUser&&2,D.wkAxios.get("/goods/interface/getgoodsinfo",{params:{goods_type:3,cashier_type:1,platform:"pc"}})},getVoucherInfo:function(t){return D.wkAxios.get("/cashier/interface/getvoucher",{params:{goods_type:"3",goods_id:t}})},initGoodsInfo:function(){var t=this;this.getGoodsInfo().then((function(){var e,i,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(t.goodsInfo={},!t.isLogin||t.isNewUser)?t.goodsInfo=(null==o||null===(e=o.goods_info)||void 0===e?void 0:e.find((function(t){return 1===(null==t?void 0:t.len_type)&&(null==t?void 0:t.is_auto_pay)})))||{}:t.goodsInfo=(null==o||null===(i=o.goods_info)||void 0===i?void 0:i.find((function(t){return 12===(null==t?void 0:t.len_type)&&!(null!=t&&t.is_auto_pay)})))||{};var n=t.goodsInfo||{},s=n.is_auto_pay,r=n.goods_id,a=n.first_trade_discount;t.$emit("update-pop-goods-list",t.goodsInfo),!s&&t.isLogin&&1!=+a&&t.getVoucherInfo(r).then((function(e){var i=(null==e?void 0:e.voucher_info)||[];t.voucher=i[0]}))}))}}},Ut=(i(137),Object(s.default)(Bt,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"vip-activity-wrap-new",on:{mouseenter:t.hover}},[i("div",{staticClass:"vip-activity-content",on:{click:t.gotoCashier}},[i("div",{staticClass:"client-icon"}),t._v(" "),!t.isLogin||t.isNewUser?i("div",{staticClass:"client-text"},[t._v(t._s(t.monthlyIconText))]):t.isVip?i("div",{staticClass:"client-text"},[t._v("续费VIP")]):i("div",{staticClass:"client-text"},[t._v("开通VIP")])]),t._v(" "),i("div",{class:["vip-activity-hint-content",{show:t.hintContentShowFlag}],style:t.actStyle},[i("div",{staticClass:"left-part"},[t.isActGoods?[i("div",{staticClass:"vip-act-hint-item",style:t.actLeftPartStyle,on:{click:function(e){return t.open("https://wenku.baidu.com/vip","vipcenter")}}},[i("i",{style:{backgroundImage:"url("+this.searchBoxVipEntranceActInfo.vipIconBg+")"}}),t._v("\n                    会员中心\n                ")]),t._v(" "),i("div",{staticClass:"vip-act-hint-item",style:t.actLeftPartStyle,on:{click:function(e){return t.open("https://wenku.baidu.com/ndwelfare/membercenter/welfarecenter","welfarecenter")}}},[i("i",{style:{backgroundImage:"url("+this.searchBoxVipEntranceActInfo.welfareCenterIconBg+")"}}),t._v("\n                    VIP福利社\n                ")]),t._v(" "),i("div",{staticClass:"vip-act-hint-item",style:t.actLeftPartStyle,on:{click:function(e){return t.open("https://wenku.baidu.com/ndvipmember/browse/newvipfreedoczone","vipfree")}}},[i("i",{style:{backgroundImage:"url("+this.searchBoxVipEntranceActInfo.vipFreeIconBg+")"}}),t._v("\n                    VIP权益\n                ")]),t._v(" "),i("div",{staticClass:"vip-act-hint-item",style:t.actLeftPartStyle,on:{click:function(e){return t.open("https://wenku.baidu.com/ndvipmember/browse/vipprivilege","vipprivilege")}}},[i("i",{style:{backgroundImage:"url("+this.searchBoxVipEntranceActInfo.vipPrivilegeIconBg+")"}}),t._v("\n                    VIP精选\n                ")])]:[i("div",{staticClass:"vip-hint-item vip",on:{click:function(e){return t.open("https://wenku.baidu.com/vip","vipcenter")}}},[t._v("\n                    会员中心\n                ")]),t._v(" "),t.showVipReport?i("div",{staticClass:"vip-hint-item vip-report",on:{mouseenter:t.showReport}},[t._v("\n                    省钱报告\n                ")]):t._e(),t._v(" "),i("div",{staticClass:"vip-hint-item welfare-center",on:{click:function(e){return t.open("https://wenku.baidu.com/ndwelfare/membercenter/welfarecenter","welfarecenter")}}},[t._v("\n                    VIP福利社\n                ")]),t._v(" "),i("div",{staticClass:"vip-hint-item free-doc-zone",on:{click:function(e){return t.open("https://wenku.baidu.com/ndvipmember/browse/newvipfreedoczone","vipfree")}}},[t._v("\n                    VIP权益\n                ")]),t._v(" "),i("div",{staticClass:"vip-hint-item vip-privilege",on:{click:function(e){return t.open("https://wenku.baidu.com/ndvipmember/browse/vipprivilege","vipprivilege")}}},[t._v("\n                    VIP精选\n                ")])]],2),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:t.showVipReportCode,expression:"showVipReportCode"}],staticClass:"right-part vip"},[t._m(0)]),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:!t.showVipReportCode,expression:"!showVipReportCode"}],staticClass:"right-part",class:[t.isVip?"vip":"",t.isLowIE9?"low-ie9":""],style:t.actRightPartStyle},[i("VipHintTitle",{attrs:{isLogin:t.isLogin,isVip:t.isVip,vipInfo:t.vipInfo,isNewUser:t.isNewUser,vipLastTime:t.vipLastTime,normalDownloadTicketTotal:t.normalDownloadTicketTotal,proDownloadTicketTotal:t.proDownloadTicketTotal,goodsInfo:t.goodsInfo,voucher:t.voucher,extParams:t.extParams,hideQRCode:t.hideQRCode,isActGoods:t.isActGoods,wkSmallflow:t.wkSmallflow,monthlySubTitle:t.monthlySubTitle}}),t._v(" "),t.hideQRCode?i("div",{staticClass:"vip-hint-content"},[i("p",[t._v("享全站VIP文档下载特权")]),t._v(" "),i("p",[t._v("千万热门文档VIP随心下载")]),t._v(" "),i("p",[t._v("无限次百度网盘转存特权")]),t._v(" "),i("p",[t._v("复制转换工具无限使用")])]):i("VipQrCode",{attrs:{isLogin:t.isLogin,isVip:t.isVip,isNewUser:t.isNewUser,isBackUser:t.isBackUser,vipLastTime:t.vipLastTime,normalDownloadTicketTotal:t.normalDownloadTicketTotal,proDownloadTicketTotal:t.proDownloadTicketTotal,goodsInfo:t.goodsInfo,voucher:t.voucher,hintContentShowFlag:t.hintContentShowFlag,extParams:t.extParams,isActGoods:t.isActGoods}}),t._v(" "),i("VipPayBtn",{attrs:{isLogin:t.isLogin,page:t.page,"cc-ext":t.ccExt,isVip:t.isVip,vipInfo:t.vipInfo,viewBizInfo:t.viewBizInfo,mixVipAndUserInfo:t.mixVipAndUserInfo,vipLastTime:t.vipLastTime,normalDownloadTicketTotal:t.normalDownloadTicketTotal,proDownloadTicketTotal:t.proDownloadTicketTotal,goodsInfo:t.goodsInfo,isActGoods:t.isActGoods,assembleCashierUrl:t.assembleCashierUrl,pagesTracker:t.pagesTracker}})],1)])])}),[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"vip-report-content"},[e("div",{staticClass:"vip-report-title"},[e("p",[this._v("看省钱报告")]),this._v(" "),e("p",[this._v("领"),e("span",[this._v("超值续费礼包")])])]),this._v(" "),e("div",{staticClass:"vip-report-code"}),this._v(" "),e("div",{staticClass:"vip-report-tip"},[this._v("打开手机扫一扫")])])}],!1,null,null,null).exports),jt=v.ACT_ID_MAP,Qt=v.MODULE,qt=v.BEHAVIOR,Rt=new c.a,Ht={props:{page:{type:String},isLogin:{type:Boolean,default:!1},shopUploadConf:{type:Object,default:function(){return{show:!0,title:"上传文档",url:"https://cuttlefish.baidu.com/shopmis#/commodityManage/documentation"}}}},methods:{upload:function(){var t=jt[this.page];t&&o.log.xsend(t,{behavior:qt.CLICK,module:null==Qt?void 0:Qt.ShopEnter}),this.isLogin?window.open(this.shopUploadConf.url):Rt.log()}}},Mt=(i(138),Object(s.default)(Ht,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"shop-box-wraper"},[i("div",{staticClass:"shop-box-content",on:{click:function(e){return t.upload()}}},[i("div",{staticClass:"client-icon"}),t._v(" "),i("div",{staticClass:"client-text"},[t._v(t._s(t.shopUploadConf.title))])])])}),[],!1,null,"50c2af54",null).exports),$t=v.MODULE,Ft=v.BEHAVIOR,Nt={props:{isFrom:{type:Boolean,default:!1},mixVipAndUserInfo:{type:Object,default:function(){}},vipInfo:{type:Object,default:function(){}},myShopInfo:{type:Object,default:function(){}},viewBizInfo:{type:Object,default:function(){}},wkSmallflow:{type:Object,default:function(){}},logConf:{type:Object,default:function(){}},pcClientUrl:{type:Object,default:function(){}},topbarPcClientContentConf:{type:Object,default:function(){}},searchWords:{type:Array,default:function(){return[]}},fr:{type:String,default:"searchBox"},version:{type:String},page:{type:String,default:""},ccExt:{type:String,default:""},ie:{type:String,default:"utf-8"},small:{type:Boolean},isLogin:{type:Boolean},isShowAllTool:{type:Boolean,default:!0},shopUploadConf:{type:Object,default:function(){return{}}},isPatent:{type:Boolean,default:!1},assembleCashierUrl:{type:Function},assembleCashierCode:{type:Function},pagesTracker:{type:Object},userInputQuery:{type:String,default:""}},data:function(){return{moduleName:"SearchBox",query:"",modelLm:0,classCustom:"",vipActivityPop:!1,monthlyConfigInfo:{},shopUploadConfData:{},adData:{},hotData:{},docClassifyConf:[]}},components:{SearchLogo:r,SearchTab:P,SearchInput:z,PatentSearchInput:G,BrowseHistory:et,ClientDownload:dt,UserIcon:wt,NewVipActivity:Ut,ShopUpload:Mt},computed:{hotWord:function(){var t=this.searchWords;return t&&t.length?L.b.Array.getRandomArray(t,1)[0].content:""},isFromTfReader:function(){return"searchTfBox&tfUTMSource=bdss-WD"===this.fr},isLoginComputed:function(){var t,e;return this.isLogin||(null===(t=this.mixVipAndUserInfo)||void 0===t||null===(e=t.userInfo)||void 0===e?void 0:e.isLogin)},shopUploadConfMerged:function(){return["_view2020_","_view2022_"].includes(this.page)?this.shopUploadConf||{}:this.shopUploadConfData||{}}},created:function(){this.getSulaData(),["_view2020_","_view2022_"].includes(this.page)&&(this.classCustom="small-flow-1")},methods:{getSulaData:function(){var t=this,e={requests:[{sceneID:"PCCommonTopToolbar"}]};return["_view2020_","_view2022_"].includes(this.page)||e.requests.push({sceneID:"ShopEnterLikn"}),this.isShowAllTool&&e.requests.push({sceneID:"PCCommonDocClassify"}),Object(D.wkAxios)({url:"/gsula/sula/syncmrecall",method:"post",data:e,headers:{"Content-Type":"application/json;charset=utf-8"}}).then((function(e){var i,o,n,s,r,a,c,l,u,d,h=(null==e?void 0:e.items)||{},p=h.PCCommonTopToolbar,v=h.ShopEnterLikn,f=h.PCCommonDocClassify;((null==p||null===(i=p.result)||void 0===i?void 0:i.items)||[]).forEach((function(e){switch(e.sourceID){case 104:t.monthlyConfigInfo=e.data;break;case 105:t.hotData=e.data;break;case 106:t.adData=e.data}})),t.docClassifyConf=(null==f||null===(o=f.result)||void 0===o||null===(n=o.items)||void 0===n||null===(s=n[0])||void 0===s||null===(r=s.data)||void 0===r?void 0:r.docs)||[],t.shopUploadConfData=(null===(a=(null==v||null===(c=v.result)||void 0===c||null===(l=c.items)||void 0===l||null===(u=l.find)||void 0===u||null===(d=u.call(l,(function(t){return 94===t.sourceID})))||void 0===d?void 0:d.data)||{})||void 0===a?void 0:a.viewTopUpload)||{}})).catch((function(t){console.log(t)}))},searchDoc:function(t){this.query=t.word,this.search(),this.setSearchRecords(t.word)},searchPatentDoc:function(t){if(t.query)switch(o.log.xsend(103232,{behavior:Ft.CLICK,module:null==$t?void 0:$t.Patent,action:t.action||"toPatent"}),t.action){case"toSearch":this.query=t.query,this.search();break;case"toPatent":default:this.query=t.query,this.toPanten()}},toPanten:function(){var t=this.query,e=this.fr,i=location.origin+"/ndthirdparty/patent";location.href="".concat(i,"?wd=").concat(encodeURIComponent(t),"&fr=").concat(e)},setSearchRecords:function(t){var e=Math.floor((new Date).getTime()/1e3);return D.wkAxios.get("/user/interface/jiaoyusearch",{params:{source:"pc",action:"set",mark:t+":"+e}})},search:function(){o.log.xsend(102295,{index:this.small?1:0,page:this.page}),o.log.xsend(102899,{cos_type:"click",position:"search"});var t=this.query,e=this.modelLm,i=this.fr;u("".concat("https://wenku.baidu.com/search","?word=").concat(encodeURIComponent(t),"&lm=").concat(e,"&od=0&fr=").concat(i,"&ie=").concat(this.ie),"_blank")}}},Wt=(i(139),Object(s.default)(Nt,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"search-box-wrapper",class:["v-"+t.version,t.small?"small":"",t.classCustom,t.isShowAllTool?"":"search-box-tool",t.isPatent?"patent":""]},[i("div",{staticClass:"search-box-inner-wrapper"},[i("div",[i("SearchLogo",{attrs:{fr:t.fr,"is-patent":t.isPatent}}),t._v(" "),t.isFromTfReader?t._e():[i("SearchTab",{attrs:{page:t.page,"is-show-all-tool":t.isShowAllTool,docList:t.docClassifyConf}})]],2),t._v(" "),t.isPatent&&"patent"===t.page?i("PatentSearchInput",{attrs:{fr:t.fr,page:t.page,"user-input-query":t.userInputQuery},on:{searchDoc:t.searchPatentDoc}}):i("SearchInput",{attrs:{fr:t.fr,page:t.page,placeholder:t.hotWord,wkSmallflow:t.wkSmallflow,viewBizInfo:t.viewBizInfo,isShowAllTool:t.isShowAllTool,hotData:t.hotData,adData:t.adData},on:{searchDoc:t.searchDoc}}),t._v(" "),i("div",{staticClass:"right-box"},[t.shopUploadConfMerged.show&&!t.isPatent?i("ShopUpload",{attrs:{"is-login":t.isLoginComputed,"shop-upload-conf":t.shopUploadConfMerged,page:t.page}}):t._e(),t._v(" "),t.isFromTfReader?t._e():[i("NewVipActivity",t._g({attrs:{"is-login":t.isLoginComputed,"vip-info":t.vipInfo,page:t.page,"cc-ext":t.ccExt,viewBizInfo:t.viewBizInfo,mixVipAndUserInfo:t.mixVipAndUserInfo,wkSmallflow:t.wkSmallflow,monthlyConfigInfo:t.monthlyConfigInfo,assembleCashierUrl:t.assembleCashierUrl,assembleCashierCode:t.assembleCashierCode,pagesTracker:t.pagesTracker}},t.$listeners)),t._v(" "),i("ClientDownload",{attrs:{page:t.page,"view-biz-info":t.viewBizInfo,"wk-smallflow":t.wkSmallflow,"pc-client-url":t.pcClientUrl,"content-conf":t.topbarPcClientContentConf,from:t.moduleName,"log-conf":t.logConf,"is-from":t.isFrom}}),t._v(" "),i("BrowseHistory",{attrs:{page:t.page,"is-login":t.isLoginComputed}})],t._v(" "),i("UserIcon",{attrs:{page:t.page,"is-login":t.isLoginComputed,"vip-info":t.vipInfo,"user-info":t.mixVipAndUserInfo.userInfo,"my-shop-info":t.myShopInfo,monthlyConfigInfo:t.monthlyConfigInfo}})],2)],1)])}),[],!1,null,null,null));e.a=Wt.exports},111:function(t,e,i){t.exports=i(16)(39)},124:function(t,e,i){"use strict";i(49)},125:function(t,e,i){"use strict";i(50)},126:function(t,e,i){"use strict";i(51)},127:function(t,e,i){"use strict";i(52)},128:function(t,e,i){"use strict";i(53)},129:function(t,e,i){"use strict";i(54)},130:function(t,e,i){"use strict";i(55)},131:function(t,e,i){"use strict";i(56)},132:function(t,e,i){"use strict";i(57)},133:function(t,e,i){"use strict";i(58)},134:function(t,e,i){"use strict";i(59)},135:function(t,e,i){"use strict";i(60)},136:function(t,e,i){"use strict";i(61)},137:function(t,e,i){"use strict";i(62)},138:function(t,e,i){"use strict";i(63)},139:function(t,e,i){"use strict";i(64)},49:function(t,e,i){},50:function(t,e,i){},51:function(t,e,i){},52:function(t,e,i){},53:function(t,e,i){},54:function(t,e,i){},55:function(t,e,i){},56:function(t,e,i){},57:function(t,e,i){},58:function(t,e,i){},59:function(t,e,i){},60:function(t,e,i){},61:function(t,e,i){},62:function(t,e,i){},63:function(t,e,i){},64:function(t,e,i){}}]);